!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module?module.exports=e():t.format=e()}(this,function(){return function(t,e){"use strict";if(!t||isNaN(+e))return e;var n,i,s,r,l,o=t.length,f=t.search(/[0-9\-\+#]/),h=0<f?t.substring(0,f):"",g=t.split("").reverse().join(""),u=g.search(/[0-9\-\+#]/),c=o-u,d=t.substring(c,1+c),a=c+("."===d||","===d?1:0),d=0<u?t.substring(a,o):"",u=(e="-"===(t=t.substring(f,a)).charAt(0)?-e:+e)<0?e=-e:0,p=(f=t.match(/[^\d\-\+#]/g))&&f[f.length-1]||".",b=f&&f[1]&&f[0]||",";if(t=t.split(p),e=+(e=e.toFixed(t[1]&&t[1].length))+"",r=t[1]&&t[1].lastIndexOf("0"),(!(s=e.split("."))[1]||s[1]&&s[1].length<=r)&&(e=(+e).toFixed(r+1)),r=t[0].split(b),t[0]=r.join(""),-1<(n=t[0]&&t[0].indexOf("0")))for(;s[0].length<t[0].length-n;)s[0]="0"+s[0];else 0==+s[0]&&(s[0]="");if((e=e.split("."))[0]=s[0],i=r[1]&&r[r.length-1].length){for(g="",c=(l=e[0]).length%i,o=l.length,a=0;a<o;a++)g+=l.charAt(a),!((a-c+1)%i)&&a<o-i&&(g+=b);e[0]=g}return e[1]=t[1]&&e[1]?p+e[1]:"",h+((u="0"!==(f=e.join(""))&&""!==f?u:!1)?"-":"")+f+d}});