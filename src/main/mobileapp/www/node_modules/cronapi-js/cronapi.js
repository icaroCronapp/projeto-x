if (window.fixedTimeZone === undefined || window.fixedTimeZone === null) {
  window.fixedTimeZone = true;
}

if (window.timeZone === undefined || window.timeZone === null) {
  window.timeZone = "UTC";
}

if (window.timeZoneOffset === undefined || window.timeZoneOffset === null) {
  window.timeZoneOffset = 0;
}

window.systemTimeZoneOffset = window.timeZoneOffset;

if (!window.fixedTimeZone) {
  window.timeZoneOffset = moment().utcOffset();
}

function cronapi() {
  'use strict';

  this.$evt = function(str) {
    var self = this;
    if (!self.$eval) {
      var target;
      if (event) target = event.target;
      else target = self.$element[0];
      self = angular.element(target).scope();
    }
    if (!self) {
      self = angular.element(document.getElementById('main-view')).scope();
    }

    self.$eval(str);
  }.bind(this);

  this.cronapi = {};

  this.cronapi.getRequestData = data => {
    let result = data || {};
    if (data.data && typeof data.data === 'object') {
      result = data.data;
    }
    return result;
  };

  this.cronapi.toDate = function(value) {
    return new Date(value);
  }

  var getDatasource = function(ds) {
    if (typeof ds == 'string') {
      return window[ds];
    } else {
      return ds;
    }
  }

  this.cronapi.doEval = function(arg) {
    return arg;
  }

  var reorderArgs = function(argsValues, argsMetadata, argsNames) {
    if (argsMetadata && argsMetadata.length && argsNames && argsNames.length) {
      let args = [];
      for (var i = 0;i <argsMetadata.length;i++) {
        args.push(null);
      }
      for (let i = 0; i<argsMetadata.length; i++) {
        for (let j = 0; j<argsNames.length; j++) {
          if (typeof argsMetadata[i] === 'string') {
            if (argsMetadata[i] == argsNames[j]) {
              args[i] = argsValues[j];
              break;
            }
          } else {
            if (argsMetadata[i].description == argsNames[j] || argsMetadata[i].id == argsNames[j] ) {
              args[i] = argsValues[j];
              break;
            }
          }

        }
      }

      return args;
    }

    return argsValues;
  }

  this.cronapi.evalInContext = async function(js) {
    var result = eval('this.cronapi.doEval('+js+')');
    if (result) {
      result = result.data || result;
      if (result.commands) {
        for (var i = 0; i < result.commands.length; i++) {
          var func = eval(result.commands[i].function);
          let argsMetadata;
          let argsNames = result.commands[i].names;
          let args = result.commands[i].params;
          try {
            argsMetadata = eval(result.commands[i].function+'Args');
          } catch(e) {
            //
          }

          args = reorderArgs(args, argsMetadata, argsNames);

          await func.apply(this, args);
        }
      }
      return result.value;
    }
  }

  let clientMap = {};
  let clientMapTimeout = {};

  this.cronapi.client = function(pack) {
    let attr = false;
    let argsNames;
    let notificationOnError = true;
    return {
      attr: function() {
        attr = true;
        return this;
      },
      disableNotification: function () {
        notificationOnError = false;
        return this;
      },
      names: function(names) {
        argsNames = [];
        for (let i = 0; i < arguments.length; i++) {
          argsNames.push(arguments[i]);
        }
        return this;
      },
      run: function() {
        var key = pack;
        var args = [];
        for (var i = 0;i <arguments.length;i++) {
          key += String(arguments[i]);
          args.push(arguments[i]);
        }

        var bk;
        var argsMetadata;
        try {
          bk = eval('blockly.'+pack);
        } catch(e) {
          //
        }
        try {
          argsMetadata = eval('blockly.'+pack+'Args');
        } catch(e) {
          //
        }

        if (!argsMetadata) {
          try {
            argsMetadata = eval(pack+'Args');
          } catch(e) {
            //
          }
        }

        if (!bk) {
          bk = eval(pack);
        }

        args = reorderArgs(args, argsMetadata, argsNames);

        let isAsyncResult = (result) => (result !== undefined && result !== null && result.then && typeof result.then === 'function');

        let result = undefined;
        if (attr) {
          if (clientMapTimeout[key]) {
            clearTimeout(clientMapTimeout[key]);
          }
          else {
            result = bk.apply(this, args);
            if (!isAsyncResult(result)) {
              clientMap[key] = result;
            }
          }

          clientMapTimeout[key] = setTimeout(() => {
            result = result || bk.apply(this, args);
            if (isAsyncResult(result)) {
              result.then(value => {
                if (clientMap[key] !== value) {
                  this.safeApply(() => {
                    clientMap[key] = value;
                  });
                }
              }).catch((error) => {
                if (clientMap[key] !== error) {
                  this.safeApply(() => {
                    clientMap[key] = error;
                  });
                }
              });

            } else {
              clientMap[key] = result;
            }
            return clientMap[key];
          }, 300);

          if (clientMap[key]) {
            return clientMap[key];
          }
        } else {
          let isAsync = bk.constructor.name === "AsyncFunction";
          if (isAsync) {
            return bk.apply(this, args).catch((error) => {
              if (notificationOnError) {
                this.cronapi.$scope.Notification.error(error);
              } else {
                throw error;
              }
            });
          } else {
            return bk.apply(this, args);
          }
        }
      }.bind(this)
    }
  };

  var serverMap = {};

  this.cronapi.server = function(pack) {
    var attr = false;
    var toPromise = false;
    var async = true;
    var notificationOnError = true;
    let argsNames;
    return {
      attr: function() {
        attr = true;
        return this;
      },
      toPromise: function() {
        toPromise = true;
        return this;
      },
      notAsync: function() {
        async = false;
        return this;
      },
      names: function() {
        argsNames = [];
        for (let i = 0; i < arguments.length; i++) {
          argsNames.push(arguments[i]);
        }
        return this;
      },
      disableNotification: function() {
        notificationOnError = false;
        return this;
      },
      run: function() {
        var key = pack;

        for (var i = 0;i <arguments.length;i++) {
          key += String(arguments[i]);
        }

        if (attr) {
          if (serverMap.hasOwnProperty(key)) {
            if (serverMap[key] != "$$loading") {
              return serverMap[key];
            } else {
              return "";
            }
          }
          serverMap[key] = "$$loading";
        }

        var parts = pack.split(".");
        var func = parts[parts.length-1];
        parts.pop();
        var namespace = parts.join(".");

        var blocklyName = namespace + ":" + func;

        var resolveForPromise;
        var rejectForPromise;
        var promise = new Promise((resolve, reject) => {
          resolveForPromise = resolve;
          rejectForPromise = reject;
        });

        var success = function(data) {
          this.safeApply(function() {
            if (attr) {
              serverMap[key] = data;
            }
            resolveForPromise(data);
          });
        }.bind(this);

        var error = function(error) {
          this.safeApply(function() {
            if (attr) {
              serverMap[key] = error;
            }
            rejectForPromise(error);
          });
          if (error && notificationOnError)
            this.cronapi.$scope.Notification.error(error);
        }.bind(this);

        var args = [blocklyName];

        if (async) {
          args.push(success);
          args.push(error);
          if (argsNames && argsNames.length) {
            args.push({
              argsNames: argsNames
            });
          }
          for (var i = 0;i <arguments.length;i++) {
            args.push(arguments[i]);
          }

          this.cronapi.util.makeCallServerBlocklyAsync.apply(this, args);
          if (toPromise)
            return promise;
        }
        else {
          if (argsNames && argsNames.length) {
            args.push({
              argsNames: argsNames
            });
          }
          for (var i = 0;i <arguments.length;i++) {
            args.push(arguments[i]);
          }

          let resultData = this.cronapi.util.callServerBlockly.apply(this, args);
          if (attr) {
            serverMap[key] = resultData;
          }
          return resultData;
        }

      }.bind(this)
    }
  };

  this.cronapi.callFunction = function(name) {
    return {
      call: function() {
        var ref;
        try {
          ref = eval(name);
        } catch(e) {
          //
        }

        if (ref) {
          return ref.apply(this, arguments)
        }

        return undefined;
      }.bind(this)
    }
  };


  /**
   * @category CategoryType.CONVERSION
   * @categoryTags ConversÃ£o|Convert
   */
  this.cronapi.conversion = {};

  /**
   * @type function
   * @name {{textToTextBinary}}
   * @nameTags asciiToBinary
   * @description {{functionToConvertTextInTextBinary}}
   * @param {ObjectType.STRING} astring {{contentInAscii}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.conversion.asciiToBinary = function(astring) {
    var binary = "";
    if (astring.length > 0) {
      for (var i = 0; i < astring.length; i++) {
        var value = astring.charCodeAt(i);
        for (var j = 7; j >= 0; j--) {
          binary += ((value >> j) & 1);
        }
      }
    }
    return binary;
  };

  /**
   * @type function
   * @name {{toLogic}}
   * @nameTags toBoolean
   * @description {{functionConvertToLogic}}
   * @param {ObjectType.STRING} value {{content}}
   * @returns {ObjectType.BOOLEAN}
   */
  this.cronapi.conversion.toBoolean = function(value) {
    return this.cronapi.internal.parseBoolean(value);
  };

  /**
   * @type function
   * @name {{convertToBytes}}
   * @nameTags toBytes
   * @description {{functionToConvertTextBinaryToText}}
   * @param {ObjectType.OBJECT} obj {{contentInTextBinary}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.conversion.toBytes = function(obj) {
    return obj ? obj.toString() : "";
  };

  /**
   * @type function
   * @name {{convertToAscii}}
   * @nameTags chrToAscii|convertToAscii
   * @description {{functionToConvertToAscii}}
   * @param {ObjectType.STRING} value {{content}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.conversion.chrToAscii = function(value) {
    if (!value) {
      return null;
    } else {
      return (value.charCodeAt(0));
    }
  };

  /**
   * @type function
   * @name {{convertStringToJs}}
   * @nameTags stringToJs
   * @description {{functionToConvertStringToJs}}
   * @param {ObjectType.STRING} value {{content}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.conversion.stringToJs = function(value) {
    return this.cronapi.internal.stringToJs(value);
  };

  /**
   * @type function
   * @name {{convertStringToDate}}
   * @nameTags stringToDate
   * @description {{functionToConvertStringToDate}}
   * @param {ObjectType.STRING} value {{content}}
   * @returns {ObjectType.DATETIME}
   */
  this.cronapi.conversion.stringToDate = function(value) {
    var pattern = /^\s*(\d+)[\/\.-](\d+)[\/\.-](\d+)(\s(\d+):(\d+):(\d+))?\s*$/;
    if (value) {
      if (value instanceof Date)
        return value;
      else if (pattern.test(value)) {
        var splited = pattern.exec(value);
        var userLang = (navigator.language || navigator.userLanguage)
        .split("-")[0];

        if (userLang == "pt" || userLang == "en") {
          var functionToCall = eval("cronapi.internal." + userLang + "Date");
          return functionToCall(splited);
        } else
          return new Date(value);
      } else
        return new Date(value);
    }
    return null;
  };

  /**
   * @type function
   * @name {{convertStringToDate}}
   * @nameTags stringToDate
   * @description {{functionToConvertStringToDate}}
   * @param {ObjectType.STRING} value {{content}}
   * @param {ObjectType.STRING} format {{format}}
   * @returns {ObjectType.DATETIME}
   */
  this.cronapi.conversion.stringToDateWithFormat = function(value, format) {
    let result = moment(value, format);
    if (result.isValid())
      return result.toDate();
    return null;
  };

  /**
   * @type function
   * @name {{convertIntToHex}}
   * @nameTags intToHex
   * @description {{functionToConvertIntToHex}}
   * @param {ObjectType.STRING} value {{content}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.conversion.intToHex = function(value) {
    return Number(value).toString(16).toUpperCase();
  };

  /**
   * @type function
   * @name {{convertToLong}}
   * @nameTags toLong
   * @description {{functionToConvertToLong}}
   * @param {ObjectType.OBJECT} value {{content}}
   * @returns {ObjectType.LONG}
   */
  this.cronapi.conversion.toLong = function(value) {
    return parseInt(value);
  };

  /**
   * @type function
   * @name {{convertToString}}
   * @nameTags toString
   * @description {{functionToConvertToString}}
   * @param {ObjectType.OBJECT} value {{content}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.conversion.toString = function(value) {
    if (value){
      var result = new String(value);
      return result.toString();
    }
    return "";
  };

  /**
   * @category CategoryType.UTIL
   * @categoryTags Util
   */
  this.cronapi.util = {};

  /**
   * @type function
   * @name {{fillDatasource}}
   * @nameTags fillDatasource|Preencher|datasource|fonte de dados|cache
   * @description {{fillDatasourceDescription}}
   * @param {ObjectType.STRING} id {{datasourceId}}
   * @param {ObjectType.STRING} filterUrl {{filterUrl}}
   * @param {ObjectType.LIST} params {{arrayParams}}
   * @platform M
   * @wizard procedure_fill_datasource
   * @multilayer true
   */
  this.cronapi.util.fillDatasource = async function(id, filterUrl, params, paramsNames) {

    const odataUrl = `${window.hostApp}api/cronapi/odata/v2/`;
    const db = this.cronapi.internal.getPouchDB(id);
    let totalReceived = 0;
    let defaultPagination = 100;

    if (paramsNames && typeof paramsNames === 'object') {
      let jsonParam = [];
      for (let i = 0; i< paramsNames.length; i++) {
        let json = {};
        json[paramsNames[i]] = params[i];
        jsonParam.push(json);
      }
      params = jsonParam;
    }
    let convertToODataDate = (date) => {
      let year = date.getFullYear();
      let month = String(date.getMonth() + 1).padStart(2, '0');
      let day = String(date.getDate()).padStart(2, '0');
      let hours = String(date.getHours()).padStart(2, '0');
      let minutes = String(date.getMinutes()).padStart(2, '0');
      let seconds = String(date.getSeconds()).padStart(2, '0');
      let odataDate = `'${year}-${month}-${day}T${hours}:${minutes}:${seconds}'`;
      return odataDate;
    }

    let evalForODATA  = async (value) => {
      let result = '';
      try {
        result = await eval(value.replace('await ', ''));
      }
      catch (e) {
        result = value;
      }

      (typeof result === 'string') && (result = `'${result}'`);
      (typeof result === 'object' && result.getFullYear) && (result = convertToODataDate(result));
      return result;
    };

    let getFilter = (value) => {
      let filter = '';
      let result = value.match(/(\$filter=)(.*)/);
      (result && result.length > 2) && (filter = result[2]);
      return filter;
    };

    let getUrl = (value) => {
      let url = '';
      let result = value.match(/^(GET|POST|DELETE|PUT)\s(.*?)($|\?)/);
      (result && result.length > 2) && (url = `${odataUrl}${result[2]}`);
      return url;
    };

    if (params) {
      for (let i = 0; i < params.length; i++) {
        let e = params[i];
        for (let key in e) {
          e[key] = await evalForODATA(e[key]);
        }
      }
      params.forEach(e => {
        for (let key in e) {
          filterUrl = filterUrl.replace(`:${key}`, e[key]);
        }
      });
    }

    let config = {
      method: "GET",
      params: {$inlinecount: 'allpages', $format: 'json', $top: `${defaultPagination}`, $skip: 0},
      url: getUrl(filterUrl)
    };
    let filter = getFilter(filterUrl);
    filter && (config.params.$filter = filter);

    let makeRequest = async (config, success, error) => {
      let http = this.$http(config);
      http.then(r => success(r));
      http.catch(r => error(r));
    };

    let success = (response) => {
      let effectiveData = response.data.d;
      let totalCurr = effectiveData.results.length;
      totalReceived += totalCurr;
      if (totalReceived < effectiveData.__count) {
        config.params.$skip += defaultPagination;
        makeRequest(config, success, error);
      }
      this.cronapi.internal.updatePouchDB(db, effectiveData.results);
      console.log(`Caching Data (%c${id}%c): %c${totalReceived} of ${effectiveData.__count}`, 'color: red', 'color: black', 'color: red');
    };
    let error = (response) => {
      console.error(`error caching datasource ${db.name}`, response);
    };

    makeRequest(config, success, error);
  };

  /**
 * @type function
 * @name {{changeViewMain}}
 * @nameTags route main
 * @description {{changeViewMainDescription}}
 * @multilayer true
 */
   this.cronapi.util.changeViewMain = function() {
    var route = undefined;
    if (window.cordova) route = this.cronapi.util.getMobileMainRoute()
    else route = this.cronapi.util.getWebMainRoute()
    this.cronapi.screen.changeView(route)
  }

  /**
   * @type function
   * @name {{getWebMainRoute}}
   * @nameTags route main
   * @description {{webMainRouteDescription}}
   * @returns {ObjectType.STRING}
   * @platform W
   */
   this.cronapi.util.getWebMainRoute = function() {
    var mainroute = 'views/login.view.html';
    var res = $.get({ url : 'cronapp.json', async : false })
    if (res && res.responseJSON) {
      var cronapp = res.responseJSON;
      var route = cronapp['cronapp.framework.web.mainroute'];
      if (route) mainroute = route;
    }
    return this.cronapi.internal.viewToRoute(mainroute);
  };

  /**
   * @type function
   * @name {{getMobileMainRoute}}
   * @nameTags route main
   * @description {{mobileMainRouteDescription}}
   * @returns {ObjectType.STRING}
   * @platform M
   */
   this.cronapi.util.getMobileMainRoute = function() {
    var mainroute = 'views/login.view.html';
    var res = $.get({ url : 'cronapp.json', async : false })
    if (res && res.responseJSON) {
      var cronapp = res.responseJSON;
      var route = cronapp['cronapp.framework.mobile.mainroute'];
      if (route) mainroute = route;
    }
    return this.cronapi.internal.viewToRoute(mainroute, 'mobile');
  };

  /**
   * @type function
   * @name {{setRequestToken}}
   * @nameTags token
   * @description {{setRequestTokenDescription}}
   * @param {ObjectType.STRING} token {{setRequesTokenParam}}
   */
  this.cronapi.util.setToken = function(token) {
    let currentSession = {};
    if (localStorage.getItem("_u")) {
      currentSession = JSON.parse(localStorage.getItem("_u"));
      currentSession.token = token;
    }
    localStorage.setItem("_u", JSON.stringify(currentSession));
    window.uToken = token;
  };

  /**
   * @type function
   * @name {{getApplicationName}}
   * @nameTags getApplicationName
   * @description {{functionToGetApplicationName}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.util.getApplicationName = function() {
    return $('#projectName').length ? $('#projectName').val() : $('h1:first').length && $('h1:first').text().trim().length ? $('h1:first').text().trim() : '';
  };

  /**
   * @type function
   * @name {{createPromiseName}}
   * @nameTags createPromiseName
   * @description {{functioncreatePromise}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.util.createPromise = function () {
    var functionToResolve;
    var functionToReject;
    var promise = new Promise((resolve, reject) => {
      functionToResolve = resolve;
      functionToReject = reject;
    });
    promise.__functionToResolve = functionToResolve;
    promise.__functionToReject = functionToReject;
    return promise;
  }

  /**
   * @type function
   * @name {{handleValueToPromise}}
   * @nameTags handleValueToPromise
   * @description {{functionToHandleValueToPromise}}
   * @param {ObjectType.STRING} type {{type}}
   * @param {ObjectType.OBJECT} promise {{promise}}
   * @param {ObjectType.OBJECT} value {{value}}
   */
  this.cronapi.util.handleValueToPromise = function (/** @type {ObjectType.STRING} @description {{type}} @blockType util_dropdown @keys resolve|reject @values resolve|reject  */ type, promise, value) {
    if(type === 'resolve') {
      promise.__functionToResolve(value);
    }else{
      promise.__functionToReject(value);
    }
  }

  /**
   * @type function
   * @name {{monitorPromise}}
   * @nameTags monitorPromise
   * @description {{functionToMonitorPromise}}
   * @param {ObjectType.OBJECT} promise {{promise}}
   * @param {ObjectType.STATEMENTSENDER} callbackSuccess {{success}}
   * @param {ObjectType.STATEMENTSENDER} callbackError {{error}}
   */
  this.cronapi.util.monitorPromise = function (promise, callbackSuccess, callbackError) {
    if (promise) {
      if (callbackSuccess) {
        promise.then(callbackSuccess);
      }
      if (callbackError) {
        promise.catch(callbackError);
      }
    }
  }

  /**
   * @type function
   * @name {{sleep}}
   * @nameTags sleep, dormir, wait, interval
   * @description {{sleepDescription}}
   * @param {ObjectType.LONG} interval {{sleepInterval}}
   */
  this.cronapi.util.sleep = async function (interval) {
    var promise = new Promise((resolve) => {
      setInterval(() => {
        resolve(interval);
      }, interval)
    });
    return promise;
  }

  /**
   * @type internal
   * @name {{callServerBlocklyAsync}}
   * @nameTags callServerBlocklyAsync
   * @description {{functionToCallServerBlocklyAsync}}
   * @param {ObjectType.STRING} classNameWithMethod {{classNameWithMethod}}
   * @param {ObjectType.OBJECT} callbackSuccess {{callbackSuccess}}
   * @param {ObjectType.OBJECT} callbackError {{callbackError}}
   * @param {ObjectType.OBJECT} params {{params}}
   * @arbitraryParams true
   */
  this.cronapi.util.callServerBlocklyAsync = function(classNameWithMethod, fields, callbackSuccess, callbackError) {

    const getCircularReplacer = () => {
      const seen = new WeakSet();
      return (key, value) => {
        if (typeof value === "object" && value !== null) {
          if (seen.has(value)) {
            return;
          }
          seen.add(value);
        }
        return value;
      };
    };

    var serverUrl = 'api/cronapi/call/body/#classNameWithMethod#/'.replace('#classNameWithMethod#', classNameWithMethod);
    var http = this.cronapi.$scope.http;
    var params = [];
    var names;
    $(arguments).each(function() {
      if (this && Array.isArray(this.argsNames)) {
        names = this.argsNames;
      } else {
        params.push(this);
      }
    });

    var token = "";
    if (window.uToken)
      token = window.uToken;

    var dataCall = {
      "fields": fields,
      "inputs": params.slice(4)
    };

    if (names) {
      dataCall.names = names;
    }

    var finalUrl = this.cronapi.internal.getAddressWithHostApp(serverUrl);
    let contentData = undefined;
    try {
      contentData = JSON.stringify(dataCall);
    }
    catch (e) {
      contentData = JSON.stringify(dataCall, getCircularReplacer());
    }

    var resultData = $.ajax({
      type: 'POST',
      url: finalUrl,
      dataType: 'html',
      data : contentData,
      headers : {
        'Content-Type' : 'application/json',
        'X-AUTH-TOKEN' : token,
        'toJS' : true,
        'timezone': moment().utcOffset()
      },
      success : callbackSuccess,
      error : callbackError
    });

  };
  /**
   * @type internal
   */
  this.cronapi.util.getScreenFields = function() {
    var fields = {};

    for (var key in this.cronapi.$scope) {
      if (this.cronapi.$scope[key] && this.cronapi.$scope[key].constructor && this.cronapi.$scope[key].constructor.name=="DataSet") {
        fields[key] = {};
        fields[key].active = this.cronapi.$scope[key].active;
      }
    }

    var scope = this.cronapi.$scope;
    var recursiveLookup = function(scope) {
      var fieldValue;
      try {
        fieldValue = eval(scope.vars);
      }
      catch (e) {
      }
      if(fieldValue && Object.keys(fieldValue).length !== 0) {
        var keys = Object.keys(fieldValue);
        keys.forEach(function(key){
          if (fieldValue[key] !== undefined && fieldValue[key] !== null) {
            if (!fields.vars) {
              fields.vars = {};
            }
            fields.vars[key] = fieldValue[key];
          }
        });
      }
      else if(scope && scope.$parent ) {
        return recursiveLookup(scope.$parent);
      }
      return;
    };
    recursiveLookup(scope);

    for (var key in this.cronapi.$scope.params) {
      if (this.cronapi.$scope.params[key]) {
        if (!fields.params) {
          fields.params = {};
        }
        fields.params[key] = this.cronapi.$scope.params[key];
      }
    }

    return fields;
  }

  /**
   * @type internal
   * @name {{makeCallServerBlocklyAsync}}
   * @nameTags makeCallServerBlocklyAsync
   * @description {{functionToMakeCallServerBlocklyAsync}}
   * @param {ObjectType.STRING} blocklyWithFunction {{blocklyWithFunction}}
   * @param {ObjectType.STRING} callbackBlocklySuccess {{callbackBlocklySuccess}}
   * @param {ObjectType.STRING} callbackBlocklyError {{callbackBlocklyError}}
   * @param {ObjectType.OBJECT} params {{params}}
   * @arbitraryParams   if (window.event.target && window.event.target) {
      window.cronapi.$scope = angular.element(window.event.target).scope();
    }true
   */
  this.cronapi.util.makeCallServerBlocklyAsync = function(blocklyWithFunction, callbackSuccess, callbackError) {
    var fields = this.cronapi.util.getScreenFields();

    var paramsApply = [];
    paramsApply.push(blocklyWithFunction);
    paramsApply.push(fields);
    paramsApply.push(function(data) {
      this.cronapi.evalInContext(data).then((result) => {
        if (typeof callbackSuccess == "string") {
          eval(callbackSuccess)(result);
        } else if (callbackSuccess) {
          callbackSuccess(result);
        }
      });
    }.bind(this));
    paramsApply.push(function(data, status, errorThrown) {
      var message = this.cronapi.internal.getErrorMessage(data.responseText, errorThrown);
      if (typeof callbackError == "string") {
        eval(callbackError)(message);
      }
      else if (callbackError) {
        callbackError(message);
      }
      else {
        this.cronapi.$scope.Notification.error(message);
      }
    }.bind(this));
    $(arguments).each(function(idx) {
      if (idx >= 3)
        paramsApply.push(this);
    });
    this.cronapi.util.callServerBlocklyAsync.apply(this, paramsApply);
  };

  /**
   * @type function
   * @name {{callServerBlockly}}
   * @nameTags callServerBlockly
   * @description {{functionToCallServerBlockly}}
   * @param {ObjectType.STRING} classNameWithMethod {{classNameWithMethod}}
   * @param {ObjectType.OBJECT} params {{params}}
   * @arbitraryParams true
   * @wizard procedures_callblockly_callnoreturn
   */
  this.cronapi.util.callServerBlocklyNoReturn = async function() {
    return this.cronapi.util.callServerBlockly.apply(this, arguments);
  };

  /**
   * @type function
   * @name {{throwExceptionName}}
   * @nameTags throwException
   * @description {{throwExceptionDescription}}
   * @param {ObjectType.OBJECT} value {{throwExceptionParam0}}
   */
  this.cronapi.util.throwException = function(value) {
    throw value;
  };



  /**
   * @type function
   * @name {{createExceptionName}}
   * @nameTags createException
   * @description {{createExceptionDescription}}
   * @param {ObjectType.STRING} value {{createExceptionParam0}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.util.createException = function(value) {
    return value;
  };

  /**
   * @type function
   * @name {{language}}
   * @nameTags language, i18n, idioma, linguagem, locale
   * @description {{languageDescription}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.util.language = function() {
    var locale = (window.navigator.userLanguage || window.navigator.language || 'pt_br').replace('-', '_');
    return locale;
  };

  /**
   * @type function
   * @name {{share}}
   * @nameTags share, compartilhar, enviar, abrir como
   * @description {{shareDescription}}
   * @param {ObjectType.STRING} title {{shareParam0}}
   * @param {ObjectType.STRING} text {{shareParam1}}
   * @param {ObjectType.STRING} url {{shareParam2}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.util.share = function(title, text, url) {
    const promise = new Promise((resolve, reject) => {
      navigator.share({
        title: title,
        text: text,
        url: url
      }).then(() => {
        resolve('Successful share');
        console.log('Successful share');
      }).catch(error => {
        reject(error);
        console.log('Error sharing:', error);
      });
    });

    return promise;
  };

  /**
   * @type function
   * @name {{callServerBlockly}}
   * @nameTags callServerBlockly
   * @description {{functionToCallServerBlockly}}
   * @param {ObjectType.STRING} classNameWithMethod {{classNameWithMethod}}
   * @param {ObjectType.OBJECT} params {{params}}
   * @arbitraryParams true
   * @wizard procedures_callblockly_callreturn
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.util.callServerBlockly = async function(classNameWithMethod) {
    let params = []
    params.push(classNameWithMethod);
    params.push(null); // This argument will be used as the resolve method callback
    params.push(null); // This argument will be used as the reject method callback
    let idx = 1; // idx should be 1 to ignore the declared argument 'classNameWithMethod'
    for(idx; idx < arguments.length ; idx ++){
      params.push(arguments[idx]);
    }

    return  new Promise(((resolve, reject) => {
      params[1] = ((data) => {
        resolve(data);
      }).bind(this);
      params[2] = ((error) => {
        reject(error);
      }).bind(this);
      this.cronapi.util.makeCallServerBlocklyAsync.apply(this, params);
    }).bind(this));
  };

    /**
     * @type function
     * @name {{callServerBlocklyAsync}}
     * @nameTags callServerBlocklyAsync
     * @description {{callServerBlocklyAsync}}
     * @param {ObjectType.STRING} classNameWithMethod {{classNameWithMethod}}
     * @param {ObjectType.OBJECT} callback {{callbackFinish}}
     * @param {ObjectType.LIST} params {{params}}
     * @wizard procedures_callblockly_callreturn_async
     * @returns {ObjectType.OBJECT}
     */
  this.cronapi.util.callServerBlocklyAsynchronous = function(classNameWithMethod , callback , params) {
    if(classNameWithMethod != '' && typeof callback == 'function'){
      var params = [];
      params.push(classNameWithMethod);
      params.push(callback);
      params.push(callback);
      var idx = 2;
      for(idx; idx < arguments.length ; idx ++){
        params.push(arguments[idx]);
      };
      this.cronapi.util.makeCallServerBlocklyAsync.apply(this,params);
    }
  };

  /**
   * @type function
   * @name {{executeJavascriptNoReturnName}}
   * @nameTags executeJavascriptNoReturn
   * @description {{executeJavascriptNoReturnDescription}}
   * @param {ObjectType.STRING} value {{executeJavascriptNoReturnParam0}}
   * @multilayer true
   */
  this.cronapi.util.executeJavascriptNoReturn = function(value) {
    eval( value );
  };

  /**
   * @type function
   * @name {{downloadFileName}}
   * @nameTags downloadFile
   * @description {{downloadFileDescription}}
   * @param {ObjectType.STRING} url {{downloadFileParam0}}
   * @multilayer true
   */
  this.cronapi.util.downloadFile = function(url) {

    var finalUrl = this.cronapi.internal.getAddressWithHostApp(url);
    this.cronapi.screen.openUrl(finalUrl, '_blank' ,0,0 );
  };

  /**
   * @type function
   * @name {{executeJavascriptNoReturnName}}
   * @nameTags executeJavascriptNoReturn
   * @description {{executeJavascriptNoReturnDescription}}
   * @param {ObjectType.STRING} value {{executeJavascriptNoReturnParam0}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.util.executeJavascriptNoReturn = function(value) {
    eval( value );
  };

  /**
   * @type function
   * @name {{executeJavascriptNoReturnName}}
   * @nameTags executeJavascriptReturn
   * @description {{executeJavascriptReturnDescription}}
   * @param {ObjectType.STRING} value {{executeJavascriptNoReturnParam0}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.util.executeJavascriptReturn = function(value) {
    return eval( value );
  };

  /**
   * @type function
   * @name {{openReport}}
   * @nameTags openReport|abrirrelatorio
   * @description {{openReportDescription}}
   * @param {ObjectType.STRING} value {{report}}
   * @multilayer true
   * @returns {ObjectType.VOID}
   * @wizard procedures_openreport_callnoreturn
   */
  this.cronapi.util.openReport = function(/** @type {ObjectType.STRING} @blockType util_report_list */ name) {
    this.cronapi.$scope.getReport(name);
  };

  /**
   * @type function
   * @name obter IP
   * @nameTags getIP|Obter IP
   * @description ObtÃ©m o IP pÃºblico da conexÃ£o
   * @returns {ObjectType.STRING}
   */
  this.cronapi.util.getIP = function() {
    return $.get({url: "https://api.ipify.org/", async: false}).responseText;
  };

  /**
   * @type function
   * @name {{openDashboard}}
   * @nameTags openDashboard|abrirdashboard
   * @description {{openDashboardDescription}}
   * @param {ObjectType.STRING} value {{dashboard}}
   * @multilayer true
   * @returns {ObjectType.VOID}
   * @wizard procedures_opendashboard_callnoreturn
   */
   this.cronapi.util.openDashboard = function(/** @type {ObjectType.STRING} @blockType util_dashboard_list */ name) {
    this.cronapi.$scope.getReport(name);
  };

  /**
   * @type internal
   */
  this.cronapi.util.handleCallback = function(ref) {
    if (ref) {
      let isAsync = ref.constructor.name === "AsyncFunction";
      if (isAsync) {
        return function() {
          (async ()=> await ref.apply(this, arguments))()
        }.bind(this);
      } else {
        return ref.bind(this);
      }
    }
  }

  /**
   * @type function
   * @name {{getURLFromOthersName}}
   * @description {{getURLFromOthersDescription}}
   * @nameTags URL|API|Content|Download|Address|Endereco|Conteudo
   * @param {ObjectType.STRING} method {{HTTPMethod}}
   * @param {ObjectType.STRING} contentType {{contentType}}
   * @param {ObjectType.STRING} url {{URLAddress}}
   * @param {ObjectType.STRING} params {{paramsHTTP}}
   * @param {ObjectType.STRING} headers {{headers}}
   * @param {ObjectType.STRING} success {{success}}
   * @param {ObjectType.STRING} error {{error}}
   */
  this.cronapi.util.getURLFromOthers = function(/** @type {ObjectType.STRING} @description {{HTTPMethod}} @blockType util_dropdown @keys GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS|TRACE @values GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS|TRACE  */  method , /** @type {ObjectType.STRING} @description {{HTTPMethod}} @blockType util_dropdown @keys application/x-www-form-urlencoded|application/json @values application/x-www-form-urlencoded|application/json  */  contentType , /** @type {ObjectType.STRING} @description {{URLAddress}} */ url, /** @type {ObjectType.OBJECT} @description {{paramsHTTP}} */ params, /** @type {ObjectType.OBJECT} @description {{headers}} */ headers, /** @type {ObjectType.STATEMENTSENDER} @description {{success}} */ success, /** @type {ObjectType.STATEMENTSENDER} @description {{error}} */  error ) {

    if (params && contentType === "application/x-www-form-urlencoded") {
      for (var key in params) {
        if (params[key] instanceof Array) {
          var arrayContent = params[key].toString();
          params[key] = `[${arrayContent}]`;
        }
      }
    }
    else if (params && contentType === "application/json") {
      params = JSON.stringify(params);
    }

    var header = Object.create(headers);
    header["Content-Type"] = contentType;
    // Angular has a .run that inject X-AUTH-TOKEN, so we use JQuery
    $.ajax({
      method : method,
      url : url,
      data: params,
      headers: header
    }).done(this.cronapi.util.handleCallback(success).bind(this)).fail(this.cronapi.util.handleCallback(error.bind(this)));

  };


  /**
   * @type function
   * @name {{getUserToken}}
   * @nameTags token | auth | autenticaÃ§Ã o | armazenamento
   * @description {{getUserTokenDesc}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.util.getUserToken = function() {
    return JSON.parse(window.localStorage.getItem('_u')).token;
  };

  /**
   * @type function
   * @name {{getUser}}
   * @nameTags user | auth | autenticaÃ§Ã o | armazenamento | getuser
   * @description {{getUserDesc}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.util.getUser = function() {
    return JSON.parse(window.localStorage.getItem('_u')).user.username;
  };

  /**
   * @type function
   * @name {{getUserName}}
   * @nameTags username | auth | autenticaÃ§Ã o | armazenamento | getusername
   * @description {{getUserNameDesc}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.util.getUserName = function() {
    return JSON.parse(window.localStorage.getItem('_u')).user.name;
  };

  /**
   * @type function
   * @name {{setSessionStorage}}
   * @nameTags storage | session | sessÃ£o | armazenamento
   * @description {{setSessionStorageDesc}}
   * @param {ObjectType.STRING} key {{key}}
   * @param {ObjectType.STRING} value {{value}}
   */
  this.cronapi.util.setSessionStorage = function(key, value) {
    window.sessionStorage.setItem(key, value);
  };

  /**
   * @type function
   * @name {{getSessionStorage}}
   * @nameTags storage | session | sessÃ£o | armazenamento
   * @description {{getSessionStorageDesc}}
   * @param {ObjectType.STRING} key {{key}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.util.getSessionStorage = function(key) {
    return window.sessionStorage.getItem(key);
  };

  /**
   * @type function
   * @name {{setLocalStorage}}
   * @nameTags storage | session | sessÃ£o | armazenamento
   * @description {{setLocalStorageDesc}}
   * @param {ObjectType.STRING} key {{key}}
   * @param {ObjectType.STRING} value {{value}}
   */
  this.cronapi.util.setLocalStorage = function(key, value) {
    window.localStorage.setItem(key, value);
  };

  /**
   * @type function
   * @name {{getLocalStorage}}
   * @nameTags storage | session | sessÃ£o | armazenamento
   * @description {{getLocalStorageDesc}}
   * @param {ObjectType.STRING} key {{key}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.util.getLocalStorage = function(key) {
    return window.localStorage.getItem(key);
  };


  /**
   * @type function
   * @name {{executeAsynchronousName}}
   * @nameTags Executar|AssÃ­ncrono|Execute| Asynchronous
   * @description {{executeAsynchronousDescription}}
   * @param {ObjectType.STATEMENT} statement {{statement}}
   *
   */
  this.cronapi.util.executeAsynchronous = function( /** @type {ObjectType.STATEMENT} @description {{statement}} */ statement) {
    setTimeout(statement , 0 );
  };

  /**
   * @type function
   * @name {{scheduleExecutionName}}
   * @nameTags Executar|Agenda|Agendar|Agendamento|ExecuÃ§Ã£o|Execute|Execution|Schedule|Scheduled
   * @description {{scheduleExecutionDescription}}
   * @param {ObjectType.STATEMENT} statement {{statement}}
   * @param {ObjectType.LONG} initial_time {{scheduleExecutionParam1}}
   * @param {ObjectType.LONG} interval_time {{scheduleExecutionParam2}}
   * @param {ObjectType.STRING} measurement_unit {{scheduleExecutionParam3}}
   * @param {ObjectType.BOOLEAN} stopExecutionAfterScopeDestroy {{stopExecutionAfterScopeDestroyLabel}}
   */
  this.cronapi.util.scheduleExecution = function( /** @type {ObjectType.STATEMENT} @description {{statement}} */ statements ,  /** @type {ObjectType.LONG} */  initial_time ,  /** @type {ObjectType.LONG} */  interval_time , /** @type {ObjectType.STRING} @description {{scheduleExecutionParam3}} @blockType util_dropdown @keys seconds|milliseconds|minutes|hours @values {{seconds}}|{{millisecondss}}|{{minutes}}|{{hours}}  */ measurement_unit, /** @type {ObjectType.BOOLEAN} @description {{stopExecutionAfterScopeDestroyLabel}} @blockType util_dropdown @keys true|false @values {{true}}|{{false}}  */  stopExecutionAfterScopeDestroy ) {

    stopExecutionAfterScopeDestroy = stopExecutionAfterScopeDestroy || true;
    stopExecutionAfterScopeDestroy = (stopExecutionAfterScopeDestroy === 'true' || stopExecutionAfterScopeDestroy === true);

    var factor = 1;

    if (measurement_unit === 'seconds') {
      factor = 1000;
    } else if(measurement_unit ==='minutes') {
      factor = 60000;
    } else if(measurement_unit ==='hours') {
      factor = 3600000;
    }

    initial_time = initial_time * factor;
    interval_time = interval_time * factor;

    var intervalId = -1;

    var timeoutId = setTimeout(function() {
      statements();
      intervalId = setInterval(statements , interval_time) ;
    }.bind(this), initial_time);

    if(stopExecutionAfterScopeDestroy){
      this.$on('$destroy', function() {
        try { clearTimeout(timeoutId); } catch(e) {}
        try { clearInterval(intervalId); } catch(e) {}
      });
    }

  };

  /**
   * @type internal
   */
  this.cronapi.util.openReport = function(name, params, config) {
    this.cronapi.$scope.getReport(name, params, config);
  };

  /**
   * @type internal
   */
   this.cronapi.util.openDashboard = function(name, params, config) {
    this.cronapi.$scope.getReport(name, params, config);
  };

  /**
   * @type function
   * @name {{getCEPName}}
   * @description {{getCEPDescription}}
   * @param {ObjectType.STRING} cep {{CEP}}
   * @param {ObjectType.STRING} success {{success}}
   */
  this.cronapi.util.getCEP = function(/** @type {ObjectType.STRING} @description {{CEP}} */ cep, /** @type {ObjectType.STATEMENTSENDER} @description {{success}} */ success) {

    if(this.cronapi.logic.isNullOrEmpty(cep)) throw new Error("Informe o CEP");

    cep = cep.replace(/\.|\-/g, '').split(' ').join('');

    if(cep.length < 8) throw new Error("CEP invÃ¡lido");

    let url = "https://viacep.com.br/ws/" + cep + "/json/?callback=?";

    $.getJSON(url, this.cronapi.util.handleCallback( success.bind(this) ));

  };

  /**
   * @category CategoryType.SCREEN
   * @categoryTags Screen|Tela
   */
  this.cronapi.screen = {};

  /**
   * @type function
   * @name {{isInsertingMode}}
   * @nameTags isInsertingMode
   * @description {{functionToIsInsertingMode}}
   * @param {ObjectType.OBJECT} datasource {{datasource}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.screen.isInsertingMode = function(datasource) {
    return getDatasource(datasource).inserting;
  };

  /**
   * @type function
   * @name {{isEditingMode}}
   * @nameTags isEditingMode
   * @description {{functionToIsEditingMode}}
   * @param {ObjectType.OBJECT} datasource {{datasource}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.screen.isEditingMode = function(datasource) {
    return getDatasource(datasource).editing;
  };

  /**
   * @type function
   * @name {{changeTitleScreen}}
   * @nameTags changeTitleScreen
   * @description {{functionToChangeTitleScreen}}
   * @param {ObjectType.STRING} title {{title}}
   */
  this.cronapi.screen.changeTitleScreen = function(title) {
    window.document.title = title;
  };

  /**
   * @type function
   * @name {{fieldNameFromScreen}}
   * @nameTags fieldNameFromScreen
   * @description {{functionToGetFieldNameFromScreen}}
   * @param {ObjectType.STRING} field {{field}}
   * @returns {ObjectType.OBJECT}
   * @wizard field_from_screen
   * @multilayer true
   */
  this.cronapi.screen.fieldFromScreen = function(field) {
    return field;
  };

  /**
   * @type function
   * @name {{changeValueOfField}}
   * @nameTags changeValueOfField|changeFieldValue
   * @description {{functionToChangeValueOfField}}
   * @param {ObjectType.STRING} field {{field}}
   * @param {ObjectType.STRING} value {{value}}
   * @multilayer true
   */
  this.cronapi.screen.changeValueOfField = function(/** @type {ObjectType.STRING} @blockType field_from_screen*/ field, /** @type {ObjectType.STRING} */value) {
    try {
      this.__tempValue = value;
      var func = new Function('this.' + field + ' = this.__tempValue;');
      this.safeApply(func.bind(this));
    }
    catch (e) {
      // NO COMMAND
    }
  };

  /**
   * @type function
   * @name {{getValueOfField}}
   * @nameTags getValueOfField|getFieldValue
   * @description {{functionToGetValueOfField}}
   * @param {ObjectType.STRING} field {{field}}
   * @returns {ObjectType.OBJECT}
   * @displayInline true
   */
  this.cronapi.screen.getValueOfField = function(/** @type {ObjectType.STRING} @blockType field_from_screen*/ field) {
    try {
      if (field && field.length > 0) {
        if (field.indexOf('.active.') > -1)
          return eval(field);
        else{
            var scope = eval('this');
            var recursiveLookup = function(scope) {
              var fieldValue;
              try {
                fieldValue = eval("scope." + field);
              }
              catch (e) {
              }
              if(fieldValue !== undefined || fieldValue !== null){
                return fieldValue;
              }
              else if(scope && scope.$parent ) {
                return recursiveLookup(scope.$parent);
              }
              return '';
            };
            return recursiveLookup(scope);
        }
      }
      return '';
    }
    catch (e) {
      alert(e);
    }
  };

  /**
   * @type function
   * @name {{createScopeVariableName}}
   * @nameTags createScopeVariable
   * @description {{createScopeVariableDescription}}
   * @param {ObjectType.STRING} name {{createScopeVariableParam0}}
   * @param {ObjectType.STRING} value {{createScopeVariableParam1}}
   */
  this.cronapi.screen.createScopeVariable = function(name,value) {
    this.cronapi.$scope.safeApply(() => this.cronapi.$scope.vars[name] = value);
  };

  /**
   * @type function
   * @name {{getScopeVariableName}}
   * @nameTags getScopeVariable
   * @description {{getScopeVariableDescription}}
   * @param {ObjectType.STRING} name {{getScopeVariableParam0}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.screen.getScopeVariable = function(name) {
    return this.cronapi.$scope.vars[name];
  };
  /**
   * @deprecated true
   * @type function
   * @name {{screenNotifyName}}
   * @description {{screenNotifyDescription}}
   * @nameTags show | exibir | exibe | notification | notificaÃ§Ã£o
   * @param {ObjectType.STRING} type {{screenNotifyParam0}}
   * @param {ObjectType.STRING} message {{screenNotifyParam1}}
   * @wizard notify_type
   * @multilayer true
   */
  this.cronapi.screen.notify = function(/** @type {ObjectType.STRING} */ type, /** @type {ObjectType.STRING} */  message) {
    if (message == null || message == undefined) {
      message = '';
    }

    this.cronapi.$scope.Notification({'message':message.toString() },type);
  };


  /**
   * @type function
   * @name {{datasourceFromScreenName}}
   * @nameTags datasourceFromScreen
   * @description {{datasourceFromScreenDescription}}
   * @param {ObjectType.STRING} datasource {{datasourceFromScreenParam0}}
   * @returns {ObjectType.STRING}
   * @wizard datasource_from_screen
   * @multilayer true
   */
  this.cronapi.screen.datasourceFromScreen = function(datasource) {
    return datasource;
  };

  /**
   * @type function
   * @name {{startInsertingModeName}}
   * @nameTags startInsertingMode
   * @description {{startInsertingModeDescription}}
   * @param {ObjectType.STRING} datasource {{startInsertingModeParam0}}
   * @multilayer true
   */
  this.cronapi.screen.startInsertingMode = async function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource) {
    return new Promise((resolve, reject) =>{
      getDatasource(datasource).$apply(() => {
        try {
          getDatasource(datasource).startInserting(null, ()=> {
            resolve();
          });
        }
        catch(e) {
          reject(e);
        }
      });
    });
  };

  /**
   * @type function
   * @name {{startEditingModeName}}
   * @nameTags startEditingMode
   * @description {{startEditingModeDescription}}
   * @param {ObjectType.STRING} datasource {{startEditingModeParam0}}
   * @multilayer true
   */
  this.cronapi.screen.startEditingMode = async function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource) {
    return new Promise((resolve, reject) =>{
      getDatasource(datasource).$apply(() => {
        try {
          getDatasource(datasource).startEditing(null, ()=> {
            resolve();
          });
        }
        catch(e) {
          reject(e);
        }
      });
    });
  };

  /**
   * @type function
   * @name {{backNormalStateName}}
   * @nameTags backNormalState
   * @description {{backNormalStateDescription}}
   * @param {ObjectType.STRING} datasource {{startEditingModeParam0}}
   * @multilayer true
   */
    this.cronapi.screen.backNormalState = async function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource) {
      return new Promise((resolve, reject) =>{
        getDatasource(datasource).$apply(() => {
          try {
            getDatasource(datasource).onBackNomalState();
            resolve();
          }
          catch(e) {
            reject(e);
          }
        });
      });
    };

  /**
   * @type function
   * @name {{previusRecordName}}
   * @nameTags previusRecord
   * @description {{previusRecordDescription}}
   * @param {ObjectType.STRING} datasource {{previusRecordParam0}}
   * @multilayer true
   */
  this.cronapi.screen.previusRecord = function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource) {
    getDatasource(datasource).$apply( new function(){getDatasource(datasource).previous();} );
  };

  /**
   * @type function
   * @name {{nextRecordName}}
   * @nameTags nextRecord
   * @description {{nextRecordDescription}}
   * @param {ObjectType.STRING} datasource {{nextRecordParam0}}
   * @multilayer true
   */
  this.cronapi.screen.nextRecord = function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource) {
    getDatasource(datasource).$apply( new function(){getDatasource(datasource).next();} );
  };

  /**
   * @type function
   * @name {{firstRecordName}}
   * @nameTags firstRecord
   * @description {{firstRecordDescription}}
   * @param {ObjectType.STRING} datasource {{firstRecordParam0}}
   * @multilayer true
   */

  this.cronapi.screen.firstRecord = function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource) {
    getDatasource(datasource).$apply( new function(){
      var ds = getDatasource(datasource);
      ds.cursor = -1;
      ds.next();
    } );
  };

  /**
   * @type function
   * @name {{lastRecordName}}
   * @nameTags lastRecord
   * @description {{lastRecordDescription}}
   * @param {ObjectType.STRING} datasource {{lastRecordParam0}}
   * @multilayer true
   */

  this.cronapi.screen.lastRecord = function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource) {
    getDatasource(datasource).$apply( new function(){
      var ds = getDatasource(datasource);
      ds.cursor = ds.data.length-2;
      ds.next();
    } );
  };

  /**
   * @type function
   * @name {{removeRecordName}}
   * @nameTags removeRecord
   * @description {{removeRecordDescription}}
   * @param {ObjectType.STRING} datasource {{removeRecordParam0}}
   * @multilayer true
   */
  this.cronapi.screen.removeRecord = async function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource) {
    return new Promise((resolve, reject) =>{
      getDatasource(datasource).$apply(() => {
        try {
          getDatasource(datasource).removeSilent(null, () => {
            resolve();
          }, (e) => {
            reject(e);
          });
        }
        catch(e) {
          reject(e);
        }
      });
    });
  };

  /**
   * @type function
   * @name {{refreshActiveRecordName}}
   * @nameTags hasNextRecord
   * @description {{refreshActiveRecordDescription}}
   * @param {ObjectType.STRING} datasource {{refreshActiveRecordParam0}}
   * @multilayer true
   */
  this.cronapi.screen.refreshActiveRecord = async function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource) {
    return new Promise((resolve, reject) =>{
      try {
        getDatasource(datasource).refreshActive(() => {
          resolve();
        }, (e) => {
          reject(e);
        });
      }
      catch(e) {
        reject(e);
      }
    });
  };

  /**
   * @type function
   * @name {{hasNextRecordName}}
   * @nameTags hasNextRecord
   * @description {{hasNextRecordDescription}}
   * @param {ObjectType.STRING} datasource {{hasNextRecordParam0}}
   * @returns {ObjectType.BOOLEAN}
   */
  this.cronapi.screen.hasNextRecord = function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource) {
    return getDatasource(datasource).hasNext();
  };

  /**
   * @type function
   * @name {{quantityRecordsName}}
   * @nameTags quantityRecords
   * @description {{quantityRecordsDescription}}
   * @param {ObjectType.STRING} datasource {{quantityRecordsParam0}}
   * @returns {ObjectType.LONG}
   */
  this.cronapi.screen.quantityRecords = function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource) {
    return getDatasource(datasource).data.length;
  };

  /**
   * @type function
   * @name {{datasourcePostName}}
   * @nameTags post|datasource
   * @description {{datasourcePostDescription}}
   * @param {ObjectType.STRING} datasource {{datasource}}
   * @multilayer true
   */
  this.cronapi.screen.post = async function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource) {
    return new Promise((resolve, reject) =>{
      try {
        getDatasource(datasource).postSilent(() => {
          resolve();
        }, (e) => {
          reject(e);
        });
      }
      catch(e) {
        reject(e);
      }
    });
  };

  /**
   * @deprecated true
   * @type function
   * @name {{datasourceFilterName}}
   * @nameTags filter|datasource
   * @description {{datasourceFilterDescription}}
   * @param {ObjectType.STRING} datasource {{datasourceFilterParam0}}
   * @param {ObjectType.STRING} datasource {{datasourceFilterParam1}}
   * @multilayer true
   */
  this.cronapi.screen.filter = function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource,/** @type {ObjectType.STRING}*/ path) {
    if(getDatasource(datasource).isOData()){
      getDatasource(datasource).search(path);
    }
    else{
      getDatasource(datasource).filter('/' + path);
    }
  };

  /**
   * @type function
   * @name {{datasourceFilterName1}}
   * @nameTags filter|datasource
   * @description {{datasourceFilterDescription}}
   * @param {ObjectType.STRING} datasource {{datasourceFilterParam0}}
   * @param {ObjectType.STRING} condition {{datasourceFilterParam6}}
   * @param {ObjectType.LIST} filter {{datasourceFilterParam5}}
   * @multilayer true
   */
   this.cronapi.screen.doFilter = function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource, /** @type {ObjectType.String} @description {{datasourceFilterParam6}} @blockType util_dropdown @keys or|and @values {{datasourceFilterConditionOr}}|{{datasourceFilterConditionAnd}}  */ condition,/** @type {ObjectType.LIST}*/ filter) {
  
    let path = filter;

    if(filter instanceof Array){
      path = filter.join(' ' + condition + ' ');
    }

    if(getDatasource(datasource).isOData()){
      getDatasource(datasource).search(path);
    }
    else{
      getDatasource(datasource).filter('/' + path);
    }
  };

  /**
   * @type function
   * @name {{datasourceFilterName2}}
   * @nameTags filter|datasource
   * @description {{datasourceFilterDescription}}
   * @param {ObjectType.STRING} field {{datasourceFilterParam2}}
   * @param {ObjectType.STRING} filterType {{datasourceFilterParam3}}
   * @param {ObjectType.STRING} filterValue {{datasourceFilterParam4}}
   * @returns {ObjectType.LIST}
   * @multilayer true
   */
   this.cronapi.screen.createFilter = function(/** @type {ObjectType.String} */ field,  /** @type {ObjectType.String} @description {{datasourceFilterParam3}} @blockType util_dropdown @keys eq|ne|gt|lt|ge|le|substringof @values {{datasourceFilterOprEq}}|datasourceFilterOprNe|datasourceFilterOprGt|datasourceFilterOprLt|datasourceFilterOprGe|datasourceFilterOprLe|datasourceFilterOprSubStr  */ filterType, /** @type {ObjectType.Object}*/ filterValue) {
    if(filterType === "substringof"){
      return "substringof('" + ((filterValue) ? filterValue : "")  + "', " + field + ")";
    }
    return field + " " + filterType + " " + objToOData(filterValue) + "";
  };

  /**
   * @type function
   * @name {{changeView}}
   * @nameTags changeView|Mudar tela|Change form|Change screen|Mudar formulÃ¡rio
   * @description {{functionToChangeView}}
   * @param {ObjectType.STRING} view {{view}}
   * @param {ObjectType.LIST} params {{params}}
   * @wizard procedures_open_form_callnoreturn
   * @multilayer true
   */
  this.cronapi.screen.changeView = function(view, params) {
    try {
      var queryString = '';

      var paramsStopEncode = {};
      paramsStopEncode['%24'] = '$';

      function decodeCharParam(value) {
        if (value) {
          for (var param in paramsStopEncode) {
            var regex = eval('/' + param + '/g' );
            value = value.replace(regex, paramsStopEncode[param]);
          }
        }
        return value;
      }

      if (typeof params != 'undefined') {
          if (params instanceof Array) {
           for (var i in Object.keys(params)) {
             var k = Object.keys(params[i])[0];
             var paramValue = Object.values(params[i])[0];
             if (paramValue instanceof Date) {
               paramValue = paramValue.toISOString();
             }
             var v = String(paramValue);
             if (queryString) {
               queryString += "&";
             }
             queryString += decodeCharParam(encodeURIComponent(k)) + "=" + encodeURIComponent(v);
           }
          } else {
            for (var k in params) {
             if (queryString) {
               queryString += "&";
             }
             queryString += decodeCharParam(encodeURIComponent(k)) + "=" + encodeURIComponent(params[k]);
            }
          }
      }

      let existRoute = (view) => {
        if (this.cronapi.$scope && this.cronapi.$scope.$state) {
          let $states = this.cronapi.$scope.$state.get();
          let viewSplited = view.split("/").slice(2);
          let templateToFind = "views/" + viewSplited.join("/") + ".view.html";

          $states.forEach((s)=> {
            let templateUrl  = s.templateUrl;
            if (templateUrl instanceof Function)  {
              let regexExecuted = /('|")[a-z0-9/.]+('|")/gim.exec(templateUrl.toString());
              if (regexExecuted !== null && regexExecuted !== undefined && regexExecuted[0])
                templateUrl = regexExecuted[0].replace(/'|"/g, "");
            }
            if (templateUrl === templateToFind)
              view = "#" + s.url;
          })
        }
        return view;
      };

      var oldHash = window.location.hash;
      view = existRoute(view);
      window.location.hash = view + (queryString?"?"+queryString:"");

      var oldHashToCheck = oldHash + (oldHash.indexOf("?") > -1 ? "": "?");
      var viewToCheck = view + (view.indexOf("?") > -1 ? "": "?");

      this.cronapi.forceCloseAllModal();

      if(oldHashToCheck.indexOf(viewToCheck) >= 0){
        window.location.reload();
      }

    }
    catch (e) {
      alert(e);
    }
  };

  /**
   * @type function
   * @name {{openUrl}}
   * @nameTags openUrl|Abrir url
   * @description {{functionToOpenUrl}}
   * @param {ObjectType.STRING} url {{url}}
   * @param {ObjectType.BOOLEAN} newTab {{newTab}}
   * @param {ObjectType.LONG} width {{width}}
   * @param {ObjectType.LONG} height {{height}}
   * @multilayer true
   */
  this.cronapi.screen.openUrl = function(url, newTab, width, height) {
    try {
      var target = '_self';
      var params = '';
      if (newTab && newTab.toString().toLowerCase() == 'true')
        target = '_blank';
      if (width)
        params += 'width=' + width + ',';
      if (height)
        params += 'height=' + height+ ',';
      window.open(url, target, params);
    }
    catch (e) {
      alert(e);
    }
  };

  /**
   * @type function
   * @name {{getParam}}
   * @nameTags getParam|Obter paramÃªtro
   * @description {{functionToGetParam}}
   * @returns {ObjectType.STRING}
   * @param {ObjectType.STRING} paramName {{paramName}}
   */
  this.cronapi.screen.getParam = function(paramName) {
    try {

      var vars = [], hash;
      var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
      for(var i = 0; i < hashes.length; i++)
      {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
      }

      if (vars[paramName] !== undefined)
        return decodeURIComponent(vars[paramName]);
    }
    catch (e) {
      //
    }

    return null;
  };


  /**
   * @deprecated true
   * @type function
   * @name {{confirmDialogName}}
   * @nameTags confirmDialog|Confirmar
   * @description {{confirmDialogDescription}}
   * @returns {ObjectType.BOOLEAN}
   * @param {ObjectType.STRING} msg {{confirmDialogParam0}}
   */
  this.cronapi.screen.confimDialog = function(msg) {

    var value = confirm(msg);
    return value;
  };


  /**
   * @type function
   * @name {{createDefaultModalName}}
   * @nameTags createModal|Criar Modal| Modal
   * @description {{createDefaultModalDescription}}
   * @param {ObjectType.STRING} title {{createDefaultModalParam1}}
   * @param {ObjectType.STRING} msg {{createDefaultModalParam2}}
   * @param {ObjectType.STRING} buttonCancelName {{createDefaultModalParam3}}
   * @param {ObjectType.STRING} buttonSaveName {{createDefaultModalParam4}}
   *
   */
  this.cronapi.screen.createDefaultModal = function(title, msg, buttonCancelName, buttonSaveName, /** @type {ObjectType.STATEMENT} @description {{createDefaultModalParam5}} */ onSuccess, /** @type {ObjectType.STATEMENT} @description {{createDefaultModalParam6}}*/ onError,/** @type {ObjectType.STATEMENT} @description {{createDefaultModalParam7}}*/ onClose ) {
    $('#modalTemplateTitle').text(title);
    $('#modalTemplateBody').text(msg);
    $('#modalTemplateCancel').text(buttonCancelName);
    $('#modalTemplateSave').text(buttonSaveName);
    $( "#modalTemplateClose").unbind( "click" );
    $('#modalTemplateClose').click(onClose);
    $( "#modalTemplateCancel").unbind( "click" );
    $('#modalTemplateCancel').click(onError);
    $( "#modalTemplateSave").unbind( "click" );
    $('#modalTemplateSave').click(onSuccess);
    this.cronapi.screen.showModal('modalTemplate');

  };

  /**
   * @type function
   * @name {{showModal}}
   * @nameTags Show| Modal| Exibir| Mostrar
   * @platform W
   * @description {{showModalDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @multilayer true
   */
  this.cronapi.screen.showModal = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id) {
      let modalToShow = `#${id}`;
      let focused = $(':focus');
      let allHover = $(':hover');

      try{
          $(modalToShow).one('shown.bs.modal', function (e) {

              if (focused.length) {
                  $(this).data('lastFocused', focused);
                  $(this).data('lastFocusedClass', '.' + focused.attr('class').split(' ').join('.'));
              }
              if (allHover.length) {
                  $(this).data('lastHovers', allHover);
              }
              let firstInputVisible = $(this).find('input:not(:hidden)')[0];
              if (firstInputVisible)
                  firstInputVisible.focus();

          }).one('hidden.bs.modal', function(e) {

              let lastFocusedClass = undefined;
              let lastFocused = $(modalToShow).data('lastFocused');
              let lastFocusedIsVisible = false;

              if (lastFocused && lastFocused.length) {
                  //Verifica se o item que foi clicado ainda existe no documento (A grade remove o botao e adiciona novamente, perde a referencia)
                  lastFocusedClass = $($(this).data('lastFocusedClass'));
                  if ($('html').has(lastFocused).length) {
                      //Se existir, verifica se o mesmo estÃ¡ visivel
                      lastFocusedIsVisible = lastFocused.is(':visible');
                  }
                  else {
                      //Se nao existir, e foi readicionado verifica se estÃ¡ visivel pelas classes
                      lastFocusedIsVisible = lastFocusedClass.is(':visible');
                  }
              }

              let findLastLink = function(element) {
                return $(element[element.length - 1]).closest('li:visible').find('a:first');
              };

              let lastHovers = $(modalToShow).data('lastHovers');

              if (lastFocusedIsVisible) {
                  lastFocusedClass.focus();
                  lastFocused.focus();
              }
              //Tenta achar o mais proximo do ultimo click (link clicado)
              else if ($('html').has(lastFocused).length) {
                let lastLink = findLastLink(lastFocused);
                lastLink.focus();
              }
              else if (lastHovers && lastHovers.length) {
                let lastLink = findLastLink(lastHovers);
                lastLink.focus();
              }


          }).modal({backdrop: 'static', keyboard: false});
      }catch(e){
          $(modalToShow).show();
      }
      $(modalToShow).css('overflow-y', 'auto');
  };

  /**
   * @type function
   * @name {{setActiveTab}}
   * @nameTags Show| Tab| Exibir| Mostrar | Ativar |  Aba
   * @platform W
   * @description {{setActiveTablDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @multilayer true
   */
  this.cronapi.screen.setActiveTab = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id) {
    this.cronapi.$scope.safeApply( function(){
      if( $('#'+id).attr('data-target') === undefined){
        $( '[data-target="#'+ id + '"]' ).tab('show');
      }
      else{
        $('#'+id).tab('show');
      }

    });
  };

  /**
   * @type function
   * @name {{hideModal}}
   * @nameTags Hide| Modal| Esconder | Fechar
   * @description {{hideModalDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @multilayer true
   */
  this.cronapi.screen.hideModal = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id) {
    try{
      $('#'+id).modal('hide');
    }catch(e){
      $('#'+id).hide();
    }
  };


  /**
   * @type function
   * @name {{showMobileModal}}
   * @nameTags Show| Modal| Exibir| Mostrar
   * @description {{showMobileModalDesc}}
   * @platform M
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @multilayer true
   */
 this.cronapi.screen.showIonicModal = async function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id) {
    if($(`#${id}`).data('cronapp-modal')) {
        $(`#${id}`).data('cronapp-modal').remove();
    }
    return new Promise((resolve, reject) => {
      this.cronapi.$scope.$ionicModal.fromTemplateUrl(id, {
        scope: this.cronapi.$scope,
        animation: 'slide-in-up'
      }).then((modal) => {
        $('#'+id).data('cronapp-modal', modal);
        modal.show();
        resolve();
      }).catch((e) => reject(e));
    });
 };


  /**
   * @type function
   * @name {{hideMobileModal}}
   * @nameTags Hide| Modal| Esconder | Fechar
   * @description {{hideMobileModalDesc}}
   * @platform M
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @multilayer true
   */
  this.cronapi.screen.hideIonicModal = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id) {
    if($('#'+id).data('cronapp-modal')) {
      var modal = $('#'+id).data('cronapp-modal');
      modal.remove();
      $('#'+id).data('cronapp-modal', null);
    }
  };

  /**
   * @type function
   * @name {{isShownIonicModal}}
   * @nameTags isShown| Modal| Exibido
   * @description {{isShownIonicModallDesc}}
   * @platform M
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @returns {ObjectType.BOOLEAN}
   */
  this.cronapi.screen.isShownIonicModal = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id) {
    if($('#'+id).data('cronapp-modal')) {
      var modal = $('#'+id).data('cronapp-modal');
      return modal.isShown();
    }
    return false;
  };

  /**
   * @type function
   * @name {{showLoading}}
   * @nameTags Show| Loading| Exibir | Carregamento
   * @description {{showLoadingDesc}}
   * @platform M
   */
  this.cronapi.screen.showLoading = function() {
    this.cronapi.$scope.$ionicLoading.show({
      content : 'Loading',
      animation : 'fade-in',
      showBackdrop : true,
      maxWidth : 200,
      showDelay : 0
    });
  };

  /**
   * @type function
   * @name {{hideLoading}}
   * @nameTags Hide| Loading| Esconder | Carregamento
   * @description {{hideLoadingDesc}}
   * @platform M
   */
  this.cronapi.screen.hide = function() {
    this.cronapi.$scope.$ionicLoading.hide();
  };

  /**
   * @type function
   * @name {{getHostapp}}
   * @nameTags Hostapp
   * @description {{getHostappDesc}}
   * @platform M
   * @returns {ObjectType.String}
   */
  this.cronapi.screen.getHostapp = function() {
    return window.hostApp;
  };


  /**
   * @type function
   * @name {{searchIds}}
   * @nameTags searchIds
   * @description {{searchIdsDescription}}
   * @wizard ids_from_screen
   * @multilayer true
   */
  this.cronapi.screen.searchIds = function() {

  };

  /**
   * @type function
   * @name {{showComponent}}
   * @nameTags showComponent
   * @description {{showComponentDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @multilayer true
   */
  this.cronapi.screen.showComponent = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id) {
    $("#"+id).get(0).style.setProperty("display", "block", "important");

  };

  /**
   * @type function
   * @name {{hideComponent}}
   * @nameTags hideComponent
   * @description {{hideComponentDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @multilayer true
   */
  this.cronapi.screen.hideComponent = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id) {
    $("#"+id).get(0).style.setProperty("display", "none", "important");
  };

  /**
   * @type function
   * @name {{disableComponent}}
   * @nameTags disableComponent
   * @description {{disableComponentDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @multilayer true
   */
  this.cronapi.screen.disableComponent = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id) {

    let $scope = undefined;
    if (window.cordova) {
      $scope = this.cronapi.$scope;
    } else {
      let injector = window.angular.element('body').injector();
      $scope = injector.get('$rootScope');
    }


    let process = ($c, isOnRoot) => {
      if ($c.data("kendoComboBox")) {
          $c.data("kendoComboBox").enable(false);
      } else if ($c.hasClass('cronSelect') && $c.closest('.form-group').find('input.cronSelect[data-role=combobox]').data('kendoComboBox')) {
          $c.closest('.form-group').find('input.cronSelect[data-role=combobox]').data('kendoComboBox').enable(false);
      } else if ($c.data("kendoDropDownList")) {
          $c.data("kendoDropDownList").enable(false);
      } else if ($c.find('[data-role=grid]').data('kendoGrid') || $c.find('cron-grid').length) {
          this.cronapi.internal.coverElement($c);
      } else {
        $.each( $c.find('*').addBack(), function(index, value){
          let $value = $(value);
          $value.prop('disabled',true).addClass("disabled");
          if (isOnRoot) {
            process($value, false);
          }
        });
      }
    };

    let waitAngularReady = () => {
      let $c = $(`#${id}`);
      if (($scope.$$phase !== '$apply' && $scope.$$phase !== '$digest') || $c.find('cron-grid').length) {
        process($c, true);
      }
      else {
        setTimeout( () => waitAngularReady(), 200);
      }
    };

    waitAngularReady();
  };

  /**
   * @type function
   * @name {{enableComponent}}
   * @nameTags enableComponent
   * @description {{enableComponentDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @multilayer true
   */
  this.cronapi.screen.enableComponent = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id) {

    let $scope = undefined;
    if (window.cordova) {
      $scope = this.cronapi.$scope;
    } else {
      let injector = window.angular.element('body').injector();
      $scope = injector.get('$rootScope');
    }

    let process = ($c, isOnRoot) => {
      if($c.data("kendoComboBox")){
        $c.data("kendoComboBox").enable(true);
      } else if ($c.hasClass('cronSelect') && $c.closest('.form-group').find('input.cronSelect[data-role=combobox]').data('kendoComboBox')) {
        $c.closest('.form-group').find('input.cronSelect[data-role=combobox]').data('kendoComboBox').enable(true);
      } else if ($c.data("kendoDropDownList")) {
        $c.data("kendoDropDownList").enable(true);
      } else if ($c.find('[data-role=grid]').data('kendoGrid') || $c.find('cron-grid').length) {
        this.cronapi.internal.discoverElement($c);
      } else {
        $.each( $c.find('*').addBack(), function(index, value){
          let $value = $(value);
          $value.prop('disabled',false).removeClass("disabled");
          if (isOnRoot) {
            process($value, false)
          }
        });
      }
    };

    let waitAngularReady = () => {
      let $c = $(`#${id}`);
      if (($scope.$$phase !== '$apply' && $scope.$$phase !== '$digest') || $c.find('cron-grid').length) {
        process($c, true);
      } else {
        setTimeout( () => waitAngularReady(), 200);
      }
    };
    waitAngularReady();
  };

  /**
   * @type function
   * @name {{focusComponent}}
   * @nameTags focus
   * @description {{focusComponentDesc}}*
   * @multilayer true
   */
  this.cronapi.screen.focusComponent = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id) {
    this.cronapi.$scope.safeApply( function() {
      if(tinyMCE && tinyMCE.get(id)) {
        tinyMCE.get(id).focus();
      }else{
        $('#'+id).find('*').addBack().focus();
      }
    });
  };


  /**
   * @type function
   * @name {{changeAttrValueName}}
   * @nameTags changeAttrValue
   * @description {{changeAttrValueDesc}}
   * @param {ObjectType.STRING} id {{idsFromScreen}}
   * @param {ObjectType.STRING} attrName {{attrName}}
   * @param {ObjectType.STRING} attrValue {{attrValue}}
   * @multilayer true
   */
  this.cronapi.screen.changeAttrValue = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id , /** @type {ObjectType.STRING} */ attrName, /** @type {ObjectType.STRING} */ attrValue ) {
    $('#'+id).attr(attrName , attrValue);
  };

  /**
   * @type function
   * @name {{getAttrValueName}}
   * @nameTags getAttributeValue|getAttrValueName|Atributo|Obter
   * @description {{getAttrValueDescription}}
   * @param {ObjectType.STRING} id {{idsFromScreen}}
   * @param {ObjectType.STRING} attrName {{attrName}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.screen.getAttrValue = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id , /** @type {ObjectType.STRING} */ attrName) {
    return $(`#${id}`).attr(attrName);
  };


    /**
   * @type function
   * @name {{changeContent}}
   * @nameTags change|content|conteudo|moficiar
   * @description {{changeContentDesc}}
   * @param {ObjectType.STRING} id {{idsFromScreen}}
   * @param {ObjectType.STRING} content {{content}}
     * @param {ObjectType.BOOLEAN} compile {{compile}}
   * @multilayer true
   */
    this.cronapi.screen.changeContent = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id , /** @type {ObjectType.STRING} */ content, /** @type {ObjectType.BOOLEAN} @blockType util_dropdown @keys false|true @values {{false}}|{{true}}*/ compile) {
    $('#'+id).html(content);
      if(compile === true || compile === 'true'){
        var $injector = angular.injector(['ng']);
        var that = this;
        $injector.invoke(['$compile', function($compile) {
          $compile(document.querySelector('#'+id))(that.cronapi.$scope);
        }]);
      }
    };

    /**
     * @type function
     * @name {{setVisibility}}
     * @nameTags visivel|visibilidade|visibility|show|hide|esconder|exibir
     * @description {{setVisibilityDesc}}
     * @param {ObjectType.STRING} id {{idsFromScreen}}
     * @param {ObjectType.BOOLEAN} visible {{visible}}
     * @multilayer true
     */
    this.cronapi.screen.setVisibility = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id , /** @type {ObjectType.BOOLEAN} @blockType util_dropdown @keys false|true @values {{false}}|{{true}}*/ visible) {
      let visibility = (visible === true || visible === 'true') ? 'visible' : 'hidden';
      $(`#${id}`).css('visibility',`${visibility}`);
    };

    /**
     * @type function
     * @name {{getContent}}
     * @nameTags get|content|conteudo|obter
     * @description {{getContentDesc}}
     * @param {ObjectType.STRING} id {{idsFromScreen}}
     * @multilayer true
     * @returns {ObjectType.STRING}
     */
    this.cronapi.screen.getContent = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id ) {
        return $(`#${id}`).html();
    };

    /**
     * @type function
     * @name {{copyValue}}
     * @nameTags copiar|copy|Ã¡rea|area|transferÃªncia|transferencia|Ã¡rea de transferÃªncia|area de transferencia|Ã¡rea transferÃªncia|area transferencia|clipboard
     * @description {{copyValueDescription}}
     * @param {ObjectType.STRING} field {{field}}
     * @multilayer true
     */
    this.cronapi.screen.copyValue = function(/** @type {ObjectType.STRING} @blockType field_from_screen*/ field) {
      var value = this.cronapi.screen.getValueOfField(field);
      if (value == undefined) {
        value = "";
      }
      navigator.clipboard.writeText(value);
    };

    /**
     * @type function
     * @name {{toggleClass}}
     * @nameTags toogle|change|class|classe|alternar|trocar
     * @description {{toggleClassDesc}}
     * @param {ObjectType.STRING} id {{idsFromScreen}}
     * @param {ObjectType.STRING} attrValue {{attrValue}}
     * @multilayer true
     */
    this.cronapi.screen.toggleClass = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id , /** @type {ObjectType.STRING} */ attrValue) {
        $(`#${id}`).toggleClass(attrValue);
    };

    /**
     * @type function
     * @name {{recompileComponent}}
     * @nameTags recompile|component|recompilar|componente
     * @description {{recompileComponentDesc}}
     * @param {ObjectType.STRING} id {{idsFromScreen}}
     * @multilayer true
     */
    this.cronapi.screen.recompileComponent = async function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id ) {
      let getCompile = ($element) => {
        return new Promise((resolve) => {
          let $compile = $element.data('$compile');
          if ($compile) {
            resolve($compile);
          }
          else {
            var $injector = angular.injector(['ng']);
            $injector.invoke(['$compile', ($compile) => resolve($compile)]);
          }
        });
      };

      let $element = $(`#${id}`);
      $element.data('alreadycompiled', false);
      let $compile = await getCompile($element);
      let scope = this.cronapi.$scope;
      scope.safeApply(() => $compile($element)(scope));
    };

  /**
   * @type function
   * @name {{logoutName}}
   * @nameTags logout
   * @description {{logoutDescription}}
   * @multilayer true
   */
  this.cronapi.screen.logout = function() {
    if(this.cronapi.$scope.logout != undefined)
      this.cronapi.$scope.logout();
  };

  /**
   * @type function
   * @name {{refreshDatasource}}
   * @nameTags refresh|datasource|atualizar|fonte
   * @description {{refreshDatasourceDescription}}
   * @param {ObjectType.STRING} datasource {{datasource}}
   * @multilayer true
   */
  this.cronapi.screen.refreshDatasource = function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource , /** @type {ObjectType.BOOLEAN} @description {{keepFilters}} @blockType util_dropdown @keys true|false @values {{true}}|{{false}}  */  keepFilters ) {
    if(keepFilters == true || keepFilters == 'true' ){
      this[datasource].search(this[datasource].terms , this[datasource].caseInsensitive);
    }else
      this[datasource].search("", this[datasource].caseInsensitive);
  };



    /**
     * @type function
     * @name {{loadMoreName}}
     * @nameTags load|datasource|next|page
     * @description {{loadMoreNameDescription}}
     * @param {ObjectType.STRING} datasource {{datasource}}
     */
    this.cronapi.screen.loadMore = function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource) {
        getDatasource(datasource).$apply( function() { getDatasource(datasource).nextPage();});
    };


    /**
     * @type function
     * @name {{hasNextPageName}}
     * @nameTags load|datasource|next|page
     * @description {hasNextPageDescription}}
     * @param {ObjectType.STRING} datasource {{datasource}}
     * @returns {ObjectType.BOOLEAN}
     */
    this.cronapi.screen.hasNextPage = function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource) {
        return getDatasource(datasource).hasNextPage();
    };

    /**
     * @type function
     * @name {{datasourceLoadName}}
     * @nameTags load|datasource
     * @description {{datasourceLoadDescription}}
     * @param {ObjectType.STRING} datasource {{datasource}}
     * @multilayer true
     */
    this.cronapi.screen.load = function(/** @type {ObjectType.OBJECT} @blockType datasource_from_screen*/ datasource) {
        let ds = getDatasource(datasource);
        ds.reloadedFromCronapi = true;
        ds.fetch({ params: {} }, undefined, undefined, { origin: "button" });
    };

    /**
     * @type function
     * @name {{addClassName}}
     * @nameTags class|classe|add|adicionar
     * @description {{addClassDesc}}
     * @param {ObjectType.STRING} id {{idsFromScreen}}
     * @param {ObjectType.STRING} attrValue {{attrValue}}
     * @multilayer true
     */
    this.cronapi.screen.addClass = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id , /** @type {ObjectType.STRING} */ attrValue ) {
        $(`#${id}`).addClass(attrValue);
    };

    /**
     * @type function
     * @name {{removeClassName}}
     * @nameTags class|classe|delete|remover|deletar|remove
     * @description {{removeClassDesc}}
     * @param {ObjectType.STRING} id {{idsFromScreen}}
     * @param {ObjectType.STRING} attrValue {{attrValue}}
     * @multilayer true
     */
    this.cronapi.screen.removeClass = function(/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id , /** @type {ObjectType.STRING} */ attrValue ) {
        $(`#${id}`).removeClass(attrValue);
  };

  /**
   * @type function
   * @name {{dinamicMenu.createMenuObjectMobile.name}}
   * @description {{dinamicMenu.createMenuObjectMobile.description}}
   * @nameTags criar | create | menu | dinÃ¢mico | dinamic
   * @platform M
   * @param {ObjectType.OBJECT} items {{dinamicMenu.createMenuObjectMobile.param.items}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.screen.createMenuObjectMobile = function (items) {
    let normalizedMenuItems = [];
    if (items) {
      if (Array.isArray(items)) {
        normalizedMenuItems = items;
      } else {
        normalizedMenuItems.push(items);
      }
    }
    let menu = {
      "escope": "MOBILE",
      "subMenuOptions": this.cronapi.screen.recursiveDefineItemsIds("menuItem", 1, normalizedMenuItems)
    };
    return menu;
  };

  /**
   * @type function
   * @name {{dinamicMenu.createMenuObjectWeb.name}}
   * @description {{dinamicMenu.createMenuObjectWeb.description}}
   * @nameTags criar | create | menu | dinÃ¢mico | dinamic
   * @platform W
   * @param {ObjectType.OBJECT} items {{dinamicMenu.createMenuObjectWeb.param.items}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.screen.createMenuObjectWeb = function (items) {
    let normalizedMenuItems = [];
    if (items) {
      if (Array.isArray(items)) {
        normalizedMenuItems = items;
      } else {
        normalizedMenuItems.push(items);
      }
    }
    let menu = {
      "escope": "WEB",
      "subMenuOptions": this.cronapi.screen.recursiveDefineItemsIds("menuItem", 1, normalizedMenuItems)
    };
    return menu;
  };

  this.cronapi.screen.recursiveDefineItemsIds = function(id, level, items) {
    for (let i = 0; i < items.length; i++){
      items[i].level = level;
      items[i].id = id + "-" + (i + 1);
      items[i].menuItems = this.cronapi.screen.recursiveDefineItemsIds(items[i].id, level + 1, items[i].menuItems);
    }
    return items;
  };

  /**
   * @type function
   * @name {{dinamicMenu.createMenuItemMobile.name}}
   * @description {{dinamicMenu.createMenuItemMobile.description}}
   * @nameTags criar | create | menu | item
   * @platform M
   * @param {ObjectType.STRING} name {{dinamicMenu.createMenuItemMobile.param.name}}
   * @param {ObjectType.STRING} title {{dinamicMenu.createMenuItemMobile.param.title}}
   * @param {ObjectType.STRING} iconClass
   * @param {ObjectType.STRING} hide {{dinamicMenu.createMenuItemMobile.param.hide}}
   * @param {ObjectType.OBJECT} security {{dinamicMenu.createMenuItemMobile.param.security}}
   * @param {ObjectType.STRING} action {{dinamicMenu.createMenuItemMobile.param.action}}
   * @param {ObjectType.STRING} posText
   * @param {ObjectType.STRING} posIcon
   * @param {ObjectType.STRING} themeText
   * @param {ObjectType.STRING} themeIcon
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.screen.createMenuItemMobile = function (name, title, /** @type {ObjectType.STRING} @description {{dinamicMenu.createMenuItemMobile.param.iconClass}} @blockType util_dropdown @keys ion-NONE|ion-alert|ion-alert-circled|ion-android-add|ion-android-add-circle|ion-android-alarm-clock|ion-android-alert|ion-android-apps|ion-android-archive|ion-android-arrow-back|ion-android-arrow-down|ion-android-arrow-dropdown|ion-android-arrow-dropdown-circle|ion-android-arrow-dropleft|ion-android-arrow-dropleft-circle|ion-android-arrow-dropright|ion-android-arrow-dropright-circle|ion-android-arrow-dropup|ion-android-arrow-dropup-circle|ion-android-arrow-forward|ion-android-arrow-up|ion-android-attach|ion-android-bar|ion-android-bicycle|ion-android-boat|ion-android-bookmark|ion-android-bulb|ion-android-bus|ion-android-calendar|ion-android-call|ion-android-camera|ion-android-cancel|ion-android-car|ion-android-cart|ion-android-chat|ion-android-checkbox|ion-android-checkbox-blank|ion-android-checkbox-outline|ion-android-checkbox-outline-blank|ion-android-checkmark-circle|ion-android-clipboard|ion-android-close|ion-android-cloud|ion-android-cloud-circle|ion-android-cloud-done|ion-android-cloud-outline|ion-android-color-palette|ion-android-compass|ion-android-contact|ion-android-contacts|ion-android-contract|ion-android-create|ion-android-delete|ion-android-desktop|ion-android-document|ion-android-done|ion-android-done-all|ion-android-download|ion-android-drafts|ion-android-exit|ion-android-expand|ion-android-favorite|ion-android-favorite-outline|ion-android-film|ion-android-folder|ion-android-folder-open|ion-android-funnel|ion-android-globe|ion-android-hand|ion-android-hangout|ion-android-happy|ion-android-home|ion-android-image|ion-android-laptop|ion-android-list|ion-android-locate|ion-android-lock|ion-android-mail|ion-android-map|ion-android-menu|ion-android-microphone|ion-android-microphone-off|ion-android-more-horizontal|ion-android-more-vertical|ion-android-navigate|ion-android-notifications|ion-android-notifications-none|ion-android-notifications-off|ion-android-open|ion-android-options|ion-android-people|ion-android-person|ion-android-person-add|ion-android-phone-landscape|ion-android-phone-portrait|ion-android-pin|ion-android-plane|ion-android-playstore|ion-android-print|ion-android-radio-button-off|ion-android-radio-button-on|ion-android-refresh|ion-android-remove|ion-android-remove-circle|ion-android-restaurant|ion-android-sad|ion-android-search|ion-android-send|ion-android-settings|ion-android-share|ion-android-share-alt|ion-android-star|ion-android-star-half|ion-android-star-outline|ion-android-stopwatch|ion-android-subway|ion-android-sunny|ion-android-sync|ion-android-textsms|ion-android-time|ion-android-train|ion-android-unlock|ion-android-upload|ion-android-volume-down|ion-android-volume-mute|ion-android-volume-off|ion-android-volume-up|ion-android-walk|ion-android-warning|ion-android-watch|ion-android-wifi|ion-aperture|ion-archive|ion-arrow-down-a|ion-arrow-down-b|ion-arrow-down-c|ion-arrow-expand|ion-arrow-graph-down-left|ion-arrow-graph-down-right|ion-arrow-graph-up-left|ion-arrow-graph-up-right|ion-arrow-left-a|ion-arrow-left-b|ion-arrow-left-c|ion-arrow-move|ion-arrow-resize|ion-arrow-return-left|ion-arrow-return-right|ion-arrow-right-a|ion-arrow-right-b|ion-arrow-right-c|ion-arrow-shrink|ion-arrow-swap|ion-arrow-up-a|ion-arrow-up-b|ion-arrow-up-c|ion-asterisk|ion-at|ion-backspace|ion-backspace-outline|ion-bag|ion-battery-charging|ion-battery-empty|ion-battery-full|ion-battery-half|ion-battery-low|ion-beaker|ion-beer|ion-bluetooth|ion-bonfire|ion-bookmark|ion-bowtie|ion-briefcase|ion-bug|ion-calculator|ion-calendar|ion-camera|ion-card|ion-cash|ion-chatbox|ion-chatbox-working|ion-chatboxes|ion-chatbubble|ion-chatbubble-working|ion-chatbubbles|ion-checkmark|ion-checkmark-circled|ion-checkmark-round|ion-chevron-down|ion-chevron-left|ion-chevron-right|ion-chevron-up|ion-clipboard|ion-clock|ion-close|ion-close-circled|ion-close-round|ion-closed-captioning|ion-cloud|ion-code|ion-code-download|ion-code-working|ion-coffee|ion-compass|ion-compose|ion-connection-bars|ion-contrast|ion-crop|ion-cube|ion-disc|ion-document|ion-document-text|ion-drag|ion-earth|ion-easel|ion-edit|ion-egg|ion-eject|ion-email|ion-email-unread|ion-erlenmeyer-flask|ion-eye|ion-eye-disabled|ion-female|ion-filing|ion-film-marker|ion-fireball|ion-flag|ion-flame|ion-flash|ion-flash-off|ion-folder|ion-fork|ion-fork-repo|ion-forward|ion-funnel|ion-gear-a|ion-gear-b|ion-grid|ion-hammer|ion-happy|ion-happy-outline|ion-headphone|ion-heart|ion-heart-broken|ion-help|ion-help-buoy|ion-help-circled|ion-home|ion-icecream|ion-image|ion-images|ion-information-circled|ion-information|ion-ionic|ion-ios-alarm|ion-ios-alarm-outline|ion-ios-albums|ion-ios-albums-outline|ion-ios-americanfootball|ion-ios-americanfootball-outline|ion-ios-analytics|ion-ios-analytics-outline|ion-ios-arrow-back|ion-ios-arrow-down|ion-ios-arrow-forward|ion-ios-arrow-left|ion-ios-arrow-right|ion-ios-arrow-thin-down|ion-ios-arrow-thin-left|ion-ios-arrow-thin-right|ion-ios-arrow-thin-up|ion-ios-arrow-up|ion-ios-at|ion-ios-at-outline|ion-ios-barcode|ion-ios-barcode-outline|ion-ios-baseball|ion-ios-baseball-outline|ion-ios-basketball|ion-ios-basketball-outlinegt;|ion-ios-bell|ion-ios-bell-outline|ion-ios-body|ion-ios-body-outline|ion-ios-bolt|ion-ios-bolt-outline|ion-ios-book|ion-ios-book-outline|ion-ios-bookmarks|ion-ios-bookmarks-outline|ion-ios-box|ion-ios-box-outline|ion-ios-briefcase|ion-ios-briefcase-outline|ion-ios-browsers|ion-ios-browsers-outline|ion-ios-calculator|ion-ios-calculator-outline|ion-ios-calendar|ion-ios-calendar-outline|ion-ios-camera|ion-ios-camera-outline|ion-ios-cart|ion-ios-cart-outline|ion-ios-chatboxes|ion-ios-chatboxes-outline|ion-ios-chatbubble|ion-ios-chatbubble-outline|ion-ios-checkmark|ion-ios-checkmark-empty|ion-ios-checkmark-outline|ion-ios-circle-filled|ion-ios-circle-outline|ion-ios-clock|ion-ios-clock-outline|ion-ios-close|ion-ios-close-empty|ion-ios-close-outline|ion-ios-cloud|ion-ios-cloud-download|ion-ios-cloud-download-outline|ion-ios-cloud-outline|ion-ios-cloud-upload|ion-ios-cloud-upload-outline|ion-ios-cloudy|ion-ios-cloudy-night|ion-ios-cloudy-night-outline|ion-ios-cloudy-outline|ion-ios-cog|ion-ios-cog-outline|ion-ios-color-filter|ion-ios-color-filter-outline|ion-ios-color-wand|ion-ios-color-wand-outline|ion-ios-compose|ion-ios-compose-outline|ion-ios-copy|ion-ios-copy-outline|ion-ios-crop|ion-ios-crop-strong|ion-ios-download|ion-ios-download-outline|ion-ios-drag|ion-ios-email|ion-ios-email-outline|ion-ios-eye|ion-ios-eye-outline|ion-ios-fastforward|ion-ios-fastforward-outline|ion-ios-filing|ion-ios-filing-outline|ion-ios-film|ion-ios-film-outline|ion-ios-flag|ion-ios-flag-outline|ion-ios-flame|ion-ios-flame-outline|ion-ios-flask|ion-ios-flask-outline|ion-ios-flower|ion-ios-flower-outline|ion-ios-folder|ion-ios-folder-outline|ion-ios-football|ion-ios-football-outline|ion-ios-game-controller-a|ion-ios-game-controller-a-outline|ion-ios-game-controller-b|ion-ios-game-controller-b-outline|ion-ios-gear|ion-ios-gear-outline|ion-ios-glasses|ion-ios-glasses-outline|ion-ios-grid-view|ion-ios-grid-view-outline|ion-ios-heart|ion-ios-heart-outline|ion-ios-help|ion-ios-help-empty|ion-ios-help-outline|ion-ios-home|ion-ios-home-outline|ion-ios-infinite|ion-ios-infinite-outline|ion-ios-information-empty|ion-ios-information-outline|ion-ios-information|ion-ios-ionic-outline|ion-ios-keypad|ion-ios-keypad-outline|ion-ios-lightbulb|ion-ios-lightbulb-outline|ion-ios-list|ion-ios-list-outline|ion-ios-location-outline|ion-ios-location|ion-ios-locked|ion-ios-locked-outline|ion-ios-loop|ion-ios-loop-strong|ion-ios-medical|ion-ios-medical-outline|ion-ios-medkit|ion-ios-medkit-outline|ion-ios-mic|ion-ios-mic-off|ion-ios-mic-outline|ion-ios-minus|ion-ios-minus-empty|ion-ios-minus-outline|ion-ios-monitor|ion-ios-monitor-outline|ion-ios-moon|ion-ios-moon-outline|ion-ios-more|ion-ios-more-outline|ion-ios-musical-note|ion-ios-musical-notes|ion-ios-navigate|ion-ios-navigate-outline|ion-ios-nutrition-outline|ion-ios-nutrition|ion-ios-paper|ion-ios-paper-outline|ion-ios-paperplane|ion-ios-paperplane-outline|ion-ios-partlysunny|ion-ios-partlysunny-outline|ion-ios-pause|ion-ios-pause-outline|ion-ios-paw|ion-ios-paw-outline|ion-ios-people|ion-ios-people-outline|ion-ios-person|ion-ios-person-outline|ion-ios-personadd|ion-ios-personadd-outline|ion-ios-photos|ion-ios-photos-outline|ion-ios-pie|ion-ios-pie-outline|ion-ios-pint|ion-ios-pint-outline|ion-ios-play|ion-ios-play-outline|ion-ios-plus|ion-ios-plus-empty|ion-ios-plus-outline|ion-ios-pricetag|ion-ios-pricetag-outline|ion-ios-pricetags|ion-ios-pricetags-outline|ion-ios-printer|ion-ios-printer-outline|ion-ios-pulse|ion-ios-pulse-strong|ion-ios-rainy|ion-ios-rainy-outline|ion-ios-recording|ion-ios-recording-outline|ion-ios-redo|ion-ios-redo-outline|ion-ios-refresh|ion-ios-refresh-empty|ion-ios-refresh-outline|ion-ios-reload|ion-ios-reverse-camera|ion-ios-reverse-camera-outline|ion-ios-rewind|ion-ios-rewind-outline|ion-ios-rose|ion-ios-rose-outline|ion-ios-search|ion-ios-search-strong|ion-ios-settings|ion-ios-settings-strong|ion-ios-shuffle|ion-ios-shuffle-strong|ion-ios-skipbackward|ion-ios-skipbackward-outline|ion-ios-skipforward|ion-ios-skipforward-outline|ion-ios-snowy|ion-ios-speedometer|ion-ios-speedometer-outline|ion-ios-star|ion-ios-star-half|ion-ios-star-outline|ion-ios-stopwatch|ion-ios-stopwatch-outline|ion-ios-sunny|ion-ios-sunny-outline|ion-ios-telephone|ion-ios-telephone-outline|ion-ios-tennisball|ion-ios-tennisball-outline|ion-ios-thunderstorm|ion-ios-thunderstorm-outline|ion-ios-time|ion-ios-time-outline|ion-ios-timer|ion-ios-timer-outline|ion-ios-toggle|ion-ios-toggle-outline|ion-ios-trash|ion-ios-trash-outline|ion-ios-undo|ion-ios-undo-outline|ion-ios-unlocked|ion-ios-unlocked-outline|ion-ios-upload|ion-ios-upload-outline|ion-ios-videocam|ion-ios-videocam-outline|ion-ios-volume-high|ion-ios-volume-low|ion-ios-wineglass|ion-ios-wineglass-outline|ion-ios-world|ion-ios-world-outline|ion-ipad|ion-iphone|ion-ipod|ion-jet|ion-key|ion-knife|ion-laptop|ion-leaf|ion-levels|ion-lightbulb|ion-link|ion-load-a|ion-load-b|ion-load-c|ion-load-d|ion-location|ion-lock-combination|ion-locked|ion-log-in|ion-log-out|ion-loop|ion-magnet|ion-male|ion-man|ion-map|ion-medkit|ion-merge|ion-mic-a|ion-mic-b|ion-mic-c|ion-minus|ion-minus-circled|ion-minus-round|ion-model-s|ion-monitor|ion-more|ion-mouse|ion-music-note|ion-navicon|ion-navicon-round|ion-navigate|ion-network|ion-no-smoking|ion-nuclear|ion-outlet|ion-paintbrush|ion-paintbucket|ion-paper-airplane|ion-paperclip|ion-pause|ion-person|ion-person-add|ion-person-stalker|ion-pie-graph|ion-pin|ion-pinpoint|ion-pizza|ion-plane|ion-planet|ion-play|ion-playstation|ion-plus|ion-plus-circled|ion-plus-round|ion-podium|ion-pound|ion-power|ion-pricetag|ion-pricetags|ion-printer|ion-pull-request|ion-qr-scanner|ion-quote|ion-radio-waves|ion-record|ion-refresh|ion-reply|ion-reply-all|ion-ribbon-a|ion-ribbon-b|ion-sad|ion-sad-outline|ion-scissors|ion-search|ion-settings|ion-share|ion-shuffle|ion-skip-backward|ion-skip-forward|ion-social-android|ion-social-android-outline|ion-social-angular|ion-social-angular-outline|ion-social-apple|ion-social-apple-outline|ion-social-bitcoin|ion-social-bitcoin-outline|ion-social-buffer|ion-social-buffer-outline|ion-social-chrome|ion-social-chrome-outline|ion-social-codepen|ion-social-codepen-outline|ion-social-css3|ion-social-css3-outline|ion-social-designernews|ion-social-designernews-outline|ion-social-dribbble|ion-social-dribbble-outline|ion-social-dropbox|ion-social-dropbox-outline|ion-social-euro|ion-social-euro-outline|ion-social-facebook|ion-social-facebook-outline|ion-social-foursquare|ion-social-foursquare-outline|ion-social-freebsd-devil|ion-social-github|ion-social-github-outline|ion-social-google|ion-social-google-outline|ion-social-googleplus|ion-social-googleplus-outline|ion-social-hackernews|ion-social-hackernews-outline|ion-social-html5|ion-social-html5-outline|ion-social-instagram|ion-social-instagram-outline|ion-social-javascript|ion-social-javascript-outline|ion-social-linkedin|ion-social-linkedin-outline|ion-social-markdown|ion-social-nodejs|ion-social-octocat|ion-social-pinterest|ion-social-pinterest-outline|ion-social-python|ion-social-reddit|ion-social-reddit-outline|ion-social-rss|ion-social-rss-outline|ion-social-sass|ion-social-skype|ion-social-skype-outline|ion-social-snapchat|ion-social-snapchat-outline|ion-social-tumblr|ion-social-tumblr-outline|ion-social-tux|ion-social-twitch|ion-social-twitch-outline|ion-social-twitter|ion-social-twitter-outline|ion-social-usd|ion-social-usd-outline|ion-social-vimeo|ion-social-vimeo-outline|ion-social-whatsapp|ion-social-whatsapp-outline|ion-social-windows|ion-social-windows-outline|ion-social-wordpress|ion-social-wordpress-outline|ion-social-yahoo|ion-social-yahoo-outline|ion-social-yen|ion-social-yen-outline|ion-social-youtube|ion-social-youtube-outline|ion-soup-can|ion-soup-can-outline|ion-speakerphone|ion-speedometer|ion-spoon|ion-star|ion-stats-bars|ion-steam|ion-stop|ion-thermometer|ion-thumbsdown|ion-thumbsup|ion-toggle|ion-toggle-filled|ion-transgender|ion-trash-a|ion-trash-b|ion-trophy|ion-tshirt|ion-tshirt-outline|ion-umbrella|ion-university|ion-unlocked|ion-upload|ion-usb|ion-videocamera|ion-volume-high|ion-volume-low|ion-volume-medium|ion-volume-mute|ion-wand|ion-waterdrop|ion-wifi|ion-wineglass|ion-woman|ion-wrench|ion-xbox @values {{dinamicMenu.iconWeb.NONE}}|{{dinamicMenu.iconMobile.alert}}|{{dinamicMenu.iconMobile.alert_circled}}|{{dinamicMenu.iconMobile.android_add}}|{{dinamicMenu.iconMobile.android_add_circle}}|{{dinamicMenu.iconMobile.android_alarm_clock}}|{{dinamicMenu.iconMobile.android_alert}}|{{dinamicMenu.iconMobile.android_apps}}|{{dinamicMenu.iconMobile.android_archive}}|{{dinamicMenu.iconMobile.android_arrow_back}}|{{dinamicMenu.iconMobile.android_arrow_down}}|{{dinamicMenu.iconMobile.android_arrow_dropdown}}|{{dinamicMenu.iconMobile.android_arrow_dropdown_circle}}|{{dinamicMenu.iconMobile.android_arrow_dropleft}}|{{dinamicMenu.iconMobile.android_arrow_dropleft_circle}}|{{dinamicMenu.iconMobile.android_arrow_dropright}}|{{dinamicMenu.iconMobile.android_arrow_dropright_circle}}|{{dinamicMenu.iconMobile.android_arrow_dropup}}|{{dinamicMenu.iconMobile.android_arrow_dropup_circle}}|{{dinamicMenu.iconMobile.android_arrow_forward}}|{{dinamicMenu.iconMobile.android_arrow_up}}|{{dinamicMenu.iconMobile.android_attach}}|{{dinamicMenu.iconMobile.android_bar}}|{{dinamicMenu.iconMobile.android_bicycle}}|{{dinamicMenu.iconMobile.android_boat}}|{{dinamicMenu.iconMobile.android_bookmark}}|{{dinamicMenu.iconMobile.android_bulb}}|{{dinamicMenu.iconMobile.android_bus}}|{{dinamicMenu.iconMobile.android_calendar}}|{{dinamicMenu.iconMobile.android_call}}|{{dinamicMenu.iconMobile.android_camera}}|{{dinamicMenu.iconMobile.android_cancel}}|{{dinamicMenu.iconMobile.android_car}}|{{dinamicMenu.iconMobile.android_cart}}|{{dinamicMenu.iconMobile.android_chat}}|{{dinamicMenu.iconMobile.android_checkbox}}|{{dinamicMenu.iconMobile.android_checkbox_blank}}|{{dinamicMenu.iconMobile.android_checkbox_outline}}|{{dinamicMenu.iconMobile.android_checkbox_outline_blank}}|{{dinamicMenu.iconMobile.android_checkmark_circle}}|{{dinamicMenu.iconMobile.android_clipboard}}|{{dinamicMenu.iconMobile.android_close}}|{{dinamicMenu.iconMobile.android_cloud}}|{{dinamicMenu.iconMobile.android_cloud_circle}}|{{dinamicMenu.iconMobile.android_cloud_done}}|{{dinamicMenu.iconMobile.android_cloud_outline}}|{{dinamicMenu.iconMobile.android_color_palette}}|{{dinamicMenu.iconMobile.android_compass}}|{{dinamicMenu.iconMobile.android_contact}}|{{dinamicMenu.iconMobile.android_contacts}}|{{dinamicMenu.iconMobile.android_contract}}|{{dinamicMenu.iconMobile.android_create}}|{{dinamicMenu.iconMobile.android_delete}}|{{dinamicMenu.iconMobile.android_desktop}}|{{dinamicMenu.iconMobile.android_document}}|{{dinamicMenu.iconMobile.android_done}}|{{dinamicMenu.iconMobile.android_done_all}}|{{dinamicMenu.iconMobile.android_download}}|{{dinamicMenu.iconMobile.android_drafts}}|{{dinamicMenu.iconMobile.android_exit}}|{{dinamicMenu.iconMobile.android_expand}}|{{dinamicMenu.iconMobile.android_favorite}}|{{dinamicMenu.iconMobile.android_favorite_outline}}|{{dinamicMenu.iconMobile.android_film}}|{{dinamicMenu.iconMobile.android_folder}}|{{dinamicMenu.iconMobile.android_folder_open}}|{{dinamicMenu.iconMobile.android_funnel}}|{{dinamicMenu.iconMobile.android_globe}}|{{dinamicMenu.iconMobile.android_hand}}|{{dinamicMenu.iconMobile.android_hangout}}|{{dinamicMenu.iconMobile.android_happy}}|{{dinamicMenu.iconMobile.android_home}}|{{dinamicMenu.iconMobile.android_image}}|{{dinamicMenu.iconMobile.android_laptop}}|{{dinamicMenu.iconMobile.android_list}}|{{dinamicMenu.iconMobile.android_locate}}|{{dinamicMenu.iconMobile.android_lock}}|{{dinamicMenu.iconMobile.android_mail}}|{{dinamicMenu.iconMobile.android_map}}|{{dinamicMenu.iconMobile.android_menu}}|{{dinamicMenu.iconMobile.android_microphone}}|{{dinamicMenu.iconMobile.android_microphone_off}}|{{dinamicMenu.iconMobile.android_more_horizontal}}|{{dinamicMenu.iconMobile.android_more_vertical}}|{{dinamicMenu.iconMobile.android_navigate}}|{{dinamicMenu.iconMobile.android_notifications}}|{{dinamicMenu.iconMobile.android_notifications_none}}|{{dinamicMenu.iconMobile.android_notifications_off}}|{{dinamicMenu.iconMobile.android_open}}|{{dinamicMenu.iconMobile.android_options}}|{{dinamicMenu.iconMobile.android_people}}|{{dinamicMenu.iconMobile.android_person}}|{{dinamicMenu.iconMobile.android_person_add}}|{{dinamicMenu.iconMobile.android_phone_landscape}}|{{dinamicMenu.iconMobile.android_phone_portrait}}|{{dinamicMenu.iconMobile.android_pin}}|{{dinamicMenu.iconMobile.android_plane}}|{{dinamicMenu.iconMobile.android_playstore}}|{{dinamicMenu.iconMobile.android_print}}|{{dinamicMenu.iconMobile.android_radio_button_off}}|{{dinamicMenu.iconMobile.android_radio_button_on}}|{{dinamicMenu.iconMobile.android_refresh}}|{{dinamicMenu.iconMobile.android_remove}}|{{dinamicMenu.iconMobile.android_remove_circle}}|{{dinamicMenu.iconMobile.android_restaurant}}|{{dinamicMenu.iconMobile.android_sad}}|{{dinamicMenu.iconMobile.android_search}}|{{dinamicMenu.iconMobile.android_send}}|{{dinamicMenu.iconMobile.android_settings}}|{{dinamicMenu.iconMobile.android_share}}|{{dinamicMenu.iconMobile.android_share_alt}}|{{dinamicMenu.iconMobile.android_star}}|{{dinamicMenu.iconMobile.android_star_half}}|{{dinamicMenu.iconMobile.android_star_outline}}|{{dinamicMenu.iconMobile.android_stopwatch}}|{{dinamicMenu.iconMobile.android_subway}}|{{dinamicMenu.iconMobile.android_sunny}}|{{dinamicMenu.iconMobile.android_sync}}|{{dinamicMenu.iconMobile.android_textsms}}|{{dinamicMenu.iconMobile.android_time}}|{{dinamicMenu.iconMobile.android_train}}|{{dinamicMenu.iconMobile.android_unlock}}|{{dinamicMenu.iconMobile.android_upload}}|{{dinamicMenu.iconMobile.android_volume_down}}|{{dinamicMenu.iconMobile.android_volume_mute}}|{{dinamicMenu.iconMobile.android_volume_off}}|{{dinamicMenu.iconMobile.android_volume_up}}|{{dinamicMenu.iconMobile.android_walk}}|{{dinamicMenu.iconMobile.android_warning}}|{{dinamicMenu.iconMobile.android_watch}}|{{dinamicMenu.iconMobile.android_wifi}}|{{dinamicMenu.iconMobile.aperture}}|{{dinamicMenu.iconMobile.archive}}|{{dinamicMenu.iconMobile.arrow_down_a}}|{{dinamicMenu.iconMobile.arrow_down_b}}|{{dinamicMenu.iconMobile.arrow_down_c}}|{{dinamicMenu.iconMobile.arrow_expand}}|{{dinamicMenu.iconMobile.arrow_graph_down_left}}|{{dinamicMenu.iconMobile.arrow_graph_down_right}}|{{dinamicMenu.iconMobile.arrow_graph_up_left}}|{{dinamicMenu.iconMobile.arrow_graph_up_right}}|{{dinamicMenu.iconMobile.arrow_left_a}}|{{dinamicMenu.iconMobile.arrow_left_b}}|{{dinamicMenu.iconMobile.arrow_left_c}}|{{dinamicMenu.iconMobile.arrow_move}}|{{dinamicMenu.iconMobile.arrow_resize}}|{{dinamicMenu.iconMobile.arrow_return_left}}|{{dinamicMenu.iconMobile.arrow_return_right}}|{{dinamicMenu.iconMobile.arrow_right_a}}|{{dinamicMenu.iconMobile.arrow_right_b}}|{{dinamicMenu.iconMobile.arrow_right_c}}|{{dinamicMenu.iconMobile.arrow_shrink}}|{{dinamicMenu.iconMobile.arrow_swap}}|{{dinamicMenu.iconMobile.arrow_up_a}}|{{dinamicMenu.iconMobile.arrow_up_b}}|{{dinamicMenu.iconMobile.arrow_up_c}}|{{dinamicMenu.iconMobile.asterisk}}|{{dinamicMenu.iconMobile.at}}|{{dinamicMenu.iconMobile.backspace}}|{{dinamicMenu.iconMobile.backspace_outline}}|{{dinamicMenu.iconMobile.bag}}|{{dinamicMenu.iconMobile.battery_charging}}|{{dinamicMenu.iconMobile.battery_empty}}|{{dinamicMenu.iconMobile.battery_full}}|{{dinamicMenu.iconMobile.battery_half}}|{{dinamicMenu.iconMobile.battery_low}}|{{dinamicMenu.iconMobile.beaker}}|{{dinamicMenu.iconMobile.beer}}|{{dinamicMenu.iconMobile.bluetooth}}|{{dinamicMenu.iconMobile.bonfire}}|{{dinamicMenu.iconMobile.bookmark}}|{{dinamicMenu.iconMobile.bowtie}}|{{dinamicMenu.iconMobile.briefcase}}|{{dinamicMenu.iconMobile.bug}}|{{dinamicMenu.iconMobile.calculator}}|{{dinamicMenu.iconMobile.calendar}}|{{dinamicMenu.iconMobile.camera}}|{{dinamicMenu.iconMobile.card}}|{{dinamicMenu.iconMobile.cash}}|{{dinamicMenu.iconMobile.chatbox}}|{{dinamicMenu.iconMobile.chatbox_working}}|{{dinamicMenu.iconMobile.chatboxes}}|{{dinamicMenu.iconMobile.chatbubble}}|{{dinamicMenu.iconMobile.chatbubble_working}}|{{dinamicMenu.iconMobile.chatbubbles}}|{{dinamicMenu.iconMobile.checkmark}}|{{dinamicMenu.iconMobile.checkmark_circled}}|{{dinamicMenu.iconMobile.checkmark_round}}|{{dinamicMenu.iconMobile.chevron_down}}|{{dinamicMenu.iconMobile.chevron_left}}|{{dinamicMenu.iconMobile.chevron_right}}|{{dinamicMenu.iconMobile.chevron_up}}|{{dinamicMenu.iconMobile.clipboard}}|{{dinamicMenu.iconMobile.clock}}|{{dinamicMenu.iconMobile.close}}|{{dinamicMenu.iconMobile.close_circled}}|{{dinamicMenu.iconMobile.close_round}}|{{dinamicMenu.iconMobile.closed_captioning}}|{{dinamicMenu.iconMobile.cloud}}|{{dinamicMenu.iconMobile.code}}|{{dinamicMenu.iconMobile.code_download}}|{{dinamicMenu.iconMobile.code_working}}|{{dinamicMenu.iconMobile.coffee}}|{{dinamicMenu.iconMobile.compass}}|{{dinamicMenu.iconMobile.compose}}|{{dinamicMenu.iconMobile.connectbars}}|{{dinamicMenu.iconMobile.contrast}}|{{dinamicMenu.iconMobile.crop}}|{{dinamicMenu.iconMobile.cube}}|{{dinamicMenu.iconMobile.disc}}|{{dinamicMenu.iconMobile.document}}|{{dinamicMenu.iconMobile.document_text}}|{{dinamicMenu.iconMobile.drag}}|{{dinamicMenu.iconMobile.earth}}|{{dinamicMenu.iconMobile.easel}}|{{dinamicMenu.iconMobile.edit}}|{{dinamicMenu.iconMobile.egg}}|{{dinamicMenu.iconMobile.eject}}|{{dinamicMenu.iconMobile.email}}|{{dinamicMenu.iconMobile.email_unread}}|{{dinamicMenu.iconMobile.erlenmeyer_flask}}|{{dinamicMenu.iconMobile.eye}}|{{dinamicMenu.iconMobile.eye_disabled}}|{{dinamicMenu.iconMobile.female}}|{{dinamicMenu.iconMobile.filing}}|{{dinamicMenu.iconMobile.film_marker}}|{{dinamicMenu.iconMobile.fireball}}|{{dinamicMenu.iconMobile.flag}}|{{dinamicMenu.iconMobile.flame}}|{{dinamicMenu.iconMobile.flash}}|{{dinamicMenu.iconMobile.flash_off}}|{{dinamicMenu.iconMobile.folder}}|{{dinamicMenu.iconMobile.fork}}|{{dinamicMenu.iconMobile.fork_repo}}|{{dinamicMenu.iconMobile.forward}}|{{dinamicMenu.iconMobile.funnel}}|{{dinamicMenu.iconMobile.gear_a}}|{{dinamicMenu.iconMobile.gear_b}}|{{dinamicMenu.iconMobile.grid}}|{{dinamicMenu.iconMobile.hammer}}|{{dinamicMenu.iconMobile.happy}}|{{dinamicMenu.iconMobile.happy_outline}}|{{dinamicMenu.iconMobile.headphone}}|{{dinamicMenu.iconMobile.heart}}|{{dinamicMenu.iconMobile.heart_broken}}|{{dinamicMenu.iconMobile.help}}|{{dinamicMenu.iconMobile.help_buoy}}|{{dinamicMenu.iconMobile.help_circled}}|{{dinamicMenu.iconMobile.home}}|{{dinamicMenu.iconMobile.icecream}}|{{dinamicMenu.iconMobile.image}}|{{dinamicMenu.iconMobile.images}}|{{dinamicMenu.iconMobile.informatcircled}}|{{dinamicMenu.iconMobile.information}}|{{dinamicMenu.iconMobile.ionic}}|{{dinamicMenu.iconMobile.ios_alarm}}|{{dinamicMenu.iconMobile.ios_alarm_outline}}|{{dinamicMenu.iconMobile.ios_albums}}|{{dinamicMenu.iconMobile.ios_albums_outline}}|{{dinamicMenu.iconMobile.ios_americanfootball}}|{{dinamicMenu.iconMobile.ios_americanfootball_outline}}|{{dinamicMenu.iconMobile.ios_analytics}}|{{dinamicMenu.iconMobile.ios_analytics_outline}}|{{dinamicMenu.iconMobile.ios_arrow_back}}|{{dinamicMenu.iconMobile.ios_arrow_down}}|{{dinamicMenu.iconMobile.ios_arrow_forward}}|{{dinamicMenu.iconMobile.ios_arrow_left}}|{{dinamicMenu.iconMobile.ios_arrow_right}}|{{dinamicMenu.iconMobile.ios_arrow_thin_down}}|{{dinamicMenu.iconMobile.ios_arrow_thin_left}}|{{dinamicMenu.iconMobile.ios_arrow_thin_right}}|{{dinamicMenu.iconMobile.ios_arrow_thin_up}}|{{dinamicMenu.iconMobile.ios_arrow_up}}|{{dinamicMenu.iconMobile.ios_at}}|{{dinamicMenu.iconMobile.ios_at_outline}}|{{dinamicMenu.iconMobile.ios_barcode}}|{{dinamicMenu.iconMobile.ios_barcode_outline}}|{{dinamicMenu.iconMobile.ios_baseball}}|{{dinamicMenu.iconMobile.ios_baseball_outline}}|{{dinamicMenu.iconMobile.ios_basketball}}|{{dinamicMenu.iconMobile.ios_basketball_outlinegt;}}|{{dinamicMenu.iconMobile.ios_bell}}|{{dinamicMenu.iconMobile.ios_bell_outline}}|{{dinamicMenu.iconMobile.ios_body}}|{{dinamicMenu.iconMobile.ios_body_outline}}|{{dinamicMenu.iconMobile.ios_bolt}}|{{dinamicMenu.iconMobile.ios_bolt_outline}}|{{dinamicMenu.iconMobile.ios_book}}|{{dinamicMenu.iconMobile.ios_book_outline}}|{{dinamicMenu.iconMobile.ios_bookmarks}}|{{dinamicMenu.iconMobile.ios_bookmarks_outline}}|{{dinamicMenu.iconMobile.ios_box}}|{{dinamicMenu.iconMobile.ios_box_outline}}|{{dinamicMenu.iconMobile.ios_briefcase}}|{{dinamicMenu.iconMobile.ios_briefcase_outline}}|{{dinamicMenu.iconMobile.ios_browsers}}|{{dinamicMenu.iconMobile.ios_browsers_outline}}|{{dinamicMenu.iconMobile.ios_calculator}}|{{dinamicMenu.iconMobile.ios_calculator_outline}}|{{dinamicMenu.iconMobile.ios_calendar}}|{{dinamicMenu.iconMobile.ios_calendar_outline}}|{{dinamicMenu.iconMobile.ios_camera}}|{{dinamicMenu.iconMobile.ios_camera_outline}}|{{dinamicMenu.iconMobile.ios_cart}}|{{dinamicMenu.iconMobile.ios_cart_outline}}|{{dinamicMenu.iconMobile.ios_chatboxes}}|{{dinamicMenu.iconMobile.ios_chatboxes_outline}}|{{dinamicMenu.iconMobile.ios_chatbubble}}|{{dinamicMenu.iconMobile.ios_chatbubble_outline}}|{{dinamicMenu.iconMobile.ios_checkmark}}|{{dinamicMenu.iconMobile.ios_checkmark_empty}}|{{dinamicMenu.iconMobile.ios_checkmark_outline}}|{{dinamicMenu.iconMobile.ios_circle_filled}}|{{dinamicMenu.iconMobile.ios_circle_outline}}|{{dinamicMenu.iconMobile.ios_clock}}|{{dinamicMenu.iconMobile.ios_clock_outline}}|{{dinamicMenu.iconMobile.ios_close}}|{{dinamicMenu.iconMobile.ios_close_empty}}|{{dinamicMenu.iconMobile.ios_close_outline}}|{{dinamicMenu.iconMobile.ios_cloud}}|{{dinamicMenu.iconMobile.ios_cloud_download}}|{{dinamicMenu.iconMobile.ios_cloud_download_outline}}|{{dinamicMenu.iconMobile.ios_cloud_outline}}|{{dinamicMenu.iconMobile.ios_cloud_upload}}|{{dinamicMenu.iconMobile.ios_cloud_upload_outline}}|{{dinamicMenu.iconMobile.ios_cloudy}}|{{dinamicMenu.iconMobile.ios_cloudy_night}}|{{dinamicMenu.iconMobile.ios_cloudy_night_outline}}|{{dinamicMenu.iconMobile.ios_cloudy_outline}}|{{dinamicMenu.iconMobile.ios_cog}}|{{dinamicMenu.iconMobile.ios_cog_outline}}|{{dinamicMenu.iconMobile.ios_color_filter}}|{{dinamicMenu.iconMobile.ios_color_filter_outline}}|{{dinamicMenu.iconMobile.ios_color_wand}}|{{dinamicMenu.iconMobile.ios_color_wand_outline}}|{{dinamicMenu.iconMobile.ios_compose}}|{{dinamicMenu.iconMobile.ios_compose_outline}}|{{dinamicMenu.iconMobile.ios_copy}}|{{dinamicMenu.iconMobile.ios_copy_outline}}|{{dinamicMenu.iconMobile.ios_crop}}|{{dinamicMenu.iconMobile.ios_crop_strong}}|{{dinamicMenu.iconMobile.ios_download}}|{{dinamicMenu.iconMobile.ios_download_outline}}|{{dinamicMenu.iconMobile.ios_drag}}|{{dinamicMenu.iconMobile.ios_email}}|{{dinamicMenu.iconMobile.ios_email_outline}}|{{dinamicMenu.iconMobile.ios_eye}}|{{dinamicMenu.iconMobile.ios_eye_outline}}|{{dinamicMenu.iconMobile.ios_fastforward}}|{{dinamicMenu.iconMobile.ios_fastforward_outline}}|{{dinamicMenu.iconMobile.ios_filing}}|{{dinamicMenu.iconMobile.ios_filing_outline}}|{{dinamicMenu.iconMobile.ios_film}}|{{dinamicMenu.iconMobile.ios_film_outline}}|{{dinamicMenu.iconMobile.ios_flag}}|{{dinamicMenu.iconMobile.ios_flag_outline}}|{{dinamicMenu.iconMobile.ios_flame}}|{{dinamicMenu.iconMobile.ios_flame_outline}}|{{dinamicMenu.iconMobile.ios_flask}}|{{dinamicMenu.iconMobile.ios_flask_outline}}|{{dinamicMenu.iconMobile.ios_flower}}|{{dinamicMenu.iconMobile.ios_flower_outline}}|{{dinamicMenu.iconMobile.ios_folder}}|{{dinamicMenu.iconMobile.ios_folder_outline}}|{{dinamicMenu.iconMobile.ios_football}}|{{dinamicMenu.iconMobile.ios_football_outline}}|{{dinamicMenu.iconMobile.ios_game_controller_a}}|{{dinamicMenu.iconMobile.ios_game_controller_a_outline}}|{{dinamicMenu.iconMobile.ios_game_controller_b}}|{{dinamicMenu.iconMobile.ios_game_controller_b_outline}}|{{dinamicMenu.iconMobile.ios_gear}}|{{dinamicMenu.iconMobile.ios_gear_outline}}|{{dinamicMenu.iconMobile.ios_glasses}}|{{dinamicMenu.iconMobile.ios_glasses_outline}}|{{dinamicMenu.iconMobile.ios_grid_view}}|{{dinamicMenu.iconMobile.ios_grid_view_outline}}|{{dinamicMenu.iconMobile.ios_heart}}|{{dinamicMenu.iconMobile.ios_heart_outline}}|{{dinamicMenu.iconMobile.ios_help}}|{{dinamicMenu.iconMobile.ios_help_empty}}|{{dinamicMenu.iconMobile.ios_help_outline}}|{{dinamicMenu.iconMobile.ios_home}}|{{dinamicMenu.iconMobile.ios_home_outline}}|{{dinamicMenu.iconMobile.ios_infinite}}|{{dinamicMenu.iconMobile.ios_infinite_outline}}|{{dinamicMenu.iconMobile.ios_informatempty}}|{{dinamicMenu.iconMobile.ios_informatoutline}}|{{dinamicMenu.iconMobile.ios_information}}|{{dinamicMenu.iconMobile.ios_ionic_outline}}|{{dinamicMenu.iconMobile.ios_keypad}}|{{dinamicMenu.iconMobile.ios_keypad_outline}}|{{dinamicMenu.iconMobile.ios_lightbulb}}|{{dinamicMenu.iconMobile.ios_lightbulb_outline}}|{{dinamicMenu.iconMobile.ios_list}}|{{dinamicMenu.iconMobile.ios_list_outline}}|{{dinamicMenu.iconMobile.ios_locatoutline}}|{{dinamicMenu.iconMobile.ios_location}}|{{dinamicMenu.iconMobile.ios_locked}}|{{dinamicMenu.iconMobile.ios_locked_outline}}|{{dinamicMenu.iconMobile.ios_loop}}|{{dinamicMenu.iconMobile.ios_loop_strong}}|{{dinamicMenu.iconMobile.ios_medical}}|{{dinamicMenu.iconMobile.ios_medical_outline}}|{{dinamicMenu.iconMobile.ios_medkit}}|{{dinamicMenu.iconMobile.ios_medkit_outline}}|{{dinamicMenu.iconMobile.ios_mic}}|{{dinamicMenu.iconMobile.ios_mic_off}}|{{dinamicMenu.iconMobile.ios_mic_outline}}|{{dinamicMenu.iconMobile.ios_minus}}|{{dinamicMenu.iconMobile.ios_minus_empty}}|{{dinamicMenu.iconMobile.ios_minus_outline}}|{{dinamicMenu.iconMobile.ios_monitor}}|{{dinamicMenu.iconMobile.ios_monitor_outline}}|{{dinamicMenu.iconMobile.ios_moon}}|{{dinamicMenu.iconMobile.ios_moon_outline}}|{{dinamicMenu.iconMobile.ios_more}}|{{dinamicMenu.iconMobile.ios_more_outline}}|{{dinamicMenu.iconMobile.ios_musical_note}}|{{dinamicMenu.iconMobile.ios_musical_notes}}|{{dinamicMenu.iconMobile.ios_navigate}}|{{dinamicMenu.iconMobile.ios_navigate_outline}}|{{dinamicMenu.iconMobile.ios_nutritoutline}}|{{dinamicMenu.iconMobile.ios_nutrition}}|{{dinamicMenu.iconMobile.ios_paper}}|{{dinamicMenu.iconMobile.ios_paper_outline}}|{{dinamicMenu.iconMobile.ios_paperplane}}|{{dinamicMenu.iconMobile.ios_paperplane_outline}}|{{dinamicMenu.iconMobile.ios_partlysunny}}|{{dinamicMenu.iconMobile.ios_partlysunny_outline}}|{{dinamicMenu.iconMobile.ios_pause}}|{{dinamicMenu.iconMobile.ios_pause_outline}}|{{dinamicMenu.iconMobile.ios_paw}}|{{dinamicMenu.iconMobile.ios_paw_outline}}|{{dinamicMenu.iconMobile.ios_people}}|{{dinamicMenu.iconMobile.ios_people_outline}}|{{dinamicMenu.iconMobile.ios_person}}|{{dinamicMenu.iconMobile.ios_person_outline}}|{{dinamicMenu.iconMobile.ios_personadd}}|{{dinamicMenu.iconMobile.ios_personadd_outline}}|{{dinamicMenu.iconMobile.ios_photos}}|{{dinamicMenu.iconMobile.ios_photos_outline}}|{{dinamicMenu.iconMobile.ios_pie}}|{{dinamicMenu.iconMobile.ios_pie_outline}}|{{dinamicMenu.iconMobile.ios_pint}}|{{dinamicMenu.iconMobile.ios_pint_outline}}|{{dinamicMenu.iconMobile.ios_play}}|{{dinamicMenu.iconMobile.ios_play_outline}}|{{dinamicMenu.iconMobile.ios_plus}}|{{dinamicMenu.iconMobile.ios_plus_empty}}|{{dinamicMenu.iconMobile.ios_plus_outline}}|{{dinamicMenu.iconMobile.ios_pricetag}}|{{dinamicMenu.iconMobile.ios_pricetag_outline}}|{{dinamicMenu.iconMobile.ios_pricetags}}|{{dinamicMenu.iconMobile.ios_pricetags_outline}}|{{dinamicMenu.iconMobile.ios_printer}}|{{dinamicMenu.iconMobile.ios_printer_outline}}|{{dinamicMenu.iconMobile.ios_pulse}}|{{dinamicMenu.iconMobile.ios_pulse_strong}}|{{dinamicMenu.iconMobile.ios_rainy}}|{{dinamicMenu.iconMobile.ios_rainy_outline}}|{{dinamicMenu.iconMobile.ios_recording}}|{{dinamicMenu.iconMobile.ios_recording_outline}}|{{dinamicMenu.iconMobile.ios_redo}}|{{dinamicMenu.iconMobile.ios_redo_outline}}|{{dinamicMenu.iconMobile.ios_refresh}}|{{dinamicMenu.iconMobile.ios_refresh_empty}}|{{dinamicMenu.iconMobile.ios_refresh_outline}}|{{dinamicMenu.iconMobile.ios_reload}}|{{dinamicMenu.iconMobile.ios_reverse_camera}}|{{dinamicMenu.iconMobile.ios_reverse_camera_outline}}|{{dinamicMenu.iconMobile.ios_rewind}}|{{dinamicMenu.iconMobile.ios_rewind_outline}}|{{dinamicMenu.iconMobile.ios_rose}}|{{dinamicMenu.iconMobile.ios_rose_outline}}|{{dinamicMenu.iconMobile.ios_search}}|{{dinamicMenu.iconMobile.ios_search_strong}}|{{dinamicMenu.iconMobile.ios_settings}}|{{dinamicMenu.iconMobile.ios_settings_strong}}|{{dinamicMenu.iconMobile.ios_shuffle}}|{{dinamicMenu.iconMobile.ios_shuffle_strong}}|{{dinamicMenu.iconMobile.ios_skipbackward}}|{{dinamicMenu.iconMobile.ios_skipbackward_outline}}|{{dinamicMenu.iconMobile.ios_skipforward}}|{{dinamicMenu.iconMobile.ios_skipforward_outline}}|{{dinamicMenu.iconMobile.ios_snowy}}|{{dinamicMenu.iconMobile.ios_speedometer}}|{{dinamicMenu.iconMobile.ios_speedometer_outline}}|{{dinamicMenu.iconMobile.ios_star}}|{{dinamicMenu.iconMobile.ios_star_half}}|{{dinamicMenu.iconMobile.ios_star_outline}}|{{dinamicMenu.iconMobile.ios_stopwatch}}|{{dinamicMenu.iconMobile.ios_stopwatch_outline}}|{{dinamicMenu.iconMobile.ios_sunny}}|{{dinamicMenu.iconMobile.ios_sunny_outline}}|{{dinamicMenu.iconMobile.ios_telephone}}|{{dinamicMenu.iconMobile.ios_telephone_outline}}|{{dinamicMenu.iconMobile.ios_tennisball}}|{{dinamicMenu.iconMobile.ios_tennisball_outline}}|{{dinamicMenu.iconMobile.ios_thunderstorm}}|{{dinamicMenu.iconMobile.ios_thunderstorm_outline}}|{{dinamicMenu.iconMobile.ios_time}}|{{dinamicMenu.iconMobile.ios_time_outline}}|{{dinamicMenu.iconMobile.ios_timer}}|{{dinamicMenu.iconMobile.ios_timer_outline}}|{{dinamicMenu.iconMobile.ios_toggle}}|{{dinamicMenu.iconMobile.ios_toggle_outline}}|{{dinamicMenu.iconMobile.ios_trash}}|{{dinamicMenu.iconMobile.ios_trash_outline}}|{{dinamicMenu.iconMobile.ios_undo}}|{{dinamicMenu.iconMobile.ios_undo_outline}}|{{dinamicMenu.iconMobile.ios_unlocked}}|{{dinamicMenu.iconMobile.ios_unlocked_outline}}|{{dinamicMenu.iconMobile.ios_upload}}|{{dinamicMenu.iconMobile.ios_upload_outline}}|{{dinamicMenu.iconMobile.ios_videocam}}|{{dinamicMenu.iconMobile.ios_videocam_outline}}|{{dinamicMenu.iconMobile.ios_volume_high}}|{{dinamicMenu.iconMobile.ios_volume_low}}|{{dinamicMenu.iconMobile.ios_wineglass}}|{{dinamicMenu.iconMobile.ios_wineglass_outline}}|{{dinamicMenu.iconMobile.ios_world}}|{{dinamicMenu.iconMobile.ios_world_outline}}|{{dinamicMenu.iconMobile.ipad}}|{{dinamicMenu.iconMobile.iphone}}|{{dinamicMenu.iconMobile.ipod}}|{{dinamicMenu.iconMobile.jet}}|{{dinamicMenu.iconMobile.key}}|{{dinamicMenu.iconMobile.knife}}|{{dinamicMenu.iconMobile.laptop}}|{{dinamicMenu.iconMobile.leaf}}|{{dinamicMenu.iconMobile.levels}}|{{dinamicMenu.iconMobile.lightbulb}}|{{dinamicMenu.iconMobile.link}}|{{dinamicMenu.iconMobile.load_a}}|{{dinamicMenu.iconMobile.load_b}}|{{dinamicMenu.iconMobile.load_c}}|{{dinamicMenu.iconMobile.load_d}}|{{dinamicMenu.iconMobile.location}}|{{dinamicMenu.iconMobile.lock_combination}}|{{dinamicMenu.iconMobile.locked}}|{{dinamicMenu.iconMobile.log_in}}|{{dinamicMenu.iconMobile.log_out}}|{{dinamicMenu.iconMobile.loop}}|{{dinamicMenu.iconMobile.magnet}}|{{dinamicMenu.iconMobile.male}}|{{dinamicMenu.iconMobile.man}}|{{dinamicMenu.iconMobile.map}}|{{dinamicMenu.iconMobile.medkit}}|{{dinamicMenu.iconMobile.merge}}|{{dinamicMenu.iconMobile.mic_a}}|{{dinamicMenu.iconMobile.mic_b}}|{{dinamicMenu.iconMobile.mic_c}}|{{dinamicMenu.iconMobile.minus}}|{{dinamicMenu.iconMobile.minus_circled}}|{{dinamicMenu.iconMobile.minus_round}}|{{dinamicMenu.iconMobile.model_s}}|{{dinamicMenu.iconMobile.monitor}}|{{dinamicMenu.iconMobile.more}}|{{dinamicMenu.iconMobile.mouse}}|{{dinamicMenu.iconMobile.music_note}}|{{dinamicMenu.iconMobile.navicon}}|{{dinamicMenu.iconMobile.navicon_round}}|{{dinamicMenu.iconMobile.navigate}}|{{dinamicMenu.iconMobile.network}}|{{dinamicMenu.iconMobile.no_smoking}}|{{dinamicMenu.iconMobile.nuclear}}|{{dinamicMenu.iconMobile.outlet}}|{{dinamicMenu.iconMobile.paintbrush}}|{{dinamicMenu.iconMobile.paintbucket}}|{{dinamicMenu.iconMobile.paper_airplane}}|{{dinamicMenu.iconMobile.paperclip}}|{{dinamicMenu.iconMobile.pause}}|{{dinamicMenu.iconMobile.person}}|{{dinamicMenu.iconMobile.person_add}}|{{dinamicMenu.iconMobile.person_stalker}}|{{dinamicMenu.iconMobile.pie_graph}}|{{dinamicMenu.iconMobile.pin}}|{{dinamicMenu.iconMobile.pinpoint}}|{{dinamicMenu.iconMobile.pizza}}|{{dinamicMenu.iconMobile.plane}}|{{dinamicMenu.iconMobile.planet}}|{{dinamicMenu.iconMobile.play}}|{{dinamicMenu.iconMobile.playstation}}|{{dinamicMenu.iconMobile.plus}}|{{dinamicMenu.iconMobile.plus_circled}}|{{dinamicMenu.iconMobile.plus_round}}|{{dinamicMenu.iconMobile.podium}}|{{dinamicMenu.iconMobile.pound}}|{{dinamicMenu.iconMobile.power}}|{{dinamicMenu.iconMobile.pricetag}}|{{dinamicMenu.iconMobile.pricetags}}|{{dinamicMenu.iconMobile.printer}}|{{dinamicMenu.iconMobile.pull_request}}|{{dinamicMenu.iconMobile.qr_scanner}}|{{dinamicMenu.iconMobile.quote}}|{{dinamicMenu.iconMobile.radio_waves}}|{{dinamicMenu.iconMobile.record}}|{{dinamicMenu.iconMobile.refresh}}|{{dinamicMenu.iconMobile.reply}}|{{dinamicMenu.iconMobile.reply_all}}|{{dinamicMenu.iconMobile.ribbon_a}}|{{dinamicMenu.iconMobile.ribbon_b}}|{{dinamicMenu.iconMobile.sad}}|{{dinamicMenu.iconMobile.sad_outline}}|{{dinamicMenu.iconMobile.scissors}}|{{dinamicMenu.iconMobile.search}}|{{dinamicMenu.iconMobile.settings}}|{{dinamicMenu.iconMobile.share}}|{{dinamicMenu.iconMobile.shuffle}}|{{dinamicMenu.iconMobile.skip_backward}}|{{dinamicMenu.iconMobile.skip_forward}}|{{dinamicMenu.iconMobile.social_android}}|{{dinamicMenu.iconMobile.social_android_outline}}|{{dinamicMenu.iconMobile.social_angular}}|{{dinamicMenu.iconMobile.social_angular_outline}}|{{dinamicMenu.iconMobile.social_apple}}|{{dinamicMenu.iconMobile.social_apple_outline}}|{{dinamicMenu.iconMobile.social_bitcoin}}|{{dinamicMenu.iconMobile.social_bitcoin_outline}}|{{dinamicMenu.iconMobile.social_buffer}}|{{dinamicMenu.iconMobile.social_buffer_outline}}|{{dinamicMenu.iconMobile.social_chrome}}|{{dinamicMenu.iconMobile.social_chrome_outline}}|{{dinamicMenu.iconMobile.social_codepen}}|{{dinamicMenu.iconMobile.social_codepen_outline}}|{{dinamicMenu.iconMobile.social_css3}}|{{dinamicMenu.iconMobile.social_css3_outline}}|{{dinamicMenu.iconMobile.social_designernews}}|{{dinamicMenu.iconMobile.social_designernews_outline}}|{{dinamicMenu.iconMobile.social_dribbble}}|{{dinamicMenu.iconMobile.social_dribbble_outline}}|{{dinamicMenu.iconMobile.social_dropbox}}|{{dinamicMenu.iconMobile.social_dropbox_outline}}|{{dinamicMenu.iconMobile.social_euro}}|{{dinamicMenu.iconMobile.social_euro_outline}}|{{dinamicMenu.iconMobile.social_facebook}}|{{dinamicMenu.iconMobile.social_facebook_outline}}|{{dinamicMenu.iconMobile.social_foursquare}}|{{dinamicMenu.iconMobile.social_foursquare_outline}}|{{dinamicMenu.iconMobile.social_freebsd_devil}}|{{dinamicMenu.iconMobile.social_github}}|{{dinamicMenu.iconMobile.social_github_outline}}|{{dinamicMenu.iconMobile.social_google}}|{{dinamicMenu.iconMobile.social_google_outline}}|{{dinamicMenu.iconMobile.social_googleplus}}|{{dinamicMenu.iconMobile.social_googleplus_outline}}|{{dinamicMenu.iconMobile.social_hackernews}}|{{dinamicMenu.iconMobile.social_hackernews_outline}}|{{dinamicMenu.iconMobile.social_html5}}|{{dinamicMenu.iconMobile.social_html5_outline}}|{{dinamicMenu.iconMobile.social_instagram}}|{{dinamicMenu.iconMobile.social_instagram_outline}}|{{dinamicMenu.iconMobile.social_javascript}}|{{dinamicMenu.iconMobile.social_javascript_outline}}|{{dinamicMenu.iconMobile.social_linkedin}}|{{dinamicMenu.iconMobile.social_linkedin_outline}}|{{dinamicMenu.iconMobile.social_markdown}}|{{dinamicMenu.iconMobile.social_nodejs}}|{{dinamicMenu.iconMobile.social_octocat}}|{{dinamicMenu.iconMobile.social_pinterest}}|{{dinamicMenu.iconMobile.social_pinterest_outline}}|{{dinamicMenu.iconMobile.social_python}}|{{dinamicMenu.iconMobile.social_reddit}}|{{dinamicMenu.iconMobile.social_reddit_outline}}|{{dinamicMenu.iconMobile.social_rss}}|{{dinamicMenu.iconMobile.social_rss_outline}}|{{dinamicMenu.iconMobile.social_sass}}|{{dinamicMenu.iconMobile.social_skype}}|{{dinamicMenu.iconMobile.social_skype_outline}}|{{dinamicMenu.iconMobile.social_snapchat}}|{{dinamicMenu.iconMobile.social_snapchat_outline}}|{{dinamicMenu.iconMobile.social_tumblr}}|{{dinamicMenu.iconMobile.social_tumblr_outline}}|{{dinamicMenu.iconMobile.social_tux}}|{{dinamicMenu.iconMobile.social_twitch}}|{{dinamicMenu.iconMobile.social_twitch_outline}}|{{dinamicMenu.iconMobile.social_twitter}}|{{dinamicMenu.iconMobile.social_twitter_outline}}|{{dinamicMenu.iconMobile.social_usd}}|{{dinamicMenu.iconMobile.social_usd_outline}}|{{dinamicMenu.iconMobile.social_vimeo}}|{{dinamicMenu.iconMobile.social_vimeo_outline}}|{{dinamicMenu.iconMobile.social_whatsapp}}|{{dinamicMenu.iconMobile.social_whatsapp_outline}}|{{dinamicMenu.iconMobile.social_windows}}|{{dinamicMenu.iconMobile.social_windows_outline}}|{{dinamicMenu.iconMobile.social_wordpress}}|{{dinamicMenu.iconMobile.social_wordpress_outline}}|{{dinamicMenu.iconMobile.social_yahoo}}|{{dinamicMenu.iconMobile.social_yahoo_outline}}|{{dinamicMenu.iconMobile.social_yen}}|{{dinamicMenu.iconMobile.social_yen_outline}}|{{dinamicMenu.iconMobile.social_youtube}}|{{dinamicMenu.iconMobile.social_youtube_outline}}|{{dinamicMenu.iconMobile.soup_can}}|{{dinamicMenu.iconMobile.soup_can_outline}}|{{dinamicMenu.iconMobile.speakerphone}}|{{dinamicMenu.iconMobile.speedometer}}|{{dinamicMenu.iconMobile.spoon}}|{{dinamicMenu.iconMobile.star}}|{{dinamicMenu.iconMobile.stats_bars}}|{{dinamicMenu.iconMobile.steam}}|{{dinamicMenu.iconMobile.stop}}|{{dinamicMenu.iconMobile.thermometer}}|{{dinamicMenu.iconMobile.thumbsdown}}|{{dinamicMenu.iconMobile.thumbsup}}|{{dinamicMenu.iconMobile.toggle}}|{{dinamicMenu.iconMobile.toggle_filled}}|{{dinamicMenu.iconMobile.transgender}}|{{dinamicMenu.iconMobile.trash_a}}|{{dinamicMenu.iconMobile.trash_b}}|{{dinamicMenu.iconMobile.trophy}}|{{dinamicMenu.iconMobile.tshirt}}|{{dinamicMenu.iconMobile.tshirt_outline}}|{{dinamicMenu.iconMobile.umbrella}}|{{dinamicMenu.iconMobile.university}}|{{dinamicMenu.iconMobile.unlocked}}|{{dinamicMenu.iconMobile.upload}}|{{dinamicMenu.iconMobile.usb}}|{{dinamicMenu.iconMobile.videocamera}}|{{dinamicMenu.iconMobile.volume_high}}|{{dinamicMenu.iconMobile.volume_low}}|{{dinamicMenu.iconMobile.volume_medium}}|{{dinamicMenu.iconMobile.volume_mute}}|{{dinamicMenu.iconMobile.wand}}|{{dinamicMenu.iconMobile.waterdrop}}|{{dinamicMenu.iconMobile.wifi}}|{{dinamicMenu.iconMobile.wineglass}}|{{dinamicMenu.iconMobile.woman}}|{{dinamicMenu.iconMobile.wrench}}|{{dinamicMenu.iconMobile.xbox}} */ iconClass, hide, security, action, /** @type {ObjectType.STRING} @description {{dinamicMenu.createMenuItemMobile.param.posText}} @blockType util_dropdown @keys left|center|right @values {{dinamicMenu.positionMobile.left}}|{{dinamicMenu.positionMobile.center}}|{{dinamicMenu.positionMobile.right}} */ posText, /** @type {ObjectType.STRING} @description {{dinamicMenu.createMenuItemMobile.param.posIcon}} @blockType util_dropdown @keys left|right @values {{dinamicMenu.positionMobile.left}}|{{dinamicMenu.positionMobile.right}} */ posIcon, /** @type {ObjectType.STRING} @description {{dinamicMenu.createMenuItemMobile.param.themeText}} @blockType util_dropdown @keys light|assertive|balanced|energized|stable|calm|positive|royal|dark @values {{dinamicMenu.themeMobile.light}}|{{dinamicMenu.themeMobile.assertive}}|{{dinamicMenu.themeMobile.balanced}}|{{dinamicMenu.themeMobile.energized}}|{{dinamicMenu.themeMobile.stable}}|{{dinamicMenu.themeMobile.calm}}|{{dinamicMenu.themeMobile.positive}}|{{dinamicMenu.themeMobile.royal}}|{{dinamicMenu.themeMobile.dark}} */ themeText, /** @type {ObjectType.STRING} @description {{dinamicMenu.createMenuItemMobile.param.themeIcon}} @blockType util_dropdown @keys light|assertive|balanced|energized|stable|calm|positive|royal|dark @values {{dinamicMenu.themeMobile.light}}|{{dinamicMenu.themeMobile.assertive}}|{{dinamicMenu.themeMobile.balanced}}|{{dinamicMenu.themeMobile.energized}}|{{dinamicMenu.themeMobile.stable}}|{{dinamicMenu.themeMobile.calm}}|{{dinamicMenu.themeMobile.positive}}|{{dinamicMenu.themeMobile.royal}}|{{dinamicMenu.themeMobile.dark}} */ themeIcon) {
    let normalizedIconClass = "";
    if (iconClass) {
      if (iconClass != "ion-NONE") {
        if (iconClass.indexOf("ion-") == 0) {
          normalizedIconClass = "icon " + iconClass;
        } else {
          normalizedIconClass = iconClass;
        }
      }
    }
    return {
      "id": "TODO",
      "name": name ? name : "",
      "title": title ? title : "",
      "iconClass": normalizedIconClass,
      "hide": hide ? hide : "",
      "security": security ? security : "",
      "action": action ? action : "",
      "level": 0,
      "textPosition": posText ? posText : "left",
      "imagePosition": posIcon ? posIcon : "left",
      "contentTheme": themeText ? themeText : "light",
      "iconTheme": themeIcon ? themeIcon : "light",
      "menuItems": []
    };
  };

  /**
   * @type function
   * @name {{dinamicMenu.createMenuItemWeb.name}}
   * @description {{dinamicMenu.createMenuItemWeb.description}}
   * @nameTags criar | create | menu | item
   * @platform W
   * @param {ObjectType.STRING} name {{dinamicMenu.createMenuItemWeb.param.name}}
   * @param {ObjectType.STRING} title {{dinamicMenu.createMenuItemWeb.param.title}}
   * @param {ObjectType.STRING} iconClass
   * @param {ObjectType.STRING} hide {{dinamicMenu.createMenuItemWeb.param.hide}}
   * @param {ObjectType.OBJECT} security {{dinamicMenu.createMenuItemWeb.param.security}}
   * @param {ObjectType.STRING} action {{dinamicMenu.createMenuItemWeb.param.action}}
   * @param {ObjectType.OBJECT} items {{dinamicMenu.createMenuItemWeb.param.items}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.screen.createMenuItemWeb = function (name, title, /** @type {ObjectType.STRING} @description {{dinamicMenu.createMenuItemWeb.param.iconClass}} @blockType util_dropdown @keys fa-NONE|fa-500px|fa-adjust|fa-adn|fa-align-center|fa-align-justify|fa-align-left|fa-align-right|fa-amazon|fa-ambulance|fa-anchor|fa-android|fa-angellist|fa-angle-double-down|fa-angle-double-left|fa-angle-double-right|fa-angle-double-up|fa-angle-down|fa-angle-left|fa-angle-right|fa-angle-up|fa-apple|fa-archive|fa-area-chart|fa-arrow-circle-down|fa-arrow-circle-left|fa-arrow-circle-o-down|fa-arrow-circle-o-left|fa-arrow-circle-o-right|fa-arrow-circle-o-up|fa-arrow-circle-right|fa-arrow-circle-up|fa-arrow-down|fa-arrow-left|fa-arrow-right|fa-arrow-up|fa-arrows|fa-arrows-alt|fa-arrows-h|fa-arrows-v|fa-asterisk|fa-at|fa-automobile|fa-backward|fa-balance-scale|fa-ban|fa-bank|fa-bar-chart|fa-bar-chart-o|fa-barcode|fa-bars|fa-battery-0|fa-battery-1|fa-battery-2|fa-battery-3|fa-battery-4|fa-battery-empty|fa-battery-full|fa-battery-half|fa-battery-quarter|fa-battery-three-quarters|fa-bed|fa-beer|fa-behance|fa-behance-square|fa-bell|fa-bell-o|fa-bell-slash|fa-bell-slash-o|fa-bicycle|fa-binoculars|fa-birthday-cake|fa-bitbucket|fa-bitbucket-square|fa-bitcoin|fa-black-tie|fa-bold|fa-bolt|fa-bomb|fa-book|fa-bookmark|fa-bookmark-o|fa-briefcase|fa-btc|fa-bug|fa-building|fa-building-o|fa-bullhorn|fa-bullseye|fa-bus|fa-buysellads|fa-cab|fa-calculator|fa-calendar|fa-calendar-check-o|fa-calendar-minus-o|fa-calendar-o|fa-calendar-plus-o|fa-calendar-times-o|fa-camera|fa-camera-retro|fa-car|fa-caret-down|fa-caret-left|fa-caret-right|fa-caret-square-o-down|fa-caret-square-o-left|fa-caret-square-o-right|fa-caret-square-o-up|fa-caret-up|fa-cart-arrow-down|fa-cart-plus|fa-cc|fa-cc-amex|fa-cc-diners-club|fa-cc-discover|fa-cc-jcb|fa-cc-mastercard|fa-cc-paypal|fa-cc-stripe|fa-cc-visa|fa-certificate|fa-chain|fa-chain-broken|fa-check|fa-check-circle|fa-check-circle-o|fa-check-square|fa-check-square-o|fa-chevron-circle-down|fa-chevron-circle-left|fa-chevron-circle-right|fa-chevron-circle-up|fa-chevron-down|fa-chevron-left|fa-chevron-right|fa-chevron-up|fa-child|fa-chrome|fa-circle|fa-circle-o|fa-circle-o-notch|fa-circle-thin|fa-clipboard|fa-clock-o|fa-clone|fa-close|fa-cloud|fa-cloud-download|fa-cloud-upload|fa-cny|fa-code|fa-code-fork|fa-codepen|fa-coffee|fa-cog|fa-cogs|fa-columns|fa-comment|fa-comment-o|fa-commenting|fa-commenting-o|fa-comments|fa-comments-o|fa-compass|fa-compress|fa-connectdevelop|fa-contao|fa-copy|fa-copyright|fa-creative-commons|fa-credit-card|fa-crop|fa-crosshairs|fa-css3|fa-cube|fa-cubes|fa-cut|fa-cutlery|fa-dashboard|fa-dashcube|fa-database|fa-dedent|fa-delicious|fa-desktop|fa-deviantart|fa-diamond|fa-digg|fa-dollar|fa-dot-circle-o|fa-download|fa-dribbble|fa-dropbox|fa-drupal|fa-edit|fa-eject|fa-ellipsis-h|fa-ellipsis-v|fa-empire|fa-envelope|fa-envelope-o|fa-envelope-square|fa-eraser|fa-eur|fa-euro|fa-exchange|fa-exclamation|fa-exclamation-circle|fa-exclamation-triangle|fa-expand|fa-expeditedssl|fa-external-link|fa-external-link-square|fa-eye|fa-eye-slash|fa-eyedropper|fa-facebook|fa-facebook-f|fa-facebook-official|fa-facebook-square|fa-fast-backward|fa-fast-forward|fa-fax|fa-feed|fa-female|fa-fighter-jet|fa-file|fa-file-archive-o|fa-file-audio-o|fa-file-code-o|fa-file-excel-o|fa-file-image-o|fa-file-movie-o|fa-file-o|fa-file-pdf-o|fa-file-photo-o|fa-file-picture-o|fa-file-powerpoint-o|fa-file-sound-o|fa-file-text|fa-file-text-o|fa-file-video-o|fa-file-word-o|fa-file-zip-o|fa-files-o|fa-film|fa-filter|fa-fire|fa-fire-extinguisher|fa-firefox|fa-flag|fa-flag-checkered|fa-flag-o|fa-flash|fa-flask|fa-flickr|fa-floppy-o|fa-folder|fa-folder-o|fa-folder-open|fa-folder-open-o|fa-font|fa-fonticons|fa-forumbee|fa-forward|fa-foursquare|fa-frown-o|fa-futbol-o|fa-gamepad|fa-gavel|fa-gbp|fa-ge|fa-gear|fa-gears|fa-genderless|fa-get-pocket|fa-gg|fa-gg-circle|fa-gift|fa-git|fa-git-square|fa-github|fa-github-alt|fa-github-square|fa-gittip|fa-glass|fa-globe|fa-google|fa-google-plus|fa-google-plus-square|fa-google-wallet|fa-graduation-cap|fa-gratipay|fa-group|fa-h-square|fa-hacker-news|fa-hand-grab-o|fa-hand-lizard-o|fa-hand-o-down|fa-hand-o-left|fa-hand-o-right|fa-hand-o-up|fa-hand-paper-o|fa-hand-peace-o|fa-hand-pointer-o|fa-hand-rock-o|fa-hand-scissors-o|fa-hand-spock-o|fa-hand-stop-o|fa-hdd-o|fa-header|fa-headphones|fa-heart|fa-heart-o|fa-heartbeat|fa-history|fa-home|fa-hospital-o|fa-hotel|fa-hourglass|fa-hourglass-1|fa-hourglass-2|fa-hourglass-3|fa-hourglass-end|fa-hourglass-half|fa-hourglass-o|fa-hourglass-start|fa-houzz|fa-html5|fa-i-cursor|fa-ils|fa-image|fa-inbox|fa-indent|fa-industry|fa-info|fa-info-circle|fa-inr|fa-instagram|fa-institution|fa-internet-explorer|fa-intersex|fa-ioxhost|fa-italic|fa-joomla|fa-jpy|fa-jsfiddle|fa-key|fa-keyboard-o|fa-krw|fa-language|fa-laptop|fa-lastfm|fa-lastfm-square|fa-leaf|fa-leanpub|fa-legal|fa-lemon-o|fa-level-down|fa-level-up|fa-life-bouy|fa-life-buoy|fa-life-ring|fa-life-saver|fa-lightbulb-o|fa-line-chart|fa-link|fa-linkedin|fa-linkedin-square|fa-linux|fa-list|fa-list-alt|fa-list-ol|fa-list-ul|fa-location-arrow|fa-lock|fa-long-arrow-down|fa-long-arrow-left|fa-long-arrow-right|fa-long-arrow-up|fa-magic|fa-magnet|fa-mail-forward|fa-mail-reply|fa-mail-reply-all|fa-male|fa-map|fa-map-marker|fa-map-o|fa-map-pin|fa-map-signs|fa-mars|fa-mars-double|fa-mars-stroke|fa-mars-stroke-h|fa-mars-stroke-v|fa-maxcdn|fa-meanpath|fa-medium|fa-medkit|fa-meh-o|fa-mercury|fa-microphone|fa-microphone-slash|fa-minus|fa-minus-circle|fa-minus-square|fa-minus-square-o|fa-mobile|fa-mobile-phone|fa-money|fa-moon-o|fa-mortar-board|fa-motorcycle|fa-mouse-pointer|fa-music|fa-navicon|fa-neuter|fa-newspaper-o|fa-object-group|fa-object-ungroup|fa-odnoklassniki|fa-odnoklassniki-square|fa-opencart|fa-openid|fa-opera|fa-optin-monster|fa-outdent|fa-pagelines|fa-paint-brush|fa-paper-plane|fa-paper-plane-o|fa-paperclip|fa-paragraph|fa-paste|fa-pause|fa-paw|fa-paypal|fa-pencil|fa-pencil-square|fa-pencil-square-o|fa-phone|fa-phone-square|fa-photo|fa-picture-o|fa-pie-chart|fa-pied-piper|fa-pied-piper-alt|fa-pinterest|fa-pinterest-p|fa-pinterest-square|fa-plane|fa-play|fa-play-circle|fa-play-circle-o|fa-plug|fa-plus|fa-plus-circle|fa-plus-square|fa-plus-square-o|fa-power-off|fa-print|fa-puzzle-piece|fa-qq|fa-qrcode|fa-question|fa-question-circle|fa-quote-left|fa-quote-right|fa-ra|fa-random|fa-rebel|fa-recycle|fa-reddit|fa-reddit-square|fa-refresh|fa-registered|fa-remove|fa-renren|fa-reorder|fa-repeat|fa-reply|fa-reply-all|fa-retweet|fa-rmb|fa-road|fa-rocket|fa-rotate-left|fa-rotate-right|fa-rouble|fa-rss|fa-rss-square|fa-rub|fa-ruble|fa-rupee|fa-safari|fa-save|fa-scissors|fa-search|fa-search-minus|fa-search-plus|fa-sellsy|fa-send|fa-send-o|fa-server|fa-share|fa-share-alt|fa-share-alt-square|fa-share-square|fa-share-square-o|fa-shekel|fa-sheqel|fa-shield|fa-ship|fa-shirtsinbulk|fa-shopping-cart|fa-sign-in|fa-sign-out|fa-signal|fa-simplybuilt|fa-sitemap|fa-skyatlas|fa-skype|fa-slack|fa-sliders|fa-slideshare|fa-smile-o|fa-soccer-ball-o|fa-sort|fa-sort-alpha-asc|fa-sort-alpha-desc|fa-sort-amount-asc|fa-sort-amount-desc|fa-sort-asc|fa-sort-desc|fa-sort-down|fa-sort-numeric-asc|fa-sort-numeric-desc|fa-sort-up|fa-soundcloud|fa-space-shuttle|fa-spinner|fa-spoon|fa-spotify|fa-square|fa-square-o|fa-stack-exchange|fa-stack-overflow|fa-star|fa-star-half|fa-star-half-empty|fa-star-half-full|fa-star-half-o|fa-star-o|fa-steam|fa-steam-square|fa-step-backward|fa-step-forward|fa-stethoscope|fa-sticky-note|fa-sticky-note-o|fa-stop|fa-street-view|fa-strikethrough|fa-stumbleupon|fa-stumbleupon-circle|fa-subscript|fa-subway|fa-suitcase|fa-sun-o|fa-superscript|fa-support|fa-table|fa-tablet|fa-tachometer|fa-tag|fa-tags|fa-tasks|fa-taxi|fa-television|fa-tencent-weibo|fa-terminal|fa-text-height|fa-text-width|fa-th|fa-th-large|fa-th-list|fa-thumb-tack|fa-thumbs-down|fa-thumbs-o-down|fa-thumbs-o-up|fa-thumbs-up|fa-ticket|fa-times|fa-times-circle|fa-times-circle-o|fa-tint|fa-toggle-down|fa-toggle-left|fa-toggle-off|fa-toggle-on|fa-toggle-right|fa-toggle-up|fa-trademark|fa-train|fa-transgender|fa-transgender-alt|fa-trash|fa-trash-o|fa-tree|fa-trello|fa-tripadvisor|fa-trophy|fa-truck|fa-try|fa-tty|fa-tumblr|fa-tumblr-square|fa-turkish-lira|fa-tv|fa-twitch|fa-twitter|fa-twitter-square|fa-umbrella|fa-underline|fa-undo|fa-university|fa-unlink|fa-unlock|fa-unlock-alt|fa-unsorted|fa-upload|fa-usd|fa-user|fa-user-md|fa-user-plus|fa-user-secret|fa-user-times|fa-users|fa-venus|fa-venus-double|fa-venus-mars|fa-viacoin|fa-video-camera|fa-vimeo|fa-vimeo-square|fa-vine|fa-vk|fa-volume-down|fa-volume-off|fa-volume-up|fa-warning|fa-wechat|fa-weibo|fa-weixin|fa-whatsapp|fa-wheelchair|fa-wifi|fa-wikipedia-w|fa-windows|fa-won|fa-wordpress|fa-wrench|fa-xing|fa-xing-square|fa-y-combinator|fa-y-combinator-square|fa-yahoo|fa-yc|fa-yc-square|fa-yelp|fa-yen|fa-youtube|fa-youtube-play|fa-youtube-square @values {{dinamicMenu.iconWeb.NONE}}|{{dinamicMenu.iconWeb.500px}}|{{dinamicMenu.iconWeb.adjust}}|{{dinamicMenu.iconWeb.adn}}|{{dinamicMenu.iconWeb.align_center}}|{{dinamicMenu.iconWeb.align_justify}}|{{dinamicMenu.iconWeb.align_left}}|{{dinamicMenu.iconWeb.align_right}}|{{dinamicMenu.iconWeb.amazon}}|{{dinamicMenu.iconWeb.ambulance}}|{{dinamicMenu.iconWeb.anchor}}|{{dinamicMenu.iconWeb.android}}|{{dinamicMenu.iconWeb.angellist}}|{{dinamicMenu.iconWeb.angle_double_down}}|{{dinamicMenu.iconWeb.angle_double_left}}|{{dinamicMenu.iconWeb.angle_double_right}}|{{dinamicMenu.iconWeb.angle_double_up}}|{{dinamicMenu.iconWeb.angle_down}}|{{dinamicMenu.iconWeb.angle_left}}|{{dinamicMenu.iconWeb.angle_right}}|{{dinamicMenu.iconWeb.angle_up}}|{{dinamicMenu.iconWeb.apple}}|{{dinamicMenu.iconWeb.archive}}|{{dinamicMenu.iconWeb.area_chart}}|{{dinamicMenu.iconWeb.arrow_circle_down}}|{{dinamicMenu.iconWeb.arrow_circle_left}}|{{dinamicMenu.iconWeb.arrow_circle_o_down}}|{{dinamicMenu.iconWeb.arrow_circle_o_left}}|{{dinamicMenu.iconWeb.arrow_circle_o_right}}|{{dinamicMenu.iconWeb.arrow_circle_o_up}}|{{dinamicMenu.iconWeb.arrow_circle_right}}|{{dinamicMenu.iconWeb.arrow_circle_up}}|{{dinamicMenu.iconWeb.arrow_down}}|{{dinamicMenu.iconWeb.arrow_left}}|{{dinamicMenu.iconWeb.arrow_right}}|{{dinamicMenu.iconWeb.arrow_up}}|{{dinamicMenu.iconWeb.arrows}}|{{dinamicMenu.iconWeb.arrows_alt}}|{{dinamicMenu.iconWeb.arrows_h}}|{{dinamicMenu.iconWeb.arrows_v}}|{{dinamicMenu.iconWeb.asterisk}}|{{dinamicMenu.iconWeb.at}}|{{dinamicMenu.iconWeb.automobile}}|{{dinamicMenu.iconWeb.backward}}|{{dinamicMenu.iconWeb.balance_scale}}|{{dinamicMenu.iconWeb.ban}}|{{dinamicMenu.iconWeb.bank}}|{{dinamicMenu.iconWeb.bar_chart}}|{{dinamicMenu.iconWeb.bar_chart_o}}|{{dinamicMenu.iconWeb.barcode}}|{{dinamicMenu.iconWeb.bars}}|{{dinamicMenu.iconWeb.battery_0}}|{{dinamicMenu.iconWeb.battery_1}}|{{dinamicMenu.iconWeb.battery_2}}|{{dinamicMenu.iconWeb.battery_3}}|{{dinamicMenu.iconWeb.battery_4}}|{{dinamicMenu.iconWeb.battery_empty}}|{{dinamicMenu.iconWeb.battery_full}}|{{dinamicMenu.iconWeb.battery_half}}|{{dinamicMenu.iconWeb.battery_quarter}}|{{dinamicMenu.iconWeb.battery_three_quarters}}|{{dinamicMenu.iconWeb.bed}}|{{dinamicMenu.iconWeb.beer}}|{{dinamicMenu.iconWeb.behance}}|{{dinamicMenu.iconWeb.behance_square}}|{{dinamicMenu.iconWeb.bell}}|{{dinamicMenu.iconWeb.bell_o}}|{{dinamicMenu.iconWeb.bell_slash}}|{{dinamicMenu.iconWeb.bell_slash_o}}|{{dinamicMenu.iconWeb.bicycle}}|{{dinamicMenu.iconWeb.binoculars}}|{{dinamicMenu.iconWeb.birthday_cake}}|{{dinamicMenu.iconWeb.bitbucket}}|{{dinamicMenu.iconWeb.bitbucket_square}}|{{dinamicMenu.iconWeb.bitcoin}}|{{dinamicMenu.iconWeb.black_tie}}|{{dinamicMenu.iconWeb.bold}}|{{dinamicMenu.iconWeb.bolt}}|{{dinamicMenu.iconWeb.bomb}}|{{dinamicMenu.iconWeb.book}}|{{dinamicMenu.iconWeb.bookmark}}|{{dinamicMenu.iconWeb.bookmark_o}}|{{dinamicMenu.iconWeb.briefcase}}|{{dinamicMenu.iconWeb.btc}}|{{dinamicMenu.iconWeb.bug}}|{{dinamicMenu.iconWeb.building}}|{{dinamicMenu.iconWeb.building_o}}|{{dinamicMenu.iconWeb.bullhorn}}|{{dinamicMenu.iconWeb.bullseye}}|{{dinamicMenu.iconWeb.bus}}|{{dinamicMenu.iconWeb.buysellads}}|{{dinamicMenu.iconWeb.cab}}|{{dinamicMenu.iconWeb.calculator}}|{{dinamicMenu.iconWeb.calendar}}|{{dinamicMenu.iconWeb.calendar_check_o}}|{{dinamicMenu.iconWeb.calendar_minus_o}}|{{dinamicMenu.iconWeb.calendar_o}}|{{dinamicMenu.iconWeb.calendar_plus_o}}|{{dinamicMenu.iconWeb.calendar_times_o}}|{{dinamicMenu.iconWeb.camera}}|{{dinamicMenu.iconWeb.camera_retro}}|{{dinamicMenu.iconWeb.car}}|{{dinamicMenu.iconWeb.caret_down}}|{{dinamicMenu.iconWeb.caret_left}}|{{dinamicMenu.iconWeb.caret_right}}|{{dinamicMenu.iconWeb.caret_square_o_down}}|{{dinamicMenu.iconWeb.caret_square_o_left}}|{{dinamicMenu.iconWeb.caret_square_o_right}}|{{dinamicMenu.iconWeb.caret_square_o_up}}|{{dinamicMenu.iconWeb.caret_up}}|{{dinamicMenu.iconWeb.cart_arrow_down}}|{{dinamicMenu.iconWeb.cart_plus}}|{{dinamicMenu.iconWeb.cc}}|{{dinamicMenu.iconWeb.cc_amex}}|{{dinamicMenu.iconWeb.cc_diners_club}}|{{dinamicMenu.iconWeb.cc_discover}}|{{dinamicMenu.iconWeb.cc_jcb}}|{{dinamicMenu.iconWeb.cc_mastercard}}|{{dinamicMenu.iconWeb.cc_paypal}}|{{dinamicMenu.iconWeb.cc_stripe}}|{{dinamicMenu.iconWeb.cc_visa}}|{{dinamicMenu.iconWeb.certificate}}|{{dinamicMenu.iconWeb.chain}}|{{dinamicMenu.iconWeb.chain_broken}}|{{dinamicMenu.iconWeb.check}}|{{dinamicMenu.iconWeb.check_circle}}|{{dinamicMenu.iconWeb.check_circle_o}}|{{dinamicMenu.iconWeb.check_square}}|{{dinamicMenu.iconWeb.check_square_o}}|{{dinamicMenu.iconWeb.chevron_circle_down}}|{{dinamicMenu.iconWeb.chevron_circle_left}}|{{dinamicMenu.iconWeb.chevron_circle_right}}|{{dinamicMenu.iconWeb.chevron_circle_up}}|{{dinamicMenu.iconWeb.chevron_down}}|{{dinamicMenu.iconWeb.chevron_left}}|{{dinamicMenu.iconWeb.chevron_right}}|{{dinamicMenu.iconWeb.chevron_up}}|{{dinamicMenu.iconWeb.child}}|{{dinamicMenu.iconWeb.chrome}}|{{dinamicMenu.iconWeb.circle}}|{{dinamicMenu.iconWeb.circle_o}}|{{dinamicMenu.iconWeb.circle_o_notch}}|{{dinamicMenu.iconWeb.circle_thin}}|{{dinamicMenu.iconWeb.clipboard}}|{{dinamicMenu.iconWeb.clock_o}}|{{dinamicMenu.iconWeb.clone}}|{{dinamicMenu.iconWeb.close}}|{{dinamicMenu.iconWeb.cloud}}|{{dinamicMenu.iconWeb.cloud_download}}|{{dinamicMenu.iconWeb.cloud_upload}}|{{dinamicMenu.iconWeb.cny}}|{{dinamicMenu.iconWeb.code}}|{{dinamicMenu.iconWeb.code_fork}}|{{dinamicMenu.iconWeb.codepen}}|{{dinamicMenu.iconWeb.coffee}}|{{dinamicMenu.iconWeb.cog}}|{{dinamicMenu.iconWeb.cogs}}|{{dinamicMenu.iconWeb.columns}}|{{dinamicMenu.iconWeb.comment}}|{{dinamicMenu.iconWeb.comment_o}}|{{dinamicMenu.iconWeb.commenting}}|{{dinamicMenu.iconWeb.commenting_o}}|{{dinamicMenu.iconWeb.comments}}|{{dinamicMenu.iconWeb.comments_o}}|{{dinamicMenu.iconWeb.compass}}|{{dinamicMenu.iconWeb.compress}}|{{dinamicMenu.iconWeb.connectdevelop}}|{{dinamicMenu.iconWeb.contao}}|{{dinamicMenu.iconWeb.copy}}|{{dinamicMenu.iconWeb.copyright}}|{{dinamicMenu.iconWeb.creative_commons}}|{{dinamicMenu.iconWeb.credit_card}}|{{dinamicMenu.iconWeb.crop}}|{{dinamicMenu.iconWeb.crosshairs}}|{{dinamicMenu.iconWeb.css3}}|{{dinamicMenu.iconWeb.cube}}|{{dinamicMenu.iconWeb.cubes}}|{{dinamicMenu.iconWeb.cut}}|{{dinamicMenu.iconWeb.cutlery}}|{{dinamicMenu.iconWeb.dashboard}}|{{dinamicMenu.iconWeb.dashcube}}|{{dinamicMenu.iconWeb.database}}|{{dinamicMenu.iconWeb.dedent}}|{{dinamicMenu.iconWeb.delicious}}|{{dinamicMenu.iconWeb.desktop}}|{{dinamicMenu.iconWeb.deviantart}}|{{dinamicMenu.iconWeb.diamond}}|{{dinamicMenu.iconWeb.digg}}|{{dinamicMenu.iconWeb.dollar}}|{{dinamicMenu.iconWeb.dot_circle_o}}|{{dinamicMenu.iconWeb.download}}|{{dinamicMenu.iconWeb.dribbble}}|{{dinamicMenu.iconWeb.dropbox}}|{{dinamicMenu.iconWeb.drupal}}|{{dinamicMenu.iconWeb.edit}}|{{dinamicMenu.iconWeb.eject}}|{{dinamicMenu.iconWeb.ellipsis_h}}|{{dinamicMenu.iconWeb.ellipsis_v}}|{{dinamicMenu.iconWeb.empire}}|{{dinamicMenu.iconWeb.envelope}}|{{dinamicMenu.iconWeb.envelope_o}}|{{dinamicMenu.iconWeb.envelope_square}}|{{dinamicMenu.iconWeb.eraser}}|{{dinamicMenu.iconWeb.eur}}|{{dinamicMenu.iconWeb.euro}}|{{dinamicMenu.iconWeb.exchange}}|{{dinamicMenu.iconWeb.exclamation}}|{{dinamicMenu.iconWeb.exclamation_circle}}|{{dinamicMenu.iconWeb.exclamation_triangle}}|{{dinamicMenu.iconWeb.expand}}|{{dinamicMenu.iconWeb.expeditedssl}}|{{dinamicMenu.iconWeb.external_link}}|{{dinamicMenu.iconWeb.external_link_square}}|{{dinamicMenu.iconWeb.eye}}|{{dinamicMenu.iconWeb.eye_slash}}|{{dinamicMenu.iconWeb.eyedropper}}|{{dinamicMenu.iconWeb.facebook}}|{{dinamicMenu.iconWeb.facebook_f}}|{{dinamicMenu.iconWeb.facebook_official}}|{{dinamicMenu.iconWeb.facebook_square}}|{{dinamicMenu.iconWeb.fast_backward}}|{{dinamicMenu.iconWeb.fast_forward}}|{{dinamicMenu.iconWeb.fax}}|{{dinamicMenu.iconWeb.feed}}|{{dinamicMenu.iconWeb.female}}|{{dinamicMenu.iconWeb.fighter_jet}}|{{dinamicMenu.iconWeb.file}}|{{dinamicMenu.iconWeb.file_archive_o}}|{{dinamicMenu.iconWeb.file_audio_o}}|{{dinamicMenu.iconWeb.file_code_o}}|{{dinamicMenu.iconWeb.file_excel_o}}|{{dinamicMenu.iconWeb.file_image_o}}|{{dinamicMenu.iconWeb.file_movie_o}}|{{dinamicMenu.iconWeb.file_o}}|{{dinamicMenu.iconWeb.file_pdf_o}}|{{dinamicMenu.iconWeb.file_photo_o}}|{{dinamicMenu.iconWeb.file_picture_o}}|{{dinamicMenu.iconWeb.file_powerpoint_o}}|{{dinamicMenu.iconWeb.file_sound_o}}|{{dinamicMenu.iconWeb.file_text}}|{{dinamicMenu.iconWeb.file_text_o}}|{{dinamicMenu.iconWeb.file_video_o}}|{{dinamicMenu.iconWeb.file_word_o}}|{{dinamicMenu.iconWeb.file_zip_o}}|{{dinamicMenu.iconWeb.files_o}}|{{dinamicMenu.iconWeb.film}}|{{dinamicMenu.iconWeb.filter}}|{{dinamicMenu.iconWeb.fire}}|{{dinamicMenu.iconWeb.fire_extinguisher}}|{{dinamicMenu.iconWeb.firefox}}|{{dinamicMenu.iconWeb.flag}}|{{dinamicMenu.iconWeb.flag_checkered}}|{{dinamicMenu.iconWeb.flag_o}}|{{dinamicMenu.iconWeb.flash}}|{{dinamicMenu.iconWeb.flask}}|{{dinamicMenu.iconWeb.flickr}}|{{dinamicMenu.iconWeb.floppy_o}}|{{dinamicMenu.iconWeb.folder}}|{{dinamicMenu.iconWeb.folder_o}}|{{dinamicMenu.iconWeb.folder_open}}|{{dinamicMenu.iconWeb.folder_open_o}}|{{dinamicMenu.iconWeb.font}}|{{dinamicMenu.iconWeb.fonticons}}|{{dinamicMenu.iconWeb.forumbee}}|{{dinamicMenu.iconWeb.forward}}|{{dinamicMenu.iconWeb.foursquare}}|{{dinamicMenu.iconWeb.frown_o}}|{{dinamicMenu.iconWeb.futbol_o}}|{{dinamicMenu.iconWeb.gamepad}}|{{dinamicMenu.iconWeb.gavel}}|{{dinamicMenu.iconWeb.gbp}}|{{dinamicMenu.iconWeb.ge}}|{{dinamicMenu.iconWeb.gear}}|{{dinamicMenu.iconWeb.gears}}|{{dinamicMenu.iconWeb.genderless}}|{{dinamicMenu.iconWeb.get_pocket}}|{{dinamicMenu.iconWeb.gg}}|{{dinamicMenu.iconWeb.gg_circle}}|{{dinamicMenu.iconWeb.gift}}|{{dinamicMenu.iconWeb.git}}|{{dinamicMenu.iconWeb.git_square}}|{{dinamicMenu.iconWeb.github}}|{{dinamicMenu.iconWeb.github_alt}}|{{dinamicMenu.iconWeb.github_square}}|{{dinamicMenu.iconWeb.gittip}}|{{dinamicMenu.iconWeb.glass}}|{{dinamicMenu.iconWeb.globe}}|{{dinamicMenu.iconWeb.google}}|{{dinamicMenu.iconWeb.google_plus}}|{{dinamicMenu.iconWeb.google_plus_square}}|{{dinamicMenu.iconWeb.google_wallet}}|{{dinamicMenu.iconWeb.graduation_cap}}|{{dinamicMenu.iconWeb.gratipay}}|{{dinamicMenu.iconWeb.group}}|{{dinamicMenu.iconWeb.h_square}}|{{dinamicMenu.iconWeb.hacker_news}}|{{dinamicMenu.iconWeb.hand_grab_o}}|{{dinamicMenu.iconWeb.hand_lizard_o}}|{{dinamicMenu.iconWeb.hand_o_down}}|{{dinamicMenu.iconWeb.hand_o_left}}|{{dinamicMenu.iconWeb.hand_o_right}}|{{dinamicMenu.iconWeb.hand_o_up}}|{{dinamicMenu.iconWeb.hand_paper_o}}|{{dinamicMenu.iconWeb.hand_peace_o}}|{{dinamicMenu.iconWeb.hand_pointer_o}}|{{dinamicMenu.iconWeb.hand_rock_o}}|{{dinamicMenu.iconWeb.hand_scissors_o}}|{{dinamicMenu.iconWeb.hand_spock_o}}|{{dinamicMenu.iconWeb.hand_stop_o}}|{{dinamicMenu.iconWeb.hdd_o}}|{{dinamicMenu.iconWeb.header}}|{{dinamicMenu.iconWeb.headphones}}|{{dinamicMenu.iconWeb.heart}}|{{dinamicMenu.iconWeb.heart_o}}|{{dinamicMenu.iconWeb.heartbeat}}|{{dinamicMenu.iconWeb.history}}|{{dinamicMenu.iconWeb.home}}|{{dinamicMenu.iconWeb.hospital_o}}|{{dinamicMenu.iconWeb.hotel}}|{{dinamicMenu.iconWeb.hourglass}}|{{dinamicMenu.iconWeb.hourglass_1}}|{{dinamicMenu.iconWeb.hourglass_2}}|{{dinamicMenu.iconWeb.hourglass_3}}|{{dinamicMenu.iconWeb.hourglass_end}}|{{dinamicMenu.iconWeb.hourglass_half}}|{{dinamicMenu.iconWeb.hourglass_o}}|{{dinamicMenu.iconWeb.hourglass_start}}|{{dinamicMenu.iconWeb.houzz}}|{{dinamicMenu.iconWeb.html5}}|{{dinamicMenu.iconWeb.i_cursor}}|{{dinamicMenu.iconWeb.ils}}|{{dinamicMenu.iconWeb.image}}|{{dinamicMenu.iconWeb.inbox}}|{{dinamicMenu.iconWeb.indent}}|{{dinamicMenu.iconWeb.industry}}|{{dinamicMenu.iconWeb.info}}|{{dinamicMenu.iconWeb.info_circle}}|{{dinamicMenu.iconWeb.inr}}|{{dinamicMenu.iconWeb.instagram}}|{{dinamicMenu.iconWeb.institution}}|{{dinamicMenu.iconWeb.internet_explorer}}|{{dinamicMenu.iconWeb.intersex}}|{{dinamicMenu.iconWeb.ioxhost}}|{{dinamicMenu.iconWeb.italic}}|{{dinamicMenu.iconWeb.joomla}}|{{dinamicMenu.iconWeb.jpy}}|{{dinamicMenu.iconWeb.jsfiddle}}|{{dinamicMenu.iconWeb.key}}|{{dinamicMenu.iconWeb.keyboard_o}}|{{dinamicMenu.iconWeb.krw}}|{{dinamicMenu.iconWeb.language}}|{{dinamicMenu.iconWeb.laptop}}|{{dinamicMenu.iconWeb.lastfm}}|{{dinamicMenu.iconWeb.lastfm_square}}|{{dinamicMenu.iconWeb.leaf}}|{{dinamicMenu.iconWeb.leanpub}}|{{dinamicMenu.iconWeb.legal}}|{{dinamicMenu.iconWeb.lemon_o}}|{{dinamicMenu.iconWeb.level_down}}|{{dinamicMenu.iconWeb.level_up}}|{{dinamicMenu.iconWeb.life_bouy}}|{{dinamicMenu.iconWeb.life_buoy}}|{{dinamicMenu.iconWeb.life_ring}}|{{dinamicMenu.iconWeb.life_saver}}|{{dinamicMenu.iconWeb.lightbulb_o}}|{{dinamicMenu.iconWeb.line_chart}}|{{dinamicMenu.iconWeb.link}}|{{dinamicMenu.iconWeb.linkedin}}|{{dinamicMenu.iconWeb.linkedin_square}}|{{dinamicMenu.iconWeb.linux}}|{{dinamicMenu.iconWeb.list}}|{{dinamicMenu.iconWeb.list_alt}}|{{dinamicMenu.iconWeb.list_ol}}|{{dinamicMenu.iconWeb.list_ul}}|{{dinamicMenu.iconWeb.location_arrow}}|{{dinamicMenu.iconWeb.lock}}|{{dinamicMenu.iconWeb.long_arrow_down}}|{{dinamicMenu.iconWeb.long_arrow_left}}|{{dinamicMenu.iconWeb.long_arrow_right}}|{{dinamicMenu.iconWeb.long_arrow_up}}|{{dinamicMenu.iconWeb.magic}}|{{dinamicMenu.iconWeb.magnet}}|{{dinamicMenu.iconWeb.mail_forward}}|{{dinamicMenu.iconWeb.mail_reply}}|{{dinamicMenu.iconWeb.mail_reply_all}}|{{dinamicMenu.iconWeb.male}}|{{dinamicMenu.iconWeb.map}}|{{dinamicMenu.iconWeb.map_marker}}|{{dinamicMenu.iconWeb.map_o}}|{{dinamicMenu.iconWeb.map_pin}}|{{dinamicMenu.iconWeb.map_signs}}|{{dinamicMenu.iconWeb.mars}}|{{dinamicMenu.iconWeb.mars_double}}|{{dinamicMenu.iconWeb.mars_stroke}}|{{dinamicMenu.iconWeb.mars_stroke_h}}|{{dinamicMenu.iconWeb.mars_stroke_v}}|{{dinamicMenu.iconWeb.maxcdn}}|{{dinamicMenu.iconWeb.meanpath}}|{{dinamicMenu.iconWeb.medium}}|{{dinamicMenu.iconWeb.medkit}}|{{dinamicMenu.iconWeb.meh_o}}|{{dinamicMenu.iconWeb.mercury}}|{{dinamicMenu.iconWeb.microphone}}|{{dinamicMenu.iconWeb.microphone_slash}}|{{dinamicMenu.iconWeb.minus}}|{{dinamicMenu.iconWeb.minus_circle}}|{{dinamicMenu.iconWeb.minus_square}}|{{dinamicMenu.iconWeb.minus_square_o}}|{{dinamicMenu.iconWeb.mobile}}|{{dinamicMenu.iconWeb.mobile_phone}}|{{dinamicMenu.iconWeb.money}}|{{dinamicMenu.iconWeb.moon_o}}|{{dinamicMenu.iconWeb.mortar_board}}|{{dinamicMenu.iconWeb.motorcycle}}|{{dinamicMenu.iconWeb.mouse_pointer}}|{{dinamicMenu.iconWeb.music}}|{{dinamicMenu.iconWeb.navicon}}|{{dinamicMenu.iconWeb.neuter}}|{{dinamicMenu.iconWeb.newspaper_o}}|{{dinamicMenu.iconWeb.object_group}}|{{dinamicMenu.iconWeb.object_ungroup}}|{{dinamicMenu.iconWeb.odnoklassniki}}|{{dinamicMenu.iconWeb.odnoklassniki_square}}|{{dinamicMenu.iconWeb.opencart}}|{{dinamicMenu.iconWeb.openid}}|{{dinamicMenu.iconWeb.opera}}|{{dinamicMenu.iconWeb.optin_monster}}|{{dinamicMenu.iconWeb.outdent}}|{{dinamicMenu.iconWeb.pagelines}}|{{dinamicMenu.iconWeb.paint_brush}}|{{dinamicMenu.iconWeb.paper_plane}}|{{dinamicMenu.iconWeb.paper_plane_o}}|{{dinamicMenu.iconWeb.paperclip}}|{{dinamicMenu.iconWeb.paragraph}}|{{dinamicMenu.iconWeb.paste}}|{{dinamicMenu.iconWeb.pause}}|{{dinamicMenu.iconWeb.paw}}|{{dinamicMenu.iconWeb.paypal}}|{{dinamicMenu.iconWeb.pencil}}|{{dinamicMenu.iconWeb.pencil_square}}|{{dinamicMenu.iconWeb.pencil_square_o}}|{{dinamicMenu.iconWeb.phone}}|{{dinamicMenu.iconWeb.phone_square}}|{{dinamicMenu.iconWeb.photo}}|{{dinamicMenu.iconWeb.picture_o}}|{{dinamicMenu.iconWeb.pie_chart}}|{{dinamicMenu.iconWeb.pied_piper}}|{{dinamicMenu.iconWeb.pied_piper_alt}}|{{dinamicMenu.iconWeb.pinterest}}|{{dinamicMenu.iconWeb.pinterest_p}}|{{dinamicMenu.iconWeb.pinterest_square}}|{{dinamicMenu.iconWeb.plane}}|{{dinamicMenu.iconWeb.play}}|{{dinamicMenu.iconWeb.play_circle}}|{{dinamicMenu.iconWeb.play_circle_o}}|{{dinamicMenu.iconWeb.plug}}|{{dinamicMenu.iconWeb.plus}}|{{dinamicMenu.iconWeb.plus_circle}}|{{dinamicMenu.iconWeb.plus_square}}|{{dinamicMenu.iconWeb.plus_square_o}}|{{dinamicMenu.iconWeb.power_off}}|{{dinamicMenu.iconWeb.print}}|{{dinamicMenu.iconWeb.puzzle_piece}}|{{dinamicMenu.iconWeb.qq}}|{{dinamicMenu.iconWeb.qrcode}}|{{dinamicMenu.iconWeb.question}}|{{dinamicMenu.iconWeb.question_circle}}|{{dinamicMenu.iconWeb.quote_left}}|{{dinamicMenu.iconWeb.quote_right}}|{{dinamicMenu.iconWeb.ra}}|{{dinamicMenu.iconWeb.random}}|{{dinamicMenu.iconWeb.rebel}}|{{dinamicMenu.iconWeb.recycle}}|{{dinamicMenu.iconWeb.reddit}}|{{dinamicMenu.iconWeb.reddit_square}}|{{dinamicMenu.iconWeb.refresh}}|{{dinamicMenu.iconWeb.registered}}|{{dinamicMenu.iconWeb.remove}}|{{dinamicMenu.iconWeb.renren}}|{{dinamicMenu.iconWeb.reorder}}|{{dinamicMenu.iconWeb.repeat}}|{{dinamicMenu.iconWeb.reply}}|{{dinamicMenu.iconWeb.reply_all}}|{{dinamicMenu.iconWeb.retweet}}|{{dinamicMenu.iconWeb.rmb}}|{{dinamicMenu.iconWeb.road}}|{{dinamicMenu.iconWeb.rocket}}|{{dinamicMenu.iconWeb.rotate_left}}|{{dinamicMenu.iconWeb.rotate_right}}|{{dinamicMenu.iconWeb.rouble}}|{{dinamicMenu.iconWeb.rss}}|{{dinamicMenu.iconWeb.rss_square}}|{{dinamicMenu.iconWeb.rub}}|{{dinamicMenu.iconWeb.ruble}}|{{dinamicMenu.iconWeb.rupee}}|{{dinamicMenu.iconWeb.safari}}|{{dinamicMenu.iconWeb.save}}|{{dinamicMenu.iconWeb.scissors}}|{{dinamicMenu.iconWeb.search}}|{{dinamicMenu.iconWeb.search_minus}}|{{dinamicMenu.iconWeb.search_plus}}|{{dinamicMenu.iconWeb.sellsy}}|{{dinamicMenu.iconWeb.send}}|{{dinamicMenu.iconWeb.send_o}}|{{dinamicMenu.iconWeb.server}}|{{dinamicMenu.iconWeb.share}}|{{dinamicMenu.iconWeb.share_alt}}|{{dinamicMenu.iconWeb.share_alt_square}}|{{dinamicMenu.iconWeb.share_square}}|{{dinamicMenu.iconWeb.share_square_o}}|{{dinamicMenu.iconWeb.shekel}}|{{dinamicMenu.iconWeb.sheqel}}|{{dinamicMenu.iconWeb.shield}}|{{dinamicMenu.iconWeb.ship}}|{{dinamicMenu.iconWeb.shirtsinbulk}}|{{dinamicMenu.iconWeb.shopping_cart}}|{{dinamicMenu.iconWeb.sign_in}}|{{dinamicMenu.iconWeb.sign_out}}|{{dinamicMenu.iconWeb.signal}}|{{dinamicMenu.iconWeb.simplybuilt}}|{{dinamicMenu.iconWeb.sitemap}}|{{dinamicMenu.iconWeb.skyatlas}}|{{dinamicMenu.iconWeb.skype}}|{{dinamicMenu.iconWeb.slack}}|{{dinamicMenu.iconWeb.sliders}}|{{dinamicMenu.iconWeb.slideshare}}|{{dinamicMenu.iconWeb.smile_o}}|{{dinamicMenu.iconWeb.soccer_ball_o}}|{{dinamicMenu.iconWeb.sort}}|{{dinamicMenu.iconWeb.sort_alpha_asc}}|{{dinamicMenu.iconWeb.sort_alpha_desc}}|{{dinamicMenu.iconWeb.sort_amount_asc}}|{{dinamicMenu.iconWeb.sort_amount_desc}}|{{dinamicMenu.iconWeb.sort_asc}}|{{dinamicMenu.iconWeb.sort_desc}}|{{dinamicMenu.iconWeb.sort_down}}|{{dinamicMenu.iconWeb.sort_numeric_asc}}|{{dinamicMenu.iconWeb.sort_numeric_desc}}|{{dinamicMenu.iconWeb.sort_up}}|{{dinamicMenu.iconWeb.soundcloud}}|{{dinamicMenu.iconWeb.space_shuttle}}|{{dinamicMenu.iconWeb.spinner}}|{{dinamicMenu.iconWeb.spoon}}|{{dinamicMenu.iconWeb.spotify}}|{{dinamicMenu.iconWeb.square}}|{{dinamicMenu.iconWeb.square_o}}|{{dinamicMenu.iconWeb.stack_exchange}}|{{dinamicMenu.iconWeb.stack_overflow}}|{{dinamicMenu.iconWeb.star}}|{{dinamicMenu.iconWeb.star_half}}|{{dinamicMenu.iconWeb.star_half_empty}}|{{dinamicMenu.iconWeb.star_half_full}}|{{dinamicMenu.iconWeb.star_half_o}}|{{dinamicMenu.iconWeb.star_o}}|{{dinamicMenu.iconWeb.steam}}|{{dinamicMenu.iconWeb.steam_square}}|{{dinamicMenu.iconWeb.step_backward}}|{{dinamicMenu.iconWeb.step_forward}}|{{dinamicMenu.iconWeb.stethoscope}}|{{dinamicMenu.iconWeb.sticky_note}}|{{dinamicMenu.iconWeb.sticky_note_o}}|{{dinamicMenu.iconWeb.stop}}|{{dinamicMenu.iconWeb.street_view}}|{{dinamicMenu.iconWeb.strikethrough}}|{{dinamicMenu.iconWeb.stumbleupon}}|{{dinamicMenu.iconWeb.stumbleupon_circle}}|{{dinamicMenu.iconWeb.subscript}}|{{dinamicMenu.iconWeb.subway}}|{{dinamicMenu.iconWeb.suitcase}}|{{dinamicMenu.iconWeb.sun_o}}|{{dinamicMenu.iconWeb.superscript}}|{{dinamicMenu.iconWeb.support}}|{{dinamicMenu.iconWeb.table}}|{{dinamicMenu.iconWeb.tablet}}|{{dinamicMenu.iconWeb.tachometer}}|{{dinamicMenu.iconWeb.tag}}|{{dinamicMenu.iconWeb.tags}}|{{dinamicMenu.iconWeb.tasks}}|{{dinamicMenu.iconWeb.taxi}}|{{dinamicMenu.iconWeb.television}}|{{dinamicMenu.iconWeb.tencent_weibo}}|{{dinamicMenu.iconWeb.terminal}}|{{dinamicMenu.iconWeb.text_height}}|{{dinamicMenu.iconWeb.text_width}}|{{dinamicMenu.iconWeb.th}}|{{dinamicMenu.iconWeb.th_large}}|{{dinamicMenu.iconWeb.th_list}}|{{dinamicMenu.iconWeb.thumb_tack}}|{{dinamicMenu.iconWeb.thumbs_down}}|{{dinamicMenu.iconWeb.thumbs_o_down}}|{{dinamicMenu.iconWeb.thumbs_o_up}}|{{dinamicMenu.iconWeb.thumbs_up}}|{{dinamicMenu.iconWeb.ticket}}|{{dinamicMenu.iconWeb.times}}|{{dinamicMenu.iconWeb.times_circle}}|{{dinamicMenu.iconWeb.times_circle_o}}|{{dinamicMenu.iconWeb.tint}}|{{dinamicMenu.iconWeb.toggle_down}}|{{dinamicMenu.iconWeb.toggle_left}}|{{dinamicMenu.iconWeb.toggle_off}}|{{dinamicMenu.iconWeb.toggle_on}}|{{dinamicMenu.iconWeb.toggle_right}}|{{dinamicMenu.iconWeb.toggle_up}}|{{dinamicMenu.iconWeb.trademark}}|{{dinamicMenu.iconWeb.train}}|{{dinamicMenu.iconWeb.transgender}}|{{dinamicMenu.iconWeb.transgender_alt}}|{{dinamicMenu.iconWeb.trash}}|{{dinamicMenu.iconWeb.trash_o}}|{{dinamicMenu.iconWeb.tree}}|{{dinamicMenu.iconWeb.trello}}|{{dinamicMenu.iconWeb.tripadvisor}}|{{dinamicMenu.iconWeb.trophy}}|{{dinamicMenu.iconWeb.truck}}|{{dinamicMenu.iconWeb.try}}|{{dinamicMenu.iconWeb.tty}}|{{dinamicMenu.iconWeb.tumblr}}|{{dinamicMenu.iconWeb.tumblr_square}}|{{dinamicMenu.iconWeb.turkish_lira}}|{{dinamicMenu.iconWeb.tv}}|{{dinamicMenu.iconWeb.twitch}}|{{dinamicMenu.iconWeb.twitter}}|{{dinamicMenu.iconWeb.twitter_square}}|{{dinamicMenu.iconWeb.umbrella}}|{{dinamicMenu.iconWeb.underline}}|{{dinamicMenu.iconWeb.undo}}|{{dinamicMenu.iconWeb.university}}|{{dinamicMenu.iconWeb.unlink}}|{{dinamicMenu.iconWeb.unlock}}|{{dinamicMenu.iconWeb.unlock_alt}}|{{dinamicMenu.iconWeb.unsorted}}|{{dinamicMenu.iconWeb.upload}}|{{dinamicMenu.iconWeb.usd}}|{{dinamicMenu.iconWeb.user}}|{{dinamicMenu.iconWeb.user_md}}|{{dinamicMenu.iconWeb.user_plus}}|{{dinamicMenu.iconWeb.user_secret}}|{{dinamicMenu.iconWeb.user_times}}|{{dinamicMenu.iconWeb.users}}|{{dinamicMenu.iconWeb.venus}}|{{dinamicMenu.iconWeb.venus_double}}|{{dinamicMenu.iconWeb.venus_mars}}|{{dinamicMenu.iconWeb.viacoin}}|{{dinamicMenu.iconWeb.video_camera}}|{{dinamicMenu.iconWeb.vimeo}}|{{dinamicMenu.iconWeb.vimeo_square}}|{{dinamicMenu.iconWeb.vine}}|{{dinamicMenu.iconWeb.vk}}|{{dinamicMenu.iconWeb.volume_down}}|{{dinamicMenu.iconWeb.volume_off}}|{{dinamicMenu.iconWeb.volume_up}}|{{dinamicMenu.iconWeb.warning}}|{{dinamicMenu.iconWeb.wechat}}|{{dinamicMenu.iconWeb.weibo}}|{{dinamicMenu.iconWeb.weixin}}|{{dinamicMenu.iconWeb.whatsapp}}|{{dinamicMenu.iconWeb.wheelchair}}|{{dinamicMenu.iconWeb.wifi}}|{{dinamicMenu.iconWeb.wikipedia_w}}|{{dinamicMenu.iconWeb.windows}}|{{dinamicMenu.iconWeb.won}}|{{dinamicMenu.iconWeb.wordpress}}|{{dinamicMenu.iconWeb.wrench}}|{{dinamicMenu.iconWeb.xing}}|{{dinamicMenu.iconWeb.xing_square}}|{{dinamicMenu.iconWeb.y_combinator}}|{{dinamicMenu.iconWeb.y_combinator_square}}|{{dinamicMenu.iconWeb.yahoo}}|{{dinamicMenu.iconWeb.yc}}|{{dinamicMenu.iconWeb.yc_square}}|{{dinamicMenu.iconWeb.yelp}}|{{dinamicMenu.iconWeb.yen}}|{{dinamicMenu.iconWeb.youtube}}|{{dinamicMenu.iconWeb.youtube_play}}|{{dinamicMenu.iconWeb.youtube_square}} */ iconClass, hide, security, action, items) {
    let normalizedMenuItems = [];
    if (items) {
      if (Array.isArray(items)) {
        normalizedMenuItems = items;
      } else {
        normalizedMenuItems.push(items);
      }
    }
    let normalizedIconClass = "";
    if (iconClass) {
      if (iconClass != "fa-NONE") {
        if (iconClass.indexOf("fa-") == 0) {
          normalizedIconClass = "fa " + iconClass;
        } else {
          normalizedIconClass = iconClass;
        }
      }
    }
    return {
      "id": "TODO",
      "name": name ? name : "",
      "title": title ? title : "",
      "iconClass": normalizedIconClass,
      "hide": hide ? hide : "",
      "security": security ? security : "",
      "action": action ? action : "",
      "level": 0,
      "textPosition": "left",
      "imagePosition": "left",
      "contentTheme": "light",
      "iconTheme": "light",
      "menuItems": normalizedMenuItems
    };
  };

  /**
   * @type function
   * @name {{dinamicMenu.createMenuItemSecurity.name}}
   * @description {{dinamicMenu.createMenuItemSecurity.description}}
   * @nameTags criar | create | menu | item | seguranÃ§a | security
   * @param {ObjectType.OBJECT} visible {{dinamicMenu.createMenuItemSecurity.param.visible}}
   * @param {ObjectType.OBJECT} enabled {{dinamicMenu.createMenuItemSecurity.param.enabled}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.screen.createMenuItemSecurity = function(visible, enabled) {
    let normalizedVisible = [];
    if (visible && visible !== "") {
      if (Array.isArray(visible)) {
        normalizedVisible = visible;
      } else {
        normalizedVisible.push(visible);
      }
    }
    let normalizedEnabled = [];
    if (enabled && enabled !== "") {
      if (Array.isArray(enabled)) {
        normalizedEnabled = enabled;
      } else {
        normalizedEnabled.push(enabled);
      }
    }
    let security = "";
    if (normalizedVisible.length > 0) {
      security = "visible : " + normalizedVisible.join(";");
    }
    if (normalizedEnabled.length > 0) {
      if (security.length > 0) {
        security = security + ", enabled : " + normalizedEnabled.join(";");
      } else {
        security = "enabled : " + normalizedEnabled.join(";");
      }
    }
    return security;
  };

  /**
   * @category CategoryType.DATETIME
   * @categoryTags Date|Datetime|Data|Hora
   */
  this.cronapi.dateTime = {};

  this.cronapi.dateTime.formats = function() {
    var formats = [];

    if (this.cronapi.$translate.use() == 'pt_br')
      formats = ['DD/MM/YYYY HH:mm:ss', 'DD/MM/YYYY', 'DD-MM-YYYY HH:mm:ss', 'DD-MM-YYYY'];
    else
      formats = ['MM/DD/YYYY HH:mm:ss', 'MM/DD/YYYY', 'MM-DD-YYYY HH:mm:ss', 'MM-DD-YYYY'];

    formats.push('YYYY-MM-DDTHH:mm:ss');
    formats.push('HH:mm:ss')
    formats.push('MMMM');

    return formats;
  };

  this.cronapi.dateTime.getMomentObj = function(value) {
    var currentMoment = moment;

    if (value  instanceof moment) {
      return value;
    }
    else if (value instanceof Date) {
      return currentMoment(value).utcOffset(window.timeZoneOffset);
    }
    else  {
      if (value) {
        let dateString = new RegExp("\/Date\((.*?)\)/");
        let regexExecution = dateString.exec(value);
        if (regexExecution && regexExecution.length > 1) {
          let date = eval(`new Date${regexExecution[1]}`);
          return currentMoment(date).utcOffset(window.timeZoneOffset);
        }
      }

      var formats = this.cronapi.dateTime.formats();
      var momentObj = null;
      for (var ix in formats) {
        momentObj = currentMoment(value, formats[ix]);
        if (momentObj.isValid())
          break;
      }
      return momentObj;
    }
  };

  /**
   * @type function
   * @name {{getSecondFromDate}}
   * @nameTags getSecond
   * @description {{functionToGetSecondFromDate}}
   * @param {ObjectType.DATETIME} value {{ObjectType.DATETIME}}
   * @returns {ObjectType.LONG}
   */
  this.cronapi.dateTime.getSecond = function(value) {
    var date = this.cronapi.dateTime.getMomentObj(value);
    if (date)
      return date.get('second');
    return 0;
  };

  /**
   * @type function
   * @name {{getMinuteFromDate}}
   * @nameTags getMinute
   * @description {{functionToGetMinuteFromDate}}
   * @param {ObjectType.DATETIME} value {{ObjectType.DATETIME}}
   * @returns {ObjectType.LONG}
   */
  this.cronapi.dateTime.getMinute = function(value) {
    var date = this.cronapi.dateTime.getMomentObj(value);
    if (date)
      return date.get('minute');
    return 0;
  };

  /**
   * @type function
   * @name {{getHourFromDate}}
   * @nameTags getHour
   * @description {{functionToGetHourFromDate}}
   * @param {ObjectType.DATETIME} value {{ObjectType.DATETIME}}
   * @returns {ObjectType.LONG}
   */
  this.cronapi.dateTime.getHour = function(value) {
    var date = this.cronapi.dateTime.getMomentObj(value);
    if (date)
      return date.get('hour');
    return 0;
  };

  /**
   * @type function
   * @name {{getYearFromDate}}
   * @nameTags getYear
   * @description {{functionToGetYearFromDate}}
   * @param {ObjectType.DATETIME} value {{ObjectType.DATETIME}}
   * @returns {ObjectType.LONG}
   */
  this.cronapi.dateTime.getYear = function(value) {
    var date = this.cronapi.dateTime.getMomentObj(value);
    if (date)
      return date.get('year');
    return 0;
  };

  /**
   * @type function
   * @name {{getMonthFromDate}}
   * @nameTags getMonth
   * @description {{functionToGetMonthFromDate}}
   * @param {ObjectType.DATETIME} value {{ObjectType.DATETIME}}
   * @returns {ObjectType.LONG}
   */
  this.cronapi.dateTime.getMonth = function(value) {
    var date = this.cronapi.dateTime.getMomentObj(value);
    if (date)
      return date.get('month') + 1;
    return 0;
  };

  /**
   * @type function
   * @name {{getDayFromDate}}
   * @nameTags getDay
   * @description {{functionToGetDayFromDate}}
   * @param {ObjectType.DATETIME} value {{ObjectType.DATETIME}}
   * @returns {ObjectType.LONG}
   */
  this.cronapi.dateTime.getDay = function(value) {
    var date = this.cronapi.dateTime.getMomentObj(value);
    if (date)
      return date.get('date');
    return 0;
  };

  /**
   * @type function
   * @name {{getSecondsBetweenDates}}
   * @nameTags getSecondsBetweenDates|getSecondsDiffDate|diffDatesSeconds
   * @description {{functionToGetSecondsBetweenDates}}
   * @param {ObjectType.DATETIME} date {{largerDateToBeSubtracted}}
   * @param {ObjectType.DATETIME} date2 {{smallerDateToBeSubtracted}}
   * @returns {ObjectType.LONG}
   */
  this.cronapi.dateTime.getSecondsBetweenDates = function(date, date2) {
    var dateVar = this.cronapi.dateTime.getMomentObj(date);
    var date2Var = this.cronapi.dateTime.getMomentObj(date2);
    return dateVar.diff(date2Var, 'seconds');
  };

  /**
   * @type function
   * @name {{getMinutesBetweenDates}}
   * @nameTags getMinutesBetweenDates|getMinutesDiffDate|diffDatesMinutes
   * @description {{functionToGetMinutesBetweenDates}}
   * @param {ObjectType.DATETIME} date {{largerDateToBeSubtracted}}
   * @param {ObjectType.DATETIME} date2 {{smallerDateToBeSubtracted}}
   * @returns {ObjectType.LONG}
   */
  this.cronapi.dateTime.getMinutesBetweenDates = function(date, date2) {
    var dateVar = this.cronapi.dateTime.getMomentObj(date);
    var date2Var = this.cronapi.dateTime.getMomentObj(date2);
    return dateVar.diff(date2Var, 'minutes');
  };

  /**
   * @type function
   * @name {{getHoursBetweenDates}}
   * @nameTags getHoursBetweenDates|getHoursDiffDate|diffDatesHours
   * @description {{functionToGetHoursBetweenDates}}
   * @param {ObjectType.DATETIME} date {{largerDateToBeSubtracted}}
   * @param {ObjectType.DATETIME} date2 {{smallerDateToBeSubtracted}}
   * @returns {ObjectType.LONG}
   */
  this.cronapi.dateTime.getHoursBetweenDates = function(date, date2) {
    var dateVar = this.cronapi.dateTime.getMomentObj(date);
    var date2Var = this.cronapi.dateTime.getMomentObj(date2);
    return dateVar.diff(date2Var, 'hours');
  };

  /**
   * @type function
   * @name {{getDaysBetweenDates}}
   * @nameTags getDaysBetweenDates|getDaysDiffDate|diffDatesDays
   * @description {{functionToGetDaysBetweenDates}}
   * @param {ObjectType.DATETIME} date {{largerDateToBeSubtracted}}
   * @param {ObjectType.DATETIME} date2 {{smallerDateToBeSubtracted}}
   * @returns {ObjectType.LONG}
   */
  this.cronapi.dateTime.getDaysBetweenDates = function(date, date2) {
    var dateVar = this.cronapi.dateTime.getMomentObj(date);
    var date2Var = this.cronapi.dateTime.getMomentObj(date2);
    return dateVar.diff(date2Var, 'days');
  };

  /**
   * @type function
   * @name {{getMonthsBetweenDates}}
   * @nameTags getMonthsBetweenDates|getMonthsDiffDate|diffDatesMonths
   * @description {{functionToGetMonthsBetweenDates}}
   * @param {ObjectType.DATETIME} date {{largerDateToBeSubtracted}}
   * @param {ObjectType.DATETIME} date2 {{smallerDateToBeSubtracted}}
   * @returns {ObjectType.LONG}
   */
  this.cronapi.dateTime.getMonthsBetweenDates = function(date, date2) {
    var dateVar = this.cronapi.dateTime.getMomentObj(date);
    var date2Var = this.cronapi.dateTime.getMomentObj(date2);
    return dateVar.diff(date2Var, 'months');
  };

  /**
   * @type function
   * @name {{getYearsBetweenDates}}
   * @nameTags getYearsBetweenDates|getYearsDiffDate|diffDatesYears
   * @description {{functionToGetYearsBetweenDates}}
   * @param {ObjectType.DATETIME} date {{largerDateToBeSubtracted}}
   * @param {ObjectType.DATETIME} date2 {{smallerDateToBeSubtracted}}
   * @returns {ObjectType.LONG}
   */
  this.cronapi.dateTime.getYearsBetweenDates = function(date, date2) {
    var dateVar = this.cronapi.dateTime.getMomentObj(date);
    var date2Var = this.cronapi.dateTime.getMomentObj(date2);
    return dateVar.diff(date2Var, 'years');
  };

  /**
   * @type function
   * @name {{incSecond}}
   * @nameTags incSecond|increaseSecond
   * @description {{functionToIncSecond}}
   * @param {ObjectType.DATETIME} date {{ObjectType.DATETIME}}
   * @param {ObjectType.LONG} second {{secondsToIncrement}}
   * @returns {ObjectType.DATETIME}
   */
  this.cronapi.dateTime.incSecond = function(date, second) {
    var dateVar = this.cronapi.dateTime.getMomentObj(date);
    return dateVar.add('seconds', second).toDate();
  };

  /**
   * @type function
   * @name {{incMinute}}
   * @nameTags incMinute|increaseMinute
   * @description {{functionToIncMinute}}
   * @param {ObjectType.DATETIME} date {{ObjectType.DATETIME}}
   * @param {ObjectType.LONG} minute {{minutesToIncrement}}
   * @returns {ObjectType.DATETIME}
   */
  this.cronapi.dateTime.incMinute = function(date, minute) {
    var dateVar = this.cronapi.dateTime.getMomentObj(date);
    return dateVar.add('minutes', minute).toDate();
  };

  /**
   * @type function
   * @name {{incHour}}
   * @nameTags incHour|increaseHour
   * @description {{functionToIncHour}}
   * @param {ObjectType.DATETIME} date {{ObjectType.DATETIME}}
   * @param {ObjectType.LONG} hour {{hoursToIncrement}}
   * @returns {ObjectType.DATETIME}
   */
  this.cronapi.dateTime.incHour = function(date, hour) {
    var dateVar = this.cronapi.dateTime.getMomentObj(date);
    return dateVar.add('hours', hour).toDate();
  };

  /**
   * @type function
   * @name {{incDay}}
   * @nameTags incDay|increaseDay
   * @description {{functionToIncDay}}
   * @param {ObjectType.DATETIME} date {{ObjectType.DATETIME}}
   * @param {ObjectType.LONG} day {{daysToIncrement}}
   * @returns {ObjectType.DATETIME}
   */
  this.cronapi.dateTime.incDay = function(date, day) {
    var dateVar = this.cronapi.dateTime.getMomentObj(date);
    return dateVar.add('days', day).toDate();
  };

  /**
   * @type function
   * @name {{incMonth}}
   * @nameTags incMonth|increaseMonth
   * @description {{functionToIncMonth}}
   * @param {ObjectType.DATETIME} date {{ObjectType.DATETIME}}
   * @param {ObjectType.LONG} month {{monthsToIncrement}}
   * @returns {ObjectType.DATETIME}
   */
  this.cronapi.dateTime.incMonth = function(date, month) {
    var dateVar = this.cronapi.dateTime.getMomentObj(date);
    return dateVar.add('months', month).toDate();
  };

  /**
   * @type function
   * @name {{incYear}}
   * @nameTags incYear|increaseYear
   * @description {{functionToIncYear}}
   * @param {ObjectType.DATETIME} date {{ObjectType.DATETIME}}
   * @param {ObjectType.LONG} year {{yearsToIncrement}}
   * @returns {ObjectType.DATETIME}
   */
  this.cronapi.dateTime.incYear = function(date, year) {
    var dateVar = this.cronapi.dateTime.getMomentObj(date);
    return dateVar.add('years', year).toDate();
  };

  /**
   * @type function
   * @name {{getNow}}
   * @nameTags getNow|now|getDate
   * @description {{functionToGetNow}}
   * @returns {ObjectType.DATETIME}
   */
  this.cronapi.dateTime.getNow = function() {
    var momentDate = moment();
    return momentDate.toDate();
  };

  /**
   * @type function
   * @name {{formatDateTime}}
   * @nameTags formatDateTime
   * @description {{functionToFormatDateTime}}
   * @param {ObjectType.DATETIME} date {{ObjectType.DATETIME}}
   * @param {ObjectType.STRING} format {{format}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.dateTime.formatDateTime = function(date, format) {
    return this.cronapi.dateTime.getMomentObj(date).format(format);
  };

  /**
   * @type function
   * @name {{newDate}}
   * @nameTags newDate|createDate
   * @description {{functionToNewDate}}
   * @param {ObjectType.LONG} year {{year}}
   * @param {ObjectType.LONG} month {{month}}
   * @param {ObjectType.LONG} day {{day}}
   * @param {ObjectType.LONG} hour {{hour}}
   * @param {ObjectType.LONG} minute {{minute}}
   * @param {ObjectType.LONG} second {{second}}
   * @returns {ObjectType.DATETIME}
   */
  this.cronapi.dateTime.newDate = function(year, month, day, hour, minute, second) {
    var date = new Date();
    date.setYear(year);
    date.setMonth(month - 1);
    date.setDate(day);
    date.setHours(hour);
    date.setMinutes(minute);
    date.setSeconds(second);
    return this.cronapi.dateTime.getMomentObj(date).toDate();
  };

  this.cronapi.dateTime.updateDate = function(value, year, month, day, hour, minute, second, millisecond) {
    var date = this.cronapi.dateTime.getMomentObj(value).toDate();
    if (date && !isNaN(date.getTime())) {
      date.setYear(year);
      date.setMonth(month - 1);
      date.setDate(day);
      date.setHours(hour);
      date.setMinutes(minute);
      date.setSeconds(second);
      date.setMilliseconds(millisecond);
    }
    else{
      this.cronapi.screen.notify('error',this.cronapi.i18n.translate("InvalidDate",[  ]));
      return;
    }
    return this.cronapi.dateTime.getMomentObj(date).toDate();
  };

  /**
   * @type function
   * @name {{updateDate}}
   * @nameTags setDate|updateDate
   * @description {{functionToUpdateDate}}
   * @param {ObjectType.DATETIME} date {{ObjectType.DATETIME}}
   * @param {ObjectType.STRING} type {{attribute}}
   * @param {ObjectType.LONG} value {{value}}
   * @returns {ObjectType.DATETIME}
   */
  this.cronapi.dateTime.updateNewDate = function(date, /** @type {ObjectType.STRING} @description {{attribute}} @blockType util_dropdown @keys year|month|day|hour|minute|second|millisecond  @values {{year}}|{{month}}|{{day}}|{{hour}}|{{minute}}|{{second}}|{{millisecond}}  */ type, value ) {
    var updatedDate = this.cronapi.dateTime.getMomentObj(date).toDate();
    if (updatedDate && !isNaN(updatedDate.getTime())) {
      switch(type){
        case "year":
          updatedDate.setYear(value);
          break;
        case "month":
          updatedDate.setMonth(value - 1);
          break;
        case "day":
          updatedDate.setDate(value);
          break;
        case "hour":
          updatedDate.setHours(value);
          break;
        case "minute":
          updatedDate.setMinutes(value);
          break;
        case "second":
          updatedDate.setSeconds(value);
          break;
        case "millisecond":
          updatedDate.setMilliseconds(value);
          break;
      }
    }
    else{
      this.cronapi.screen.notify('error',this.cronapi.i18n.translate("InvalidDate",[  ]));
      return;
    }
    return this.cronapi.dateTime.getMomentObj(updatedDate).toDate();
  };

  /**
   * @category CategoryType.TEXT
   * @categoryTags TEXT|text
   */
  this.cronapi.text = {};

  /**
   * @type function
   * @wizard text_prompt_ext
   */
  this.cronapi.text.prompt = function(/** @type {ObjectType.STRING} @defaultValue abc*/ value) {
    return null;
  }

  /**
   * @type function
   * @name {{toSupplyText}}
   * @description {{toSupplyTextDescription}}
   * @nameTags text|replace|supply
   * @param {ObjectType.STRING} text {{toSupplyTextParam0}}
   * @param {ObjectType.OBJECT} terms {{toSupplyTextParam1}}
   * @arbitraryParams true
   * @returns {ObjectType.STRING}
   */
   this.cronapi.text.formatTextWithReplacement = function(text, ...terms) {
    var args = Array.prototype.slice.call(terms, 0);
    return text.replace(/\{(\d+)\}/g, function (match, index) {
      return args[index];
    });
  };

  /**
   * @type function
   * @name {{newline}}
   * @description {{newlineDescription}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.text.newline = function() {
    return "\n";
  }

  /**
   * @type function
   * @name {{replaceName}}
   * @nameTags text|replace
   * @description {{replaceDescription}}
   * @param {ObjectType.STRING} textReplace {{textReplaceElement}}
   * @param {ObjectType.STRING} textReplaceTargetRegex {{textReplaceTargetRegexElement}}
   * @param {ObjectType.STRING} typeReplace {{typeReplaceElement}}
   * @param {ObjectType.STRING} textReplaceReplacement {{textReplaceReplacementElement}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.text.replaceAll = function(/** @type {ObjectType.STRING} @defaultValue Xmas.*/ textReplace, /** @type {ObjectType.STRING} @defaultValue X*/ textReplaceTargetRegex, /** @type {ObjectType.STRING} @description {{typeReplaceElement}} @defaultValue - @blockType util_dropdown @keys -|g|i|m|gi|gim|gm  @values {{-}}|{{g}}|{{i}}|{{m}}|{{gi}}|{{gim}}|{{gm}}  */ typeReplace, /** @type {ObjectType.STRING} @defaultValue Christmas*/ textReplaceReplacement){
    if (this.cronapi.logic.isNull(textReplace) || this.cronapi.logic.isNull(textReplaceTargetRegex) || this.cronapi.logic.isNull(textReplaceReplacement))
      return null;
    if (typeReplace !== '-')
      return textReplace.replace(new RegExp(textReplaceTargetRegex, typeReplace), textReplaceReplacement);
    return textReplace.replace(textReplaceTargetRegex, textReplaceReplacement);
  }

  /**
   * @category CategoryType.XML
   * @categoryTags XML|xml
   */
  this.cronapi.xml = {};

  /**
   * @type function
   * @name {{newXMLEmptyName}}
   * @nameTags newXMLEmptyValue
   * @description {{newXMLEmptyDescription}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.xml.newXMLEmpty = function() {
    return $.parseXML('<?xml version="1.0" encoding="UTF-8"?><root></root>');
  };

  /**
   * @type function
   * @name {{newXMLEmptyWithRootName}}
   * @nameTags newXMLEmptyWithRoot
   * @description {{newXMLEmptyWithRootDescription}}
   * @param {ObjectType.OBJECT} rootElement {{rootElement}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.xml.newXMLEmptyWithRoot = function(rootElement) {
    var t__temp = $.parseXML('<?xml version="1.0" encoding="UTF-8"?><root></root>');
    t__temp.removeChild(t__temp.firstElementChild);
    t__temp.appendChild(rootElement);
    return t__temp;
  };


  /**
   * @type function
   * @name {{newXMLElementName}}
   * @nameTags newXMLElement
   * @description {{newXMLElementDescription}}
   * @param {ObjectType.STRING} elementName {{elementName}}
   * @param {ObjectType.STRING} value {{content}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.xml.newXMLElement = function(elementName, value) {
    var t__tempElement = document.createElement(elementName);
    t__tempElement.textContent = value;
    return t__tempElement;
  };

  /**
   * @type function
   * @name {{addXMLElementName}}
   * @nameTags addXMLElement
   * @description {{addXMLElementDescription}}
   * @param {ObjectType.OBJECT} parent {{parentElement}}
   * @param {ObjectType.OBJECT} value {{elementToAdd}}
   * @returns {ObjectType.BOOLEAN}
   */
  this.cronapi.xml.addXMLElement = function(parent, element) {
    try{
      var temp = element.cloneNode(true);
      parent.appendChild(temp);
      return true;
    }catch(e){
      return false;
    }
  };

  /**
   * @type function
   * @name {{XMLHasRootElementName}}
   * @nameTags XMLHasRootElement
   * @description {{XMLHasRootElementDescription}}
   * @param {ObjectType.OBJECT} element {{element}}
   * @returns {ObjectType.BOOLEAN}
   */
  this.cronapi.xml.XMLHasRootElement = function(element) {
    if(element  &&  element.getRootNode()) return true;
    return false;
  }


  /**
   * @type function
   * @name {{XMLGetRootElementName}}
   * @nameTags XMLGetRootElement
   * @description {{XMLGetRootElementDescription}}
   * @param {ObjectType.OBJECT} element {{element}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.xml.XMLGetRootElement = function(element) {
    if(element instanceof XMLDocument){
      return element.firstElementChild;
    }
    return element.getRootNode();
  }

  /**
   * @type function
   * @name {{XMLDocumentToTextName}}
   * @nameTags XMLDocumentToText
   * @description {{XMLDocumentToTextDescription}}
   * @param {ObjectType.OBJECT} xml {{element}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.xml.XMLDocumentToText = function(xml) {
    if(xml instanceof XMLDocument){
      return $($($(xml.firstElementChild).context.outerHTML).removeAttr('xmlns'))[0].outerHTML ;
    }
    if($(xml).size() > 1 ){
      var __v = '';
      $.each($(xml).toArray() , function(key , value){  __v += $($(value)[0].outerHTML).removeAttr('xmlns')[0].outerHTML  } );
      return __v;
    }
    return $($($(xml).context.outerHTML).removeAttr('xmlns'))[0].outerHTML ;
  }


  /**
   * @type function
   * @name {{getChildrenName}}
   * @nameTags getChildren
   * @description {{getChildrenDescription}}
   * @param {ObjectType.OBJECT} element {{element}}
   * @param {ObjectType.STRING} search {{getChildrenParam1}}
   * @returns {ObjectType.LIST}
   */
  this.cronapi.xml.getChildren = function(element, search) {
    if(element instanceof XMLDocument){
      return element.firstElementChild.toArray;
    }
    if(search){
      if(search.localName){
        return $(element).find(search.localName).toArray();
      }else {
        return $(element).find(search).toArray();
      }
    }
    return $(element).children().toArray();
  };

  /**
   * @type function
   * @name {{setAttributeName}}
   * @nameTags setAttribute
   * @description {{setAttributeDescription}}
   * @param {ObjectType.OBJECT} element {{element}}
   * @param {ObjectType.STRING} attributeName {{attributeName}}
   * @param {ObjectType.STRING} attributeValue {{attributeValue}}
   * @returns {ObjectType.BOOLEAN}
   */
  this.cronapi.xml.setAttribute = function(element, attributeName, attributeValue) {
    if(!attributeName){
      return false;
    }
    if(element instanceof XMLDocument){
      element.firstChild.setAttribute(attributeName, attributeValue);
      return true;
    }
    if(element){
      element.setAttribute(attributeName, attributeValue);
      return true;
    }
    return false;
  };


  /**
   * @type function
   * @name {{getAttributeValueName}}
   * @nameTags getAttributeValue
   * @description {{getAttributeValueDescription}}
   * @param {ObjectType.OBJECT} element {{element}}
   * @param {ObjectType.STRING} attributeName {{attributeName}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.xml.getAttributeValue = function(element, attributeName) {
    if(!attributeName){
      return '';
    }
    if(element instanceof XMLDocument){
      return element.firstChild.getAttribute(attributeName)  ? element.firstChild.getAttribute(attributeName) : '' ;
    }
    if(element && attributeName ){
      return element.getAttribute(attributeName) ;
    }
    return '';
  }


  /**
   * @type function
   * @name {{getParentNodeName}}
   * @nameTags getParentNode
   * @description {{getParentNodeDescription}}
   * @param {ObjectType.OBJECT} element {{element}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.xml.getParentNode = function(element){

    if(element instanceof XMLDocument){
      return element.firstChild;
    }
    return element.parentNode;
  }



  /**
   * @type function
   * @name {{setElementValueName}}
   * @nameTags setElementValue
   * @description {{setElementValueDescription}}
   * @param {ObjectType.OBJECT} element {{element}}
   * @param {ObjectType.STRING} content {{content}}
   */
  this.cronapi.xml.setElementContent = function(element, content) {

    if(element instanceof XMLDocument){
      element.firstChild.textContent = content;
    }
    element.textContent = content;
  }


  /**
   * @type function
   * @name {{getElementContentName}}
   * @nameTags getElementContent
   * @description {{getElementContentDescription}}
   * @param {ObjectType.OBJECT} element {{element}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.xml.getElementContent = function(element) {
    if(element instanceof XMLDocument){
      return element.firstChild.innerText;
    }
    return element.innerText;
  }

  /**
   * @type function
   * @name {{removeElementName}}
   * @nameTags removeElement
   * @description {{removeElementDescription}}
   * @param {ObjectType.OBJECT} parent {{parentElement}}
   * @param {ObjectType.STRING} element {{element}}
   */
  this.cronapi.xml.removeElement = function(parent, element) {
    if(parent instanceof XMLDocument)
    {
      if(element)
      {
        if( element instanceof HTMLUnknownElement ){
          element.remove();
        }else
        {
          $.each( $(parent.firstElementChild.children), function( key , value )
          {
            if(value.localName == element)
              value.remove();
          });
        }
      }else
      {
        $.each( $(parent.firstElementChild.children), function( key , currentObject ){  currentObject.remove() });
      }
    }else
    {
      if(element)
      {
        if( element instanceof HTMLUnknownElement ){
          element.remove();
        }else
        {
          $.each( $(parent.children), function( key , value )
          {
            if(value.localName == element)
              value.remove();
          });
        }
      }else
      {
        $.each( $(parent.children), function( key , currentObject ){  currentObject.remove() });
      }
    }

  }

  /**
   * @type function
   * @name {{getElementNameName}}
   * @nameTags getElementName
   * @description {{getElementNameDescription}}
   * @param {ObjectType.OBJECT} element {{element}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.xml.getElementName = function(element){

    if(element instanceof XMLDocument){
      return element.firstChild.localName;
    }
    return element.localName;
  }

  /**
   * @type function
   * @name {{renameElementName}}
   * @nameTags renameElement
   * @description {{renameElementDescription}}
   * @param {ObjectType.OBJECT} element {{element}}
   * @param {ObjectType.STRING} name {{name}}
   */
  this.cronapi.xml.renameElement = function(element, name){
    var newElement = element.outerHTML.replace(element.localName, name )
    newElement = newElement.replace('/'+ element.localName ,'/'+name);
    newElement = $(newElement).removeAttr('xmlns');
    element.replaceWith(newElement[0]);
  }

  /**
   * @category CategoryType.LOGIC
   * @categoryTags LOGIC|logic
   */
  this.cronapi.logic = {};

  /**
   * @type function
   * @name {{LogicIsNullName}}
   * @nameTags isNull
   * @description {{LogicIsNullDescription}}
   * @returns {ObjectType.BOOLEAN}
   * @displayInline true
   */
  this.cronapi.logic.isNull = function(/** @type {ObjectType.OBJECT} @description */ value) {
    return (value === null || typeof value  == 'undefined'  || value == undefined);
  }

  /**
   * @type function
   * @name {{LogicIsEmptyName}}
   * @nameTags isEmpty
   * @description {{LogicIsEmptyDescription}}
   * @returns {ObjectType.BOOLEAN}
   * @displayInline true
   */
  this.cronapi.logic.isEmpty = function(/** @type {ObjectType.OBJECT} @description */ value) {
    return (value  === '');
  }

  /**
   * @type function
   * @name {{LogicIsNullOrEmptyName}}
   * @nameTags isNullOrEmpty
   * @description {{LogicIsNullOrEmptyDescription}}
   * @returns {ObjectType.BOOLEAN}
   * @displayInline true
   */
  this.cronapi.logic.isNullOrEmpty = function(/** @type {ObjectType.OBJECT} @description */ value) {
    return (this.cronapi.logic.isNull(value) || this.cronapi.logic.isEmpty(value));
  }


  /**
   * @type function
   * @name {{}}
   * @nameTags typeOf
   * @description {{typeOfDescription}}
   * @returns {ObjectType.OBJECT}
   * @displayInline true
   */
  this.cronapi.logic.typeOf = function(/** @type {ObjectType.OBJECT} @description {{value}} */ value, /** @type {ObjectType.OBJECT} @description {{typeOf}} @blockType util_dropdown @keys string|number|undefined|object|function|array  @values {{string}}|{{number}}|{{undefined}}|{{object}}|{{function}}|{{array}}  */ type) {
    if(type==='array') return Array.isArray(value);
    if(type==='object' && Array.isArray(value)) return false;
    return (typeof(value) === type);
  }

  this.cronapi.i18n = {};

  this.cronapi.i18n.translate = function(value , params) {
    if (value) {
      var text = this.cronapi.$translate.instant(value);
      for (var i = 0; i < params.length; i++){
        var param = params[i];
        if (param != null && typeof param != "undefined") {
          var regexp = new RegExp("\\{" + (i) + "\\}", "g");
          text = text.replace(regexp, param);
        }
      }
      return text;
    }
    return;
  };

  this.cronapi.internal = {};

  this.cronapi.internal.lastCronappMenuClick = function(id) {
    let injector = window.angular.element('body').injector();
    let $rootScope = injector.get('$rootScope');
    $rootScope.__lastCronappMenuClick = id;
  };

  this.cronapi.internal.isJsonString = (value) => {
    if (typeof value !== "string") {
      return false;
    }
    try {
      JSON.parse(value);
      return true;
    } catch (error) {
      return false;
    }
  };

  this.cronapi.internal.getPouchDB = (id) => {
    window.pouchDBInstances = window.pouchDBInstances || {};
    let instance;
    
    let createInstance = (id) => {
      window.pouchDBInstances[id] = new PouchDB(id);
      return window.pouchDBInstances[id];
    };

    if (window.pouchDBInstances[id]) {
      instance = window.pouchDBInstances[id];
    }
    else {
      instance = createInstance(id);
    }

    instance.info().then(function (info) { 
      if (!info) {
        instance.close();  
        instance = createInstance(id);
      }
    }).catch(function (error) { 
      instance.close();
      instance = createInstance(id);
    });

    return instance;
  };

  this.cronapi.internal.updatePouchDB = function (db, values, callback) { //romano
    let v = $.extend(true, {} , values);
    let documents = this.cronapi.internal.normalizePouchDBData(v);
    documents.forEach(v => {
      db.get(v._id).then(doc => {
        if (doc && doc._id) v._rev = doc._rev;
        return db.put(v);
      })
      .then(callback)
      .catch((err) => {
        if (err.name === 'not_found') {
          db.post(v).then(callback).catch(e => {
            console.error(e);
          });
        } else {
          console.error(err);
        }
      });
    });
  };

  this.cronapi.internal.normalizePouchDBData = function (data, revert) { //romano
    let values = [];
    // pouchdb does not accept properties with "_"
    $.each(data, function (idx, value) {
      let v = value;
      v[(revert ? '__metadata' : '$metadata')] = v[(!revert ? '__metadata' : '$metadata')];
      v[(revert ? '_objectKey' : '$objectKey')] = v[(!revert ? '_objectKey' : '$objectKey')];
      v[(revert ? '__$masterExpression' : '$$masterExpression')] = v[(!revert ? '__$masterExpression' : '$$masterExpression')];
      v[(revert ? '__parentId' : '$parentId')] = v[(!revert ? '__parentId' : '$parentId')];
      v[(revert ? '__sender' : '$sender')] = v[(!revert ? '__sender' : '$sender')];
      v[(revert ? '__status' : '$status')] = v[(!revert ? '__status' : '$status')];
      v[(revert ? '__original' : '$original')] = v[(!revert ? '__original' : '$original')];
      if (v.hasOwnProperty(!revert ? '__odataFile_attached' : '$odataFile_attached')) {
        v[(revert ? '__odataFile_attached' : '$odataFile_attached')] = v[(!revert ? '__odataFile_attached' : '$odataFile_attached')];
      }

      if (revert) {
        delete v.$metadata;
        delete v.$objectKey;
        delete v.$$masterExpression;
        delete v.$parentId;
        delete v.$sender;
        delete v.$status;
        delete v.$original;
        delete v.$odataFile_attached;
      } else {
        v._id = v._objectKey;
        delete v.__metadata;
        delete v._objectKey;
        delete v.__$id;
        delete v.__$masterExpression;
        delete v.__parentId;
        delete v.__sender;
        delete v.__status;
        delete v.__original;
        delete v.__odataFile_attached;
      }
      values.push(v);
    });
    return values;
  };

  this.cronapi.internal.getMaxZIndex = function() {
    let maxZIndex = 0;
    $('body *').each((idx, el) => {
      let elZIndex = window.getComputedStyle(el).zIndex;
      if (elZIndex && !Number.isNaN(parseFloat(elZIndex)) && $(el).is(':visible')) {
        elZIndex = parseFloat(elZIndex);
        maxZIndex = elZIndex > maxZIndex ? elZIndex : maxZIndex;
      }
    });
    return maxZIndex;
  };

  this.cronapi.internal.viewToRoute = function(view, environment) {
    var base = '';  // '/#'
    var route = undefined;

    // try get defined route in state
    if (this.cronapi.$scope && this.cronapi.$scope.$state) {
      let $states = this.cronapi.$scope.$state.get();
      var $state = $states.find(item => item.templateUrl === view)
      if ($state) route = base.concat($state.url);
    }

    // when without defined route - generic
    if (!route) {
      route = '/'.concat(view.replace('views/', '').replace('.view.html', ''));
      if (environment === 'mobile') {
        route = '/app'.concat(route);
      }
    }

    return route;
  };

  this.cronapi.internal.loginSocial = function (container){
    let $container = $(`#${container}`);
    let action = $container.attr('action');
    let $form = $('<form/>');
    $form.attr('method', 'POST');
    $form.attr('action', action);
    $container.children().appendTo($form);
    $container.parent().append($form);
    $form.submit();
  };

  this.cronapi.internal.selectContent = function(element) {
    let selection = window.getSelection();
    let range = document.createRange();
    range.selectNodeContents(element);
    selection.removeAllRanges();
    selection.addRange(range);
  };

  this.cronapi.internal.skipIterationLoop = function() {
    return new Promise((resolve) => {
      resolve();
    });
  };

  this.cronapi.internal.coverElement = function($element) {

    let cover = (id, obj) => {
      let width = obj.eq(0).outerWidth();
      let height = obj.eq(0).outerHeight();
      obj.each( function(index){

        let isInModal = $element.closest('.modal-dialog').length;
        let zIndex = isInModal ? 999999 : 9999;
        let toAppend = isInModal ? $('.modal.fade.in') : $element.parent();

        let position = $(this).offset();
        $(`<div class='cover-${id}'>`).css({
          "width": width,
          "height": height,
          "position": "absolute",
          "top": position.top,
          "left": position.left,
          "z-index": zIndex
        }).appendTo(toAppend);
      });
    };

      let id = $element.attr('id');
      cover(id, $element);
  };

  this.cronapi.internal.discoverElement = function($element) {
    let id = $element.attr('id');
    $(`.cover-${id}`).remove();
  };

  this.cronapi.internal.focusFormInput = function () {
    let $firstForm = $($('form')[0]);
    let $firstInput = $($firstForm.find('input')[0]);
    if ($firstInput && $firstInput.length) {
      let waitBecomeVisible = setInterval(()=> {
        if ($firstInput.is(':visible')) {
          if ($firstInput.data('role') !== 'dropdownlist') {
            $firstInput.focus();
          }
          clearInterval(waitBecomeVisible);
        }
      }, 100);
    }
  };

  this.cronapi.forceCloseAllModal = function() {
    var modals = $('.modal.fade.in');
    if (modals) {
      modals.each((idx, obj) => this.cronapi.screen.hideModal(obj.id));
    }
    $('.modal-backdrop.fade.in').remove();
  };

  this.cronapi.internal.setFile = function(field, file) {
    this.cronapi.internal.fileToBase64(file, function(base64) { this.cronapi.screen.changeValueOfField(field, base64); }.bind(this));
  };

  this.cronapi.internal.fileToBase64 = function(file, cb) {
    var fileReader = new FileReader();
    fileReader.readAsDataURL(file);
    fileReader.onload = function(e) {
      var base64Data = e.target.result.substr(e.target.result.indexOf('base64,') + 'base64,'.length);
      cb(base64Data);
    };
  };

  this.cronapi.internal.getMaxResolution = function getMaxResolution(width, height) {
    var maxWidth = window.innerWidth;
    var maxHeight = window.innerHeight;
    var ratio = 0;

    ratio = maxWidth / width;
    height = height * ratio;
    width = width * ratio;

    if(width > maxWidth){
      ratio = maxWidth / width;
      height = height * ratio;
      width = width * ratio;
    }

    if(height > maxHeight){
      ratio = maxHeight / height;
      width = width * ratio;
      height = height * ratio;
    }

    return { width: width, height: height };
  }

  this.cronapi.internal.startCamera = function(field, quality, allowEdit, targetWidth, targetHeight) {
    //verify if user is on Browser or not
    if(window.cordova && window.cordova.platformId && window.cordova.platformId !== 'browser') {
      // If in mobile devices use native camera cordova plugin
      this.cronapi.cordova.camera.getPicture((base64Image) => {
            this.cronapi.screen.changeValueOfField(field, base64Image.replace(/^data:image\/\w+;base64,/, '')); // The component template adds a fixed data:image
          }, (error) => {
            console.error(error);
            this.cronapi.$scope.Notification.error(error);
          },
          0, // 0|1|2 @values DATA_URL|FILE_URI|NATIVE_URI
          1, // 0|1|2 @values PHOTOLIBRARY|CAMERA|SAVEDPHOTOALBUM
          0, // 0|1|2 @values PICTURE|VIDEO|ALLMEDIA,
          allowEdit, // allowEdit
          parseInt(quality) !== 100 // compress
      );
    }else{
      var cameraContainer =   '<div class="camera-container" style="margin-left:-$marginleft$;margin-top:-$margintop$">\
                                      <button class="btn btn-success button button-balanced" id="cronapiVideoCaptureOk" style="position: absolute; z-index: 999999999;">\
                                          <span class="glyphicon glyphicon-ok icon ion-checkmark-round"></span>\
                                          <span class="sr-only">{{"Upload.camera" | translate}}</span>\
                                      </button>\
                                      <button class="btn btn-danger button button-assertive button-cancel-capture" id="cronapiVideoCaptureCancel" style="position: absolute; margin-left: 42px; z-index: 999999999;">\
                                          <span class="glyphicon glyphicon-remove icon ion-android-close"></span>\
                                          <span class="sr-only">{{"Cancel" | translate}}</span>\
                                      </button>\
                                      <video id="cronapiVideoCapture" style="height: $height$; width: $width$;" autoplay=""></video>\
                              </div>';

      var streaming = null;
      var mediaConfig =  { video: true };
      var errBack = function(e) {
        console.log('An error has occurred!', e)
      };

      if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia(mediaConfig).then(function(stream) {
          streaming = stream;

          var res = cronapi.internal.getMaxResolution(stream.getTracks()[0].getSettings().width, stream.getTracks()[0].getSettings().height);
          var halfWidth = res.width;
          var halfHeight = res.height;
          try {
            halfWidth = parseInt(halfWidth/2);
            halfHeight = parseInt(halfHeight/2);
          }
          catch (e) { }

          cameraContainer =
              cameraContainer
              .split('$height$').join(res.height+'px')
              .split('$width$').join(res.width+'px')
              .split('$marginleft$').join(halfWidth+'px')
              .split('$margintop$').join(halfHeight+'px')
          ;
          var cronapiVideoCapture = $(cameraContainer);
          cronapiVideoCapture.prependTo("body");
          var videoDOM = document.getElementById('cronapiVideoCapture');

          cronapiVideoCapture.find('#cronapiVideoCaptureCancel').on('click',function() {
            if (streaming!= null && streaming.getTracks().length > 0)
              streaming.getTracks()[0].stop();
            $(cronapiVideoCapture).remove();
          }.bind(this));

          cronapiVideoCapture.find('#cronapiVideoCaptureOk').on('click',function() {
            this.cronapi.internal.captureFromCamera(field, res.width, res.height);
            if (streaming!= null && streaming.getTracks().length > 0)
              streaming.getTracks()[0].stop();
            $(cronapiVideoCapture).remove();
          }.bind(this));

          videoDOM.srcObject = stream;
          videoDOM.onloadedmetadata = function(e) {
            videoDOM.play();
          };
        }.bind(this));
      }
    }
  };

  this.cronapi.internal.getPicture = function(options) {

    if(options.sourceType === 1){//CÃ£mera
      cronapi.internal.getPictureFromCamera(options);
    }else if (options.sourceType === 0 || options.sourceType === 2){// Galeria
      cronapi.internal.getPictureFromFile(options);
    }else{
      var captureChooser = '<div id="captureChooser"></div>';
      $(captureChooser).prependTo("body");
      $("#captureChooser").kendoDialog(
        {
          title: "",
          content: this.cronapi.i18n.translate("getImageFrom", []),
          buttonLayout:"normal",
          actions:
          [
            {
              text: this.cronapi.i18n.translate("camera", []),
              primary:!0,
              action: function(){
                cronapi.internal.getPictureFromCamera(options);
                return true;
              }
            },
            {
              text: this.cronapi.i18n.translate("gallery", []),
              action: function(){
                cronapi.internal.getPictureFromFile(options);
                return true;
              }
            }
          ]
        });
    }

  };

  this.cronapi.internal.getPictureFromCamera = function(options){

    var streaming = null;
    var mediaConfig =  { video: true };

    if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
      navigator.mediaDevices.getUserMedia(mediaConfig).then(function(stream) {
        streaming = stream;

        var res = cronapi.internal.getMaxResolution(stream.getTracks()[0].getSettings().width, stream.getTracks()[0].getSettings().height);
        var halfWidth = res.width;
        var halfHeight = res.height;
        try {
          halfWidth = parseInt(halfWidth/2);
          halfHeight = parseInt(halfHeight/2);
        }
        catch (e) { }

        var cameraContainer =   '<div class="camera-container" style="margin-left:-$marginleft$;margin-top:-$margintop$">\
                                    <button class="btn btn-success button button-balanced" id="cronapiFileBrowserOk" style="position: absolute; z-index: 999999999;">\
                                        <span class="glyphicon glyphicon-ok icon ion-checkmark-round"></span>\
                                        <span class="sr-only">{{"Upload.camera" | translate}}</span>\
                                    </button>\
                                    <button class="btn btn-danger button button-assertive button-cancel-capture" id="cronapiFileBrowserCancel" style="position: absolute; margin-left: 42px; z-index: 999999999;">\
                                        <span class="glyphicon glyphicon-remove icon ion-android-close"></span>\
                                        <span class="sr-only">{{"Cancel" | translate}}</span>\
                                    </button>\
                                    <video id="cronapiFileBrowser" style="height: $height$; width: $width$;" autoplay=""></video>\
                                </div>\
                                </div>';

        cameraContainer =
            cameraContainer
            .split('$height$').join(res.height+'px')
            .split('$width$').join(res.width+'px')
            .split('$marginleft$').join(halfWidth+'px')
            .split('$margintop$').join(halfHeight+'px')
        ;
        var cronapiFileBrowser = $(cameraContainer);
        cronapiFileBrowser.prependTo("body");
        var videoDOM = document.getElementById('cronapiFileBrowser');

        cronapiFileBrowser.find('#cronapiFileBrowserCancel').on('click',function() {
          if (streaming!= null && streaming.getTracks().length > 0)
            streaming.getTracks()[0].stop();
          if(options.errorCallback){
            options.errorCallback("OperaÃ§Ã£o cancelada");
          }
          $(cronapiFileBrowser).remove();
        }.bind(this));

        cronapiFileBrowser.find('#cronapiFileBrowserOk').on('click',function() {
          cronapi.internal.getPictureSuccess(options, res.width, res.height);
          if (streaming!= null && streaming.getTracks().length > 0)
            streaming.getTracks()[0].stop();
          $(cronapiFileBrowser).remove();
        }.bind(this));

        videoDOM.srcObject = stream;
        videoDOM.onloadedmetadata = function(e) {
          videoDOM.play();
        };
      }.bind(this))
      .catch(function(error) {
        if(options.errorCallback){
          options.errorCallback(error.toString());
        }
      }.bind(this));
    }else{
      if(options.errorCallback){
        options.errorCallback("Recurso nÃ£o suportado ou nÃ£o autorizado");
      }
    }
  }

  this.cronapi.internal.getPictureFromFile = function(options){

    var res = cronapi.internal.getMaxResolution(window.innerWidth, window.innerHeight);
    var halfWidth = res.width;
    var halfHeight = res.height;
    try {
      halfWidth = parseInt(halfWidth/2);
      halfHeight = parseInt(halfHeight/2);
    }catch (e) {console.log(e)}

    var cameraContainer =
      '<div class="camera-container" style="margin-left:-$marginleft$;margin-top:-$margintop$; height: $height$; width: $width$; display: flex; align-items: center; flex-direction: column; justify-content: center; background: #848484a3;">\
          <div style="overflow: hidden;max-width: 80%;overflow-y: scroll;"><img style="width: 100%; border-radius: 5px;" id="imgPreview" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAH0BAMAAAA5+MK5AAAAG1BMVEX09PTh4eHl5eXo6Ojy8vLq6urs7Ozw8PDu7u5TsDcvAAAH+0lEQVR42uzVMWpCQRQF0FeEJO37IZ+0cQdqoaWNYq9Y6w5EFKxduYtwBmbwnB1cLpcbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC86uO+m0+aND9co6btLNs1LFdRze0/m/Z7jkrW2bqfStk32b5xFRV8TbMDi6jgkT0YjlHcZ/ZhjOJO2Yn9u5aeOb5t6ZmF1/6d/fiLoi7Zj+EcJXXx6U927uCpaSCK4/gTQtvjvnaLXjt2Zj2CMJZj7TgOV8QRj6AOXgv4BxDHQf9sqTOdZ4Cy2d1s+G2a7xUOhE/eJoFNl+2s5yJX+UI345TqT9dzfa94jc/AH1bvNl7XUa902Dc5rQZUWRecWPN1XeWYT9fzhqbSm5qseNXcQ+w1/5+miure+csfZFfM0vMoj20fCbPsKMbDW6d4kwjajKXtGIf+glDrxTj0rcIUodZlaRjj0DXBFvvQFaGWjSIf+phgW98TvlVvZ71Vb2e9VW9nvVVvZ71Vb2e9VW9nvVVvZ/2xDeM3539+UPkSU9e0osPjES96+XlKJWuGevZVvmXwjcqVmLoqs3X4hErVBPXurt/+5LTUteV/Pg7/nmqC+k++V/+aSpSWuir5XshwStaSV5dBL7RP9tJS13S3S+83cFJX74744QxZS0tdWdBdNignrr5AB2Gve9ZnvLKBbZFPXH03ZAtXWuqKCnVCtqqmrZ4H7ddMS70469kuM8oZX7N6hxnnjK931mdBb2IkrX4WtkM5LXVd/EWHvImRtHqHGWjYa531jaA3MZJWv+DbYK7stc76ETPOOlebutzAw9zU1DnrGVtTtLqU1XtsybaHPC11Xby2AV3dalXfZGtD8uw3nrpyO/QB+dXrz6HVN9han/zKeQKnrkl6Fu3Qe8z9ObL6W7Y39URnNmjqyvEFZ1905sEcWP0i1sdG5LzIgKlrxxPeG30x7bjqMZY5QWeeYKkrt4vbwA99yQ6rHumWJudlBkpdx76RFfTFIo+qvhXl8SVnySCpK8eHVj90mXZQ9S5b017o0gRIvXAsI7a144ku046pHuPPkjkXMzjqqvhz2pr7osu0Y6rP2FLfF10yMOq6+AVL2/7owg6p3mVLY290yaCoK3JZ504D0IUdUd36xD71R5cMiLomh2HfDkIXdkR1y96CcQi6NMFQVy4fwncdhi7sgOqPn/HDMHTJQKhrKr9xbj8UXe7kAdXp0vKx1SHokkFQV+WtTDi6/BYB1VcvdP3rYHTJAKjr0p8s/KoKdGEHVKcvEdEl8/Tq6r7XKOakCzugOl1Zrkch6JJ5cnVN98rO/J/ZBN3ODqgu7zdKE6oMXdjhZv22zoiLHVB16MIOqE70vuh+MK0OXTJ4s76o94GF54QqRRd2RHWi7GYJ/+YXUZXokgGc9X9lh+fHe5++vyOqGl3YIdUDyrlsBnHWpRjowt4s9ZzLZzBnPSa6sDdJPWeXTINmXdBLsjdHPWe3TGNmXdBLszdFPWfXTENmXdAd2JuhnrN7phGzLuhO7E1Qz9kn04BZF3RH9vTVc/bLJD/rgu7Mnrr6X/buGLVhIIjCsIuwqScEnBvkGkqTe2wTUuoKvnkgEH7sqNAuHmv27bwDCImPHzUSC3oz++Ctg97BPrY66B3sQ7cOehf7yOqgd7EP3DronezjqoPeyR659cUFHfa46uXdBR32uK1XW13QYY+qXszOLuiwR229mtnqgc7WmOrFDPa7orO3mK1XXO6OTu0R1YsZ7A7oXJ49xWi9kqMDOrXHUy+4eKBTe7zWKy4u6NQeTb0YObqgwx6t9Xrl4oDOlljqoMN+X3S2xmoddG7OCd1itQ467F7otoRqHXTYPdDjtQ467G7otkRqHXSDHXRhddBh30BXbP0/Ou920BXVQWewgy7YejXGVtBl1UFnsIMu2DroG7WDbnrqoDPYL8bkWgf9dusfuqg66Az2izG51kHfYL9GF1MHncF+g67VOugbe7HfaaoXa5hW69X2T0u9DV2q9X3oiupt6FKtt6ErqbeiC7W+F11PvRVdqPVWdB31dnSZ1vejq6m3o8u03o6uot6DLtJ6C7qWeg+6SOs96BrqfegSrbehK6n3oUu03oeuoN6LLtB6K7qOei+6QOu96OOrH47+2NZDoT9WPRT6Rutxzmnd3vDqH3b4lsDntN4s1YdvPdijz6uerc+onq3PqJ6tz6ierc+onq3PqJ6tz6ierc+onq3PqJ6tz6ierc+onq3PqJ6tz6ierc+onq3PqO7feqyvKtaD1D+/jt73cvh/bhGGusU+FaB5x5+6/3qKulTP1lM9W0/1bD3Vs/VUz9ZTPVtP9Wz9FHVP3urnU9Q9ezx6MfbDzh2rRBADYRz/wOO8diLGrUV7dQstF0GwVPABFmwsFzmOK4978rurUi+bwIT8f0+QMElmhsBEeVVklWtLwiCn3ktsfWOW/Min1bclXYlbZGErj1b/Zsld1rSR9B69mBXJQ89WmSfN5Gs67hKjFvH1uTbPoFyurC43msvXJOwFYtbOoCoPUqvv3Ji1SKxJ1mJ7YzXpdNZmUfMlNXriwyQ1euI7nbX5xo+6aLGqiVKrYR+lRsMeld/RahAOyu+6itz+qhLWFTQxcVARH+bd7aRCds7j/jipmM/e/Apvg0ra//b3LvV/kwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACc2oNDAgAAAABB/197wggAAAAwCf/UoxkfDe2dAAAAAElFTkSuQmCC"/></div>\
          <input type="file" id="imageBrowser" accept="image/*" style="width: 0px; height: 0px; overflow: hidden;">\
          <div>\
            <button class="btn btn-success button button-balanced" id="cronapiFileBrowserOK" style="position: absolute; z-index: 999999999; bottom: 5px; left: calc(50% - 52px);">\
              <span class="glyphicon glyphicon-ok icon ion-checkmark-round"></span>\
              <span class="sr-only">{{"Upload.camera" | translate}}</span>\
            </button>\
            <button class="btn btn-danger button button-assertive button-cancel-capture" id="cronapiFileBrowserCancel" style="position: absolute; z-index: 999999999; bottom: 5px; right: calc(50% - 52px); margin-right: -5px;">\
              <span class="glyphicon glyphicon-remove icon ion-android-close"></span>\
              <span class="sr-only">{{"Cancel" | translate}}</span>\
            </button>\
          <\div>\
      </div>';

    cameraContainer =
        cameraContainer
        .split('$height$').join(res.height+'px')
        .split('$width$').join(res.width+'px')
        .split('$marginleft$').join(halfWidth+'px')
        .split('$margintop$').join(halfHeight+'px');

    var cronapiFileBrowser = $(cameraContainer);
    cronapiFileBrowser.prependTo("body");

    cronapiFileBrowser.find('#cronapiFileBrowserCancel').on('click',function() {
      if(options.errorCallback){
        options.errorCallback("OperaÃ§Ã£o cancelada");
      }
      $(cronapiFileBrowser).remove();
    }.bind(this));

    cronapiFileBrowser.find('#cronapiFileBrowserOK').on('click',function() {
      cronapi.internal.getPictureSuccess(options, res.width, res.height, true);
      $(cronapiFileBrowser).remove();
    }.bind(this));

    cronapiFileBrowser.find('#imgPreview').on('touchend click',function(e) {
      if(e.type == 'touchend'){
        $(this).off('click');
      }
      $('#imageBrowser').trigger('click');
    });

    cronapiFileBrowser.find('#imageBrowser').on('change', function () {
      $("img#imgPreview").attr('src', '');
      if (typeof (FileReader) != 'undefined') {
        var frImage = new FileReader();
        frImage.onload = function (e) {
            $("img#imgPreview").attr('src', e.target.result);
        }
        frImage.readAsDataURL($(this)[0].files[0]);
      }
    });
  }

  this.cronapi.internal.getPictureSuccess = function(options, width, height, fromGallery){

    if(options.successCallback){
      if(fromGallery){
        var file = document.getElementById('imageBrowser').files[0];
        if(file){
          var reader  = new FileReader();
          reader.onload = function(e){
            var binaryData = e.target.result;
            options.successCallback(binaryData);
          }
          reader.readAsDataURL(file);
        }else{
          options.successCallback(null);
        }
      }else{
        var canvas = document.createElement("canvas");
        canvas.width = width;
        canvas.height = height;
        var context = canvas.getContext('2d');
        var videoDOM = document.getElementById('cronapiFileBrowser');
        context.drawImage(videoDOM, 0, 0, width, height);
        let base64 = 'data:image/jpeg;base64, ' + canvas.toDataURL().substr(22);
        options.successCallback(base64);
      }
    }
  }

  this.cronapi.internal.downloadFileEntityMobile = function(datasource, field, indexData, fileInfo) {

    var tempJsonFileUploaded = null;
    var valueContent;
    var itemActive;
    if (indexData) {
      valueContent = datasource.data[indexData][field];
      itemActive = datasource.data[indexData];
    }
    else {
      try {
        valueContent = datasource.active[field];
        itemActive = datasource.active;
      }
      catch (e) {
        valueContent = datasource[field];
        itemActive = datasource;
      }
    }
    //Verificando se Ã© JSON Uploaded file
    try {
      var tempJsonFileUploaded = JSON.parse(valueContent);
    }
    catch(e) { }

    if (tempJsonFileUploaded) {
      var finalUrl = this.cronapi.internal.getAddressWithHostApp('/api/cronapi/filePreview/');
      window.open(finalUrl + tempJsonFileUploaded.path, '_system');
    }
    else if (valueContent.startsWith('https://') || valueContent.startsWith('http://')) {
      window.open(valueContent, '_system');
    }
    else {
      if (datasource.isOData()) {
        cronapi.internal.makeDownloadFromBytes(valueContent, fileInfo);
      }
      else {
        var url = '/api/cronapi/downloadFile';
        var splited = datasource.entity.split('/');

        var entity = splited[splited.length - 1];
        if (entity.indexOf(":") > -1) {
          //Siginifica que Ã© relacionamento, pega a entidade do relacionamento
          var entityRelation = '';
          var splitedDomainBase = splited[3].split('.');
          for (var i = 0; i < splitedDomainBase.length - 1; i++)
            entityRelation += splitedDomainBase[i] + '.';
          var entityRelationSplited = entity.split(':');
          entity = entityRelation + entityRelationSplited[entityRelationSplited.length - 1];
        }
        url += '/' + entity;
        url += '/' + field;
        var object = itemActive;
        var ids = datasource.getKeyValues(object);
        var currentIdxId = 0;
        for (var attr in ids) {
          if (currentIdxId == 0)
            url = url + '/' + object[attr];
          else
            url = url + ':' + object[attr];
          currentIdxId++;
        }
        var finalUrl = this.cronapi.internal.getAddressWithHostApp(url);
        window.open(finalUrl, '_system');
      }
    }
  };

  this.cronapi.internal.captureFromCamera = function(field, width, height) {
    var canvas = document.createElement("canvas"); // create img tag
    canvas.width = width;
    canvas.height = height;
    var context = canvas.getContext('2d');
    var videoDOM = document.getElementById('cronapiVideoCapture');
    context.drawImage(videoDOM, 0, 0, width, height);
    var base64 = canvas.toDataURL().substr(22);
    this.cronapi.screen.changeValueOfField(field, base64);
  };

  this.cronapi.internal.qrCodeScanner = function(success, fail, scanOptions){
    let selectedDeviceId;
    let barCodeOneD = "UPC_A|UPC_E|EAN_8|EAN_13|CODE_39|CODE_128|ITF|RSS14|RSS_EXPANDED";
    let codeReader;


    navigator.mediaDevices.getUserMedia({audio: false, video: true}).then(stream => {

    switch (scanOptions.formats) {
      case "AZTEC":
        codeReader = new ZXing.BrowserAztecCodeReader();
        break;
      case "DATA_MATRIX":
        codeReader = new ZXing.BrowserDatamatrixCodeReader();
        break;
      case "QR_CODE":
        codeReader = new ZXing.BrowserQRCodeReader();
        break;
      case "PDF_417":
        codeReader = new ZXing.BrowserPDF417Reader();
        break;
      default:
        codeReader = new ZXing.BrowserMultiFormatReader();
    }

    if(scanOptions.formats && barCodeOneD.indexOf(scanOptions.formats) != -1){
      codeReader = new ZXing.BrowserBarcodeReader();
    }

    codeReader.listVideoInputDevices()
    .then((videoInputDevices) => {
        selectedDeviceId = videoInputDevices[0].deviceId
        let cameraContainer = `<div style="position: fixed; display: flex; width: 100%; height: 100%; top: 0; left: 0; right: 0; bottom: 0; background-color:
                                            rgb(0 0 0 / 72%); z-index: 9999999; cursor: pointer; justify-content: center; align-items: center;">
                                            <div style="position: absolute">
                                              <div class="row" style="position: absolute; bottom 50px; z-index: 999999999;">
                                                  <div class="col-xs-8">
                                                  <select style="width: 100%; position: absolute; bottom: 10px;  left: 0; z-index: 999999999;" id="videoSource"></select>
                                                  </div>
                                                  <div class="col-xs-2">
                                                      <button class="btn btn-danger button button-dark" id="cronapiBarCodeChangeCam" >
                                                          <span class="glyphicon glyphicon-remove icon ion ion-ios-reverse-camera"></span>
                                                          <span class="sr-only">{{"ChangeCam" | translate}}</span>
                                                      </button>
                                                  </div>
                                                  <div class="col-xs-2">
                                                      <button class="btn btn-danger button button-assertive" id="cronapiBarCodeCancel" >
                                                          <span class="glyphicon glyphicon-remove icon ion-android-close"></span>
                                                          <span class="sr-only">{{"Cancel" | translate}}</span>
                                                      </button>
                                                  </div>
                                              </div>
                                              <video id="video" style="width: 100%; max-width: 600px; border-radius: 5px;"></video>
                                            </div>
                                          </div>`;
        let cronappVideoBarCode = $(cameraContainer);
        cronappVideoBarCode.prependTo("body");
        videoInputDevices.map((device, index)=>{
                    if (device.kind === 'videoinput') {
                        let option = document.createElement('option');
                        option.value = device.deviceId;
                        option.text = device.label || 'CÃ¢mera ' + (index + 1);
                        if (index === 0) {
                            option.selected = true;
                        }
                        document.querySelector('select#videoSource').appendChild(option);
                    }
                });
        cronappVideoBarCode.find('#cronapiBarCodeCancel').on('click', (() => {
            $(cronappVideoBarCode).remove();
            codeReader.reset();
        }).bind(this));
        cronappVideoBarCode.find('#cronapiBarCodeChangeCam').on('click', (() => {
                   let selectedIndex = $("#videoSource").prop("selectedIndex");
                   let itemsInDropDownList = $("#videoSource option").length;

                   if (selectedIndex < (itemsInDropDownList - 1)) {
                       $("#videoSource").prop("selectedIndex", selectedIndex + 1);
                   } else {
                       $("#videoSource").prop("selectedIndex", 0);
                   }
                   $("#videoSource").trigger('change');
        }).bind(this));
        cronappVideoBarCode.find('#videoSource').on('change', (() => {
                    codeReader.decodeOnceFromVideoDevice($("#videoSource").val(), 'video').then((result) => {
                    if (result) {
                        success(result.text);
                        $(cronappVideoBarCode).remove();
                        codeReader.reset();
                    }
                });
        }).bind(this));
        codeReader.decodeOnceFromVideoDevice(selectedDeviceId, 'video').then((result) => {
            if (result) {
                success(result.text);
                $(cronappVideoBarCode).remove();
                codeReader.reset();
            }
        });

    }).catch((err) => {
        fail(err);
        codeReader.reset();
    });

    }).catch(function(err) {
            fail(err);
        });
  }

  this.cronapi.internal.castBinaryStringToByteArray = function(binary_string) {
    var len = binary_string.length;
    var bytes = new Uint8Array( len );
    for (var i = 0; i < len; i++)        {
      bytes[i] = binary_string.charCodeAt(i);
    }
    return bytes;
  };

  this.cronapi.internal.castBase64ToByteArray = function(base64) {
    var binary_string = window.atob(base64);
    return this.cronapi.internal.castBinaryStringToByteArray(binary_string);
  };

  this.cronapi.internal.castByteArrayToString = function(bytes) {
    return String.fromCharCode.apply(null, new Uint16Array(bytes));
  };

  this.cronapi.internal.generatePreviewDescriptionByte = function(data, fileInfo) {
    var json;
    let fileInfoContent = eval(fileInfo);
    try {
      if (fileInfoContent) {
        json = JSON.parse(fileInfoContent);
      }
      else {
        //Verificando se Ã© JSON Uploaded file
        json = JSON.parse(data);
      }
    }
    catch (e) {
      try {
        //Tenta pegar do header
        json = JSON.parse(window.atob(data));
      }
      catch (e) {
        if (data && data.match(/__odataFile_/g)) {
          var file = eval(data);
          json = cronapi.internal.getJsonDescriptionFromFile(file);
        }
        //Verifica se Ã© url
        else if (data && (data.startsWith('http://') || data.startsWith('https://'))) {
          json = {};
          var urlSplited = data.split('/');
          var fullName = urlSplited[urlSplited.length - 1].replace('?dl=0','');
          var fullNameSplited = fullName.split('.')
          var extension = '.' + fullNameSplited[fullNameSplited.length - 1];
          json.fileExtension = extension;
          json.name = fullName.replace(extension, '');
          json.contentType = 'file/'+extension.replace('.','');
        }
        else if (data && this.cronapi.internal.isBase64(data)) {
          var fileName = 'download';
          var fileExtesion = this.cronapi.internal.getExtensionBase64(data);
          var contentType = this.cronapi.internal.getContentTypeFromExtension(fileExtesion);
          fileName += fileExtesion;
          json = {};
          json.fileExtension = fileExtesion;
          json.name = fileName;
          json.contentType = contentType;
        }
      }
    }
    if (json) {
      if (json.name.length > 25)
        json.name = json.name.substr(0,22)+'...';

      var result = (this.cronapi.$translate.use() == 'pt_br' ? "<b>Nome:</b> <br/>" : "<b>Name:</b> <br/>") + (json.contentType !== undefined ? json.name +"<br/>" : "");
      result += json.contentType !== undefined ? "<b>Content-Type:</b> <br/>" + json.contentType +"<br/>" : "";
      result += json.fileExtension !== "" ? this.cronapi.$translate.use() == 'pt_br' ? "<b>ExtensÃ£o:</b> <br/>" + json.fileExtension +"<br/>" : "<b>Extension:</b> <br/>" + json.fileExtension +"<br/>" : "";
      return result;
    }
  };

  this.cronapi.internal.getContentTypeFromExtension = function(extension) {
    if (extension) {
      switch (extension.toLowerCase()) {
        case '.png':
          return 'image/png';
        case '.jpg':
          return 'image/jpeg';
        case '.mp4':
          return 'video/mp4';
        case '.pdf':
          return 'application/pdf';
        case '.ico':
          return 'image/vnd.microsoft.icon';
        case '.rar':
          return 'application/x-rar-compressed';
        case '.rtf':
          return 'application/rtf';
        case '.txt':
          return 'text/plain';
        case '.zip':
          return 'application/zip';
        case '.srt':
          return 'text/srt';
        default:
          return 'unknown';
      }
    }
  };

  this.cronapi.internal.getExtensionBase64 = function(base64) {
    if (base64) {
      var data = base64.substr(0, 5);
      switch (data.toLocaleUpperCase())
      {
        case "IVBOR":
          return ".png";
        case "/9J/4":
          return ".jpg";
        case "AAAAF":
          return ".mp4";
        case "JVBER":
          return ".pdf";
        case "AAABA":
          return ".ico";
        case "UMFYI":
          return ".rar";
        case "E1XYD":
          return ".rtf";
        case "U1PKC":
          return ".txt";
        case "UESDB":
          return ".zip";
        case "MQOWM":
        case "77U/M":
          return ".srt";
        default:
          return "";
      }
    }
    return "";
  };

  this.cronapi.internal.isBase64 = function(str) {
    try {
      return btoa(atob(str)) == str;
    } catch (err) {
      return false;
    }
  };

  this.cronapi.internal.downloadUrl = function(url, fileName) {
    let link = document.createElement('a');
    link.setAttribute('href', url);
    link.setAttribute("download", fileName);
    let event = document.createEvent('MouseEvents');
    event.initMouseEvent('click', true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);
    link.dispatchEvent(event);
  };

  this.cronapi.internal.makeDownloadFromBytes = function(valueContent, fileInfo) {
    var urlCreator = window.URL || window.webkitURL || window.mozURL || window.msURL;
    var bytesOrFileInput;
    var fileName = 'download';

    if (valueContent.match(/__odataFile_/g)) {
      bytesOrFileInput = eval(valueContent);
      fileName = bytesOrFileInput.name
    }
    else {
      fileName += cronapi.internal.getExtensionBase64(valueContent);
      try {
        valueContent = window.atob(valueContent);
      } catch (e) {
        //NoCommand
      }
      bytesOrFileInput = cronapi.internal.castBinaryStringToByteArray(valueContent);
    }
    let fileInfoDescription = eval(fileInfo);
    if (fileInfoDescription) {
      let fileInfoJson = JSON.parse(fileInfoDescription);
      fileName = fileInfoJson.name;
    }
    var url = urlCreator.createObjectURL(new Blob([bytesOrFileInput],{type: 'application/octet-stream'}));
    cronapi.internal.downloadUrl(url, fileName);
  };

  this.cronapi.internal.downloadFileEntity = function(datasource, field, indexData, fileInfo) {

    var tempJsonFileUploaded = null;
    var valueContent;
    var itemActive;
    if (indexData) {
      valueContent = datasource.data[indexData][field];
      itemActive = datasource.data[indexData];
    }
    else {
      try {
        valueContent = datasource.active[field];
        itemActive = datasource.active;
      }
      catch (e) {
        valueContent = datasource[field];
        itemActive = datasource;
      }
    }
    //Verificando se Ã© JSON Uploaded file
    try {
      var tempJsonFileUploaded = JSON.parse(valueContent);
    }
    catch(e) { }

    if (tempJsonFileUploaded) {
      window.open('/api/cronapi/filePreview/'+tempJsonFileUploaded.path);
    }
    else if (valueContent.startsWith('https://') || valueContent.startsWith('http://')) {
      window.open(valueContent);
    }
    else {

      if (datasource.isOData()) {
        cronapi.internal.makeDownloadFromBytes(valueContent, fileInfo);
      }
      else {
        var url = '/api/cronapi/downloadFile';
        var splited = datasource.entity.split('/');

        var entity = splited[splited.length-1];
        if (entity.indexOf(":") > -1) {
          //Siginifica que Ã© relacionamento, pega a entidade do relacionamento
          var entityRelation = '';
          var splitedDomainBase = splited[3].split('.');
          for (var i=0; i<splitedDomainBase.length-1;i++)
            entityRelation += splitedDomainBase[i]+'.';
          var entityRelationSplited = entity.split(':');
          entity = entityRelation + entityRelationSplited[entityRelationSplited.length-1];
        }

        url += '/' + entity;
        url += '/' + field;
        var _u = JSON.parse(localStorage.getItem('_u')) || {};
        var object = itemActive;

        var finalUrl = this.cronapi.internal.getAddressWithHostApp(url);

        this.$promise = this.cronapi.$scope.$http({
          method: 'POST',
          url: finalUrl,
          data: (object) ? JSON.stringify(object) : null,
          responseType: 'blob',
          headers: {
            'Content-Type': 'application/json',
            'X-AUTH-TOKEN': _u.token,
          }
        }).then(function(data, status, headers, config) {
          headers = headers || data.headers;
          headers = headers();
          data = this.cronapi.getRequestData(data);
          var filename = headers['x-filename'] || 'download.bin';
          var urlCreator = window.URL || window.webkitURL || window.mozURL || window.msURL;
          try
          {
            var url = urlCreator.createObjectURL(data);
            cronapi.internal.downloadUrl(url, filename);
          } catch(ex) {
            console.log('Error downloading file');
            console.log(ex);
          }
        }.bind(this)).catch(function(data, status, headers, config) {
          console.log('Error downloading file');
        }.bind(this));
      }

    }

  };

  this.cronapi.internal.uploadFileAjax = function(field, file, progressId) {
    var uploadUrl = '/api/cronapi/uploadFile';
    var formData = new FormData();
    formData.append("file", file);
    var _u = JSON.parse(localStorage.getItem('_u')) || {};

    var finalUrl = this.cronapi.internal.getAddressWithHostApp(uploadUrl);

    this.$promise = this.cronapi.$scope.$http({
      method: 'POST',
      url: finalUrl,
      data: formData,
      headers:  {
        'Content-Type': undefined,
        'X-AUTH-TOKEN': _u.token
      },
      onProgress: function(event) {
        if (event.lengthComputable) {
          var complete = (event.loaded / event.total * 100 | 0);
          var $progressId = $('#'+progressId);
          if ($progressId.length > 0) {
            if ($progressId.data('type') == 'bootstrapProgress') {
              if (complete < 100) {
                $progressId.show();
                $progressId.find('.progress-bar').css('width', complete+'%');
              }
              else {
                $progressId.hide();
                $progressId.find('.progress-bar').css('width', '0%');
              }
            }
            else {
              var progress = document.getElementById(progressId);
              progress.value = progress.innerHTML = complete;
            }
          }

        }
      }
    }).then(function(data, status, headers, config) {
      data = this.cronapi.getRequestData(data);
      this.cronapi.screen.changeValueOfField(field, data.jsonString);
    }.bind(this)).catch(function(data, status, headers, config) {
      alert('Error uploading file');
    }.bind(this));

  };

  this.cronapi.internal.getFieldFromActiveString = function(rawActive) {
    var regexForField = /.active.([a-zA-Z0-9_-]*)/g;
    var groupField = regexForField.exec(rawActive);
    var fieldName = groupField[1];
    return fieldName;
  };

  this.cronapi.internal.getJsonDescriptionFromFile = function(file) {
    let json = {};
    if (file) {
      let fullNameSplited = file.name.split('.');
      let extension = '.' + fullNameSplited[fullNameSplited.length - 1];
      json.fileExtension = extension;
      json.name = file.name;
      json.contentType = file.type || 'unknown';
    }
    return json;
  };

  this.cronapi.internal.uploadFile = function(field, file, progressId, fileInfo, errorFile) {

    if (errorFile && errorFile.length) {
      if (errorFile[0].$errorMessages && errorFile[0].$errorMessages.maxSize) {
        let error = this.cronapi.$translate.instant("maxFileSize");
        showErrorNotification.bind(this)(`${error} ${errorFile[0].$errorParam}`);
      }
    }

    if (!file)
      return;

    var regexForDatasource = /(.*?).active./g;
    var groupDatasource = regexForDatasource.exec(field);
    //Verificar se Ã© campo de um datasource
    if (groupDatasource) {
      var datasource = eval(groupDatasource[1]);
      if (datasource.isOData()) {
        let fieldName = cronapi.internal.getFieldFromActiveString(field);
        let schemaField = datasource.getFieldSchema(fieldName);
        if (schemaField && schemaField.type == 'Binary') {
          datasource.active['__odataFile_' + fieldName] = file;
          datasource.active[fieldName] = datasource.name + '.active.__odataFile_' +  fieldName;
          if (fileInfo) {
            let json = cronapi.internal.getJsonDescriptionFromFile(file);
            let fieldFileInfo = cronapi.internal.getFieldFromActiveString(fileInfo);
            datasource.active[fieldFileInfo] = JSON.stringify(json);
          }
          return;
        }
      }
    }
    this.cronapi.internal.uploadFileAjax(field, file, progressId);
  };

  /**
   * @category CategoryType.OBJECT
   * @categoryTags OBJECT|object
   */
  this.cronapi.object = {};

  /**
   *  @type function
   * @name {{getProperty}}
   * @nameTags getProperty
   * @param {ObjectType.OBJECT} object {{object}}
   * @param {ObjectType.STRING} property {{property}}
   * @description {{getPropertyDescription}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.object.getProperty = function(object, property) {

    var splited = property.split('.');
    if(splited.length > 1 ){
      var recursiva = function(object, params , idx) {
        if (!idx) idx = 0;
        if(object[params[idx]] === undefined)
          object[params[idx]] = {};
        idx++;
        if (idx < params.length)
          return recursiva(object[params[idx -1]], params , idx);
        else return object[params[idx-1]];
      };
      return recursiva(object , splited , 0);
    }else{
      return object[property];
    }
  };

  /**
   *  @type function
   * @name {{setProperty}}
   * @nameTags setProperty
   * @param {ObjectType.OBJECT} object {{object}}
   * @param {ObjectType.STRING} property {{property}}
   * @param {ObjectType.OBJECT} value {{value}}
   * @description {{setPropertyDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.object.setProperty = function(object, property, value) {
    var splited = property.split('.');
    if(splited.length > 1 ){
      var recursiva = function(object, params,value , idx) {
        if (!idx) idx = 0;
        if(object[params[idx]] === undefined)
          object[params[idx]] = {};
        idx++;
        if (idx < params.length)
          recursiva(object[params[idx -1]], params, value , idx);
        else object[params[idx-1]] = value;
      };
      recursiva(object , splited , value, 0);
    }else{
      object[property] = value;
    }
  };

  /**
   * @type function
   * @name {{createObject}}
   * @description {{createObjectDescription}}
   * @nameTags object
   * @param {ObjectType.STRING} string {{string}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.object.createObjectFromString = function(string) {
    return JSON.parse(string);
  };

   /**
   * @type function
   * @name {{createObjectLoginJson}}
   * @description {{createObjectLoginJsonDescription}}
   * @nameTags object
   * @param {ObjectType.STRING} string {{Login}}
   * @param {ObjectType.STRING} string {{Password}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.object.createObjectLoginFromString = function(login, password) {
    let json = {};
    json["username"] = login;
    json["password"] = password;
    return JSON.parse(JSON.stringify(json));
  };

  /**
   * @type function
   * @name {{serializeObject}}
   * @description {{serializeObjectDescription}}
   * @nameTags object
   * @param {ObjectType.STRING} string {{string}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.object.serializeObject = function(obj) {
    return JSON.stringify(obj);
  };

  /**
   * @type function
   * @name {{deleteProperty}}
   * @description {{deletePropertyDescription}}
   * @nameTags object
   * @param {ObjectType.OBJECT} object {{object}}
   * @param {ObjectType.STRING} key {{key}}
   */
  this.cronapi.object.deleteProperty = function(obj, key) {
    delete obj[key];
  };

  /**
   * @type function
   * @name {{createNewObject}}
   * @nameTags createNewObject
   * @description {{functionToCreateNewObject}}
   * @arbitraryParams true
   * @wizard procedures_createnewobject_callreturn
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.object.newObject = function() {
    var result = {};

    if (arguments && arguments.length > 0) {
      for (var i = 0; i < arguments.length; i++) {
        var param = arguments[i];
        if (param.name)
          result[param.name] = param.value;
      }
    }
    return result;
  };

  /**
   * @type function
   * @name {{getObjectField}}
   * @nameTags getObjectField
   * @description {{functionToGetObjectField}}
   * @param {ObjectType.OBJECT} obj {{obj}}
   * @param {ObjectType.STRING} field {{field}}
   * @wizard procedures_get_field
   */
  this.cronapi.object.getObjectField = function(/** @type {ObjectType.OBJECT} @blockType variables_get */ obj, /** @type {ObjectType.STRING} @blockType procedures_get_field_object */ field) {
    var result = undefined;
    if (obj && field)
      result = obj[field];
    return result;
  };

  /**
   * @category CategoryType.JSON
   * @categoryTags JSON|json
   */
  this.cronapi.json = {};

  /**
   * @type function
   * @name {{createObjectJson}}
   * @description {{createObjectJsonDescription}}
   * @nameTags object
   * @param {ObjectType.STRING} string {{string}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.json.createObjectFromString = function(string) {
    return this.cronapi.object.createObjectFromString(string);
  };

  /**
   * @type function
   * @name {{setProperty}}
   * @nameTags setProperty
   * @param {ObjectType.OBJECT} object {{json}}
   * @param {ObjectType.STRING} property {{property}}
   * @param {ObjectType.OBJECT} value {{value}}
   * @description {{setPropertyDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.json.setProperty = function(object, property, value) {
    this.cronapi.object.setProperty(object, property, value)
  };

  /**
   * @type function
   * @name {{deleteProperty}}
   * @description {{deletePropertyDescription}}
   * @nameTags object
   * @param {ObjectType.OBJECT} object {{json}}
   * @param {ObjectType.STRING} key {{key}}
   */
  this.cronapi.json.deleteProperty = function(obj, key) {
    this.cronapi.object.deleteProperty(obj, key);
  };

  /**
   * @type function
   * @name {{getProperty}}
   * @nameTags getProperty
   * @param {ObjectType.OBJECT} object {{json}}
   * @param {ObjectType.STRING} property {{property}}
   * @description {{getPropertyDescription}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.json.getProperty = function(object, property) {
    return this.cronapi.object.getProperty(object, property);
  };

  /**
   * @category CategoryType.DEVICE
   * @categoryTags CORDOVA|cordova|Dispositivos|device|Device
   */
  this.cronapi.cordova = {};

  /**
   *  @type function
   * @name {{vibrate}}
   * @platform M
   * @nameTags vibrate
   * @param {ObjectType.OBJECT} vibrateValue {{vibrateValue}}
   * @description {{vibrateDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.cordova.vibrate = function(vibrateValue){
    navigator.vibrate(vibrateValue);
  };

  this.cronapi.cordova.device = {};

  /**
   *  @type function
   * @platform M
   * @name {{getFirebaseToken}}
   * @nameTags firebase|token|push|notification
   * @param {ObjectType.STATEMENTSENDER} success {{success}}
   * @param {ObjectType.STATEMENTSENDER} error {{error}}
   * @description {{getFirebaseTokenDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.cordova.device.getFirebaseToken = function (success, error) {
    function onDeviceReady() {
      try {
        window.FirebasePlugin.getToken(cronapi.util.handleCallback(success), cronapi.util.handleCallback(error));
      } catch (e) {
        console.error(e);
        error(e);
      }
    }
    // The deviceready event fires once Cordova has fully loaded. Once the event fires, you can safely make calls to Cordova APIs.
    document.addEventListener("deviceready", onDeviceReady, false);
  };


  /**
   *  @type function
   * @platform M
   * @name {{getFirebaseNotificationData}}
   * @nameTags firebase|token|push|notification
   * @param {ObjectType.STATEMENTSENDER} success {{success}}
   * @param {ObjectType.STATEMENTSENDER} error {{error}}
   * @description {{getFirebaseNotificationDataDesc}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.cordova.device.getFirebaseNotificationData = function (success, error) {
    // Full documentation on https://github.com/dpa99c/cordova-plugin-firebasex
    // onNotificationOpen() renamed to onMessageReceived() on cordova-plugin-firebasex
    function onDeviceReady() {
      try {
        // Available on cronapi-firebase-push@2.0.0
        window.FirebasePlugin.onMessageReceived(function (notification) {
          success(notification);
        }, function (err) {
          error(err);
        });
      } catch (e) {
        console.warn(e);
      }

      // Keep old code if user is using deprecated cordova-plugin-firebase that still works on android
      try {
        // @deprecated
        // Available on cronapi-firebase-push@1.0.0
        window.FirebasePlugin.onNotificationOpen(function (notification) {
          success(notification);
        }, function (err) {
          error(err);
        });
      } catch (e) {
        console.warn(e);
      }
    }

    document.addEventListener("deviceready", onDeviceReady, false);
  };


  /**
   *  @type function
   * @platform M
   * @name {{getDeviceInfo}}
   * @nameTags device|dispositivo|info
   * @param {ObjectType.STRING} type {{type}}
   * @description {{getDeviceInfoDescription}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.cordova.device.getDeviceInfo = function( /** @type {ObjectType.STRING} @description {{type}} @blockType util_dropdown @keys uuid|model|platform|version|manufacturer|isVirtual|serial @values uuid|model|platform|version|manufacturer|isVirtual|serial  */ type){
    return window.device[type];
  };

  this.cronapi.cordova.geolocation = {};

  /**
   * @type function
   * @name {{getCurrentPosition}}
   * @nameTags geolocation|getCurrentPosition
   * @param {ObjectType.STATEMENTSENDER} success {{success}}
   * @param {ObjectType.STATEMENTSENDER} error {{error}}
   * @description {{getCurrentPositionDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.cordova.geolocation.getCurrentPosition = function(success, error){
    navigator.geolocation.getCurrentPosition(this.cronapi.util.handleCallback(success), this.cronapi.util.handleCallback(error));
  };

  /**
   *  @type function
   * @platform M
   * @name {{watchPosition}}
   * @nameTags geolocation|watchPosition
   * @param {ObjectType.STATEMENTSENDER} success {{success}}
   * @param {ObjectType.STATEMENTSENDER} error {{error}}
   * @param {ObjectType.LONG} maximumAge {{maximumAge}}
   * @param {ObjectType.LONG} timeout {{timeout}}
   * @param {ObjectType.BOOLEAN} enableHighAccuracy {{enableHighAccuracy}}
   * @description {{watchPositionDescription}}
   * @returns {ObjectType.LONG}
   */
  this.cronapi.cordova.geolocation.watchPosition = function(success, error, maximumAge, timeout, enableHighAccuracy){
    return navigator.geolocation.watchPosition(this.cronapi.util.handleCallback(success), this.cronapi.util.handleCallback(error), { maximumAge: maximumAge, timeout: timeout, enableHighAccuracy: enableHighAccuracy });
  };

  /**
   *  @type function
   * @platform M
   * @name {{clearWatchPosition}}
   * @nameTags geolocation|clearWatch
   * @param {ObjectType.LONG} watchID {{watchID}}
   * @description {{clearWatchPositionDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.cordova.geolocation.clearWatchPosition = function(watchID){
    navigator.geolocation.clearWatch(watchID);
  };

  this.cronapi.cordova.camera = {};

  /**
   * @type function
   * @name {{getPicture}}
   * @nameTags geolocation|getPicture
   * @description {{getPictureDescription}}
   * @returns {ObjectType.VOID}
   */

  this.cronapi.cordova.camera.getPicture = function(/** @type {ObjectType.STATEMENTSENDER} @description {{success}} */ success, /** @type {ObjectType.STATEMENTSENDER} @description {{error}} */  error, /** @type {ObjectType.LONG} @description {{destinationType}} @blockType util_dropdown @keys 0|1|2 @values DATA_URL|FILE_URI|NATIVE_URI  */  destinationType, /** @type {ObjectType.LONG} @description {{pictureSourceType}} @blockType util_dropdown @keys 0|1|2 @values PHOTOLIBRARY|CAMERA|SAVEDPHOTOALBUM  */ pictureSourceType, /** @type {ObjectType.LONG} @description {{mediaType}} @blockType util_dropdown @keys 0|1|2 @values PICTURE|VIDEO|ALLMEDIA  */ mediaType, /** @type {ObjectType.BOOLEAN} @description {{allowEdit}} @blockType util_dropdown @keys false|true @values {{false}}|{{true}}  */ allowEdit,  /** @type {ObjectType.BOOLEAN} @description {{Compress}} @blockType util_dropdown @defaultValue true @keys true|false @values {{true}}|{{false}}  */ compress) {
    if(mediaType === undefined || mediaType === null) mediaType = 0 ;
    allowEdit = (allowEdit === true || allowEdit === 'true');
    compress = (compress === true || compress === 'true');
    let options = {
      destinationType: Number(destinationType),
      sourceType: Number(pictureSourceType),
      mediaType: Number(mediaType),
      allowEdit: allowEdit,
      quality: (compress ? 50 /** default **/ : 100),
      encodingType: (compress ? 0 : 1)
    };
    if(window.cordova && window.cordova.platformId && window.cordova.platformId !== 'browser') {

      let resultWithData = async (data) => {
        if (data.startsWith("file://")) {
          data = Ionic.WebView.convertFileSrc(data);
        }
        else if (data && !data.startsWith("data:image")) {
          data = "data:image/jpeg;base64, " + data;
        }
        !success || success(data);
      };

      const encodeToBase64 = (src) => {
        return new Promise((resolve, reject) => {
          window.resolveLocalFileSystemURL(src, (fileEntry) => {
            fileEntry.file((file) => {
              const reader = new FileReader();
              reader.onloadend = () => {
                const base64Data = reader.result;
                resolve(base64Data);
              };
              reader.readAsDataURL(file);
            }, (error) => reject(error))
          })
        });
      };

      if (allowEdit && Number(mediaType) === 0) {
        navigator.camera.getPicture((fileUri) => {
          return plugins.ratioCrop((croppedImage) => {
            if (Number(destinationType) === Camera.DestinationType.FILE_URI) {
              resultWithData(croppedImage);
            } else {
              encodeToBase64(croppedImage).then(this.cronapi.util.handleCallback(resultWithData)).catch(this.cronapi.util.handleCallback(error));
            }
          }, this.cronapi.util.handleCallback(error), fileUri, {});
        }, this.cronapi.util.handleCallback(error), {
          ...options,
          destinationType: Camera.DestinationType.FILE_URI,
          allowEdit: false // It should be false see https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-camera/index.html#android-quirks
        })
      } else {
        navigator.camera.getPicture(this.cronapi.util.handleCallback(resultWithData), this.cronapi.util.handleCallback(error), options);
      }

    }else{
      options.allowEdit = allowEdit;
      options.successCallback = success;
      options.errorCallback = error;
      options.targetWidth = 640;
      options.targetHeight = 480;
      this.cronapi.internal.getPicture(options);
    }
  };

  /**
   * @type function
   * @name {{qrCodeScanner}}
   * @nameTags QRCODE|QR|BAR|Scanner|BARCODE
   * @param {ObjectType.STRING} format {{formatQRCode}}
   * @param {ObjectType.STRING} message {{messageQRCode}}
   * @description {{qrCodeScannerDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.cordova.camera.qrCodeScanner = function(/** @type {ObjectType.STRING} @description {{formatQRCode}} @blockType util_dropdown @keys all|QR_CODE|DATA_MATRIX|UPC_A|UPC_E|EAN_8|EAN_13|CODE_39|CODE_128|CODABAR|ITF|RSS14|PDF_417|RSS_EXPANDED|AZTEC @values {{allFormats}}|{{qrCode}}|DATA-MATRIX|UPC-A|UPC-E|EAN-8|EAN-13|Code 39|Code 128|Codabar|ITF|RSS14|PDF-417|RSS Expanded|AZTEC */  format,/** @type {ObjectType.STRING} @description {{messageQRCode}} */ message, /** @type {ObjectType.STATEMENTSENDER} @description {{success}} */ success, /** @type {ObjectType.STATEMENTSENDER} @description {{error}} */  error ) {
    const scanOptions = {
      preferFrontCamera : false,
      showFlipCameraButton : true,
      showTorchButton : true,
      saveHistory: true,
      prompt : message,
      resultDisplayDuration: 500,
      orientation : "portrait",
      disableAnimations : true,
      disableSuccessBeep: false
    };

    if('all' !== format){
      scanOptions.formats = format
    }

    if(window.cordova && window.cordova.platformId && window.cordova.platformId !== 'browser') {
      cordova.plugins.barcodeScanner.scan(
          function (result) {
            success(result.text);
          },
          function (errorMsg) {
            if (errorMsg !== 'Scan is already in progress') {
              // Verification in order to avoid issue: https://github.com/phonegap/phonegap-plugin-barcodescanner/issues/660
              error(errorMsg);
            }
          }, scanOptions
      );
    }else{
      this.cronapi.internal.qrCodeScanner(success, error, scanOptions);
    }
  };


  this.cronapi.cordova.file = {};

  /**
   * @type function
   * @platform M
   * @name {{getDirectory}}
   * @nameTags file|arquivo|directory|diretorio
   * @description {{getDirectoryDescription}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.cordova.file.getDirectory = function(/** @type {ObjectType.LONG} @description {{type}} @blockType util_dropdown @keys 0|1 @values {{INTERNAL}}|{{EXTERNAL}}  */  type) {
    var path;
    if (type == '0') {
      path = cordova.file.dataDirectory ;
    } else {
      path = cordova.file.externalApplicationStorageDirectory;
      if (!path) {
        path = cordova.file.externalDataDirectory;
      }
      if (!path) {
        path = cordova.file.syncedDataDirectory;
      }
    }
    return path;
  };


  /**
   * @type function
   * @platform M
   * @name {{removeFile}}
   * @nameTags file|arquivo|removeFile|remover
   * @param {ObjectType.STRING} fileName {{fileName}}
   * @param {ObjectType.STATEMENTSENDER} success {{success}}
   * @param {ObjectType.STATEMENTSENDER} error {{error}}
   * @description {{removeFileDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.cordova.file.removeFile = function(fileName, success, error) {
    window.resolveLocalFileSystemURL(fileName, function (fileEntry) {
      fileEntry.remove(function (entry) {
        if (success)
          success(entry);
      }.bind(this),this.cronapi.util.handleCallback(error));
    }.bind(this),this.cronapi.util.handleCallback(error));
  };

  /**
   * @type function
   * @platform M
   * @name {{readFile}}
   * @nameTags file|arquivo|readFile|lerarquivo
   * @description {{readFileDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.cordova.file.readFile = function( /** @type {ObjectType.STRING} @description {{fileName}} */ fileName,  /** @type {ObjectType.STATEMENTSENDER} @description {{success}} */ success,  /** @type {ObjectType.STATEMENTSENDER} @description {{error}} */ error, /** @type {ObjectType.STRING} @description {{returnType}} @blockType util_dropdown @keys ARRAYBUFFER|TEXT|BINARYSTRING|DATAURL @values {{ARRAYBUFFER}}|{{TEXT}}|{{BINARYSTRING}}|{{DATAURL}}   */  returnType) {
    window.resolveLocalFileSystemURL(fileName, function (fileEntry) {
      fileEntry.file(function (file) {
        var reader = new FileReader();
        reader.onloadend = function (e) {
          success(this.result);
        };
        switch (returnType) {
          case 'ARRAYBUFFER': {
            reader.readAsArrayBuffer(file);
            break;
          }
          case 'TEXT': {
            reader.readAsText(file);
            break;
          }
          case 'BINARYSTRING': {
            reader.readAsBinaryString(file);
            break;
          }
          case 'DATAURL': {
            reader.readAsDataURL(file);
            break;
          }
          default: {
            reader.readAsText(file);
          }
        };
      }.bind(this),this.cronapi.util.handleCallback(error));
    }.bind(this),this.cronapi.util.handleCallback(error));
  };

  /**
   * @type function
   * @platform M
   * @name {{createFile}}
   * @nameTags file|arquivo|createFile|criararquivo
   * @param {ObjectType.STRING} dirEntry {{dirEntry}}
   * @param {ObjectType.STRING} fileName {{fileName}}
   * @param {ObjectType.STRING} content {{content}}
   * @param {ObjectType.STATEMENTSENDER} success {{success}}
   * @param {ObjectType.STATEMENTSENDER} error {{error}}
   * @description {{createFileDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.cordova.file.createFile = function(dirEntry, fileName, content, success, error) {
    const path = (dirEntry || getDirectory(0));
    window.resolveLocalFileSystemURL(dirEntry,  function(directoryEntry) {
      console.log(dirEntry);
      directoryEntry.getFile(fileName, {create: true }, function (fileEntry) {
        fileEntry.createWriter(function(fileWriter) {
          fileWriter.onwriteend = function (e) {
            console.log('Write of file "' + fileName + '"" completed.');
          };
          fileWriter.onerror = function (e) {
            console.log('Write failed: ' + e.toString());
          };
          var data = new Blob([content], { type: 'text/plain' });
          fileWriter.write(data);
          if (success) {
            setTimeout(function() {
              success();
            }.bind(this),500);
          }
        }.bind(this), this.cronapi.util.handleCallback(error) );
      }.bind(this), this.cronapi.util.handleCallback(error) );
    }.bind(this), this.cronapi.util.handleCallback(error) );
  };

  /**
   * @type function
   * @platform M
   * @name {{createDirectory}}
   * @nameTags file|arquivo|criardiretorio
   * @param {ObjectType.STRING} dirParent {{dirParent}}
   * @param {ObjectType.STRING} dirChildrenName {{dirChildrenName}}
   * @param {ObjectType.STATEMENTSENDER} success {{success}}
   * @param {ObjectType.STATEMENTSENDER} error {{error}}
   * @description {{createDirectoryDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.cordova.file.createDirectory = function(dirParent, dirChildrenName, success, error) {
    window.resolveLocalFileSystemURL(dirParent,  function(directoryEntry) {
      directoryEntry.getDirectory(dirChildrenName, { create: true }, function (childrenEntry) {
        if (success)
          success(childrenEntry);
      }.bind(this),this.cronapi.util.handleCallback(error));
    }.bind(this), this.cronapi.util.handleCallback(error));
  };

  this.cronapi.cordova.storage = {};

  /**
   * @type function
   * @platform M
   * @name {{setStorageItem}}
   * @nameTags storage
   * @param {ObjectType.STRING} key {{key}}
   * @param {ObjectType.OBJECT} value {{value}}
   * @description {{setStorageItemDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.cordova.storage.setStorageItem = function(key, value) {
    var storage = window.localStorage;
    if (storage) {
      storage.setItem(key, value);
    } else {
      console.error('Local Storage not Found!');
    }
  };

  /**
   * @type function
   * @platform M
   * @name {{getStorageItem}}
   * @nameTags storage|getItem
   * @param {ObjectType.STRING} key {{key}}
   * @description {{getStorageItemDescription}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.cordova.storage.getStorageItem = function(key) {
    var storage = window.localStorage;
    if (storage) {
      return storage.getItem(key);
    } else {
      console.error('Local Storage not Found!');
    }
  };

  /**
   * @type function
   * @platform M
   * @name {{removeStorageItem}}
   * @nameTags storage|remove
   * @param {ObjectType.STRING} key {{key}}
   * @description {{removeStorageItemDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.cordova.storage.removeStorageItem = function(key) {
    var storage = window.localStorage;
    if (storage) {
      storage.removeItem(key);
    } else {
      console.error('Local Storage not Found!');
    }
  };

  this.cronapi.cordova.connection = {};

  /**
   * @type function
   * @platform M
   * @name {{getConnection}}
   * @nameTags connection
   * @description {{getConnectionDescription}}
   * @returns {ObjectType.BOOLEAN}
   */
  this.cronapi.cordova.connection.getConnection = function() {
    return navigator.connection.type;
  };

  /**
   * @type function
   * @platform M
   * @name {{verifyConnection}}
   * @nameTags connection
   * @description {{verifyConnectionDescription}}
   * @returns {ObjectType.BOOLEAN}
   */
  this.cronapi.cordova.connection.verifyConnection = function(/** @type {ObjectType.STRING} @description {{type}} @blockType util_dropdown @keys Connection.UNKNOWN|Connection.ETHERNET|Connection.WIFI|Connection.CELL_2G|Connection.CELL_3G|Connection.CELL_4G|Connection.CELL|Connection.NONE @values {{UnknownConnection}}|{{EthernetConnection}}|{{WiFiConnection}}|{{Cell2GConnection}}|{{Cell3GConnection}}|{{Cell4GConnection}}|{{CellGenericConnection}}|{{NoNetworkConnection}}  */  type) {
    return (navigator.connection.type == type);
  };

  this.cronapi.cordova.database = {};

  this.cronapi.cordova.database.DatabaseModule = class DatabaseModule {
    constructor(){
      this.DEFAULT_DATABASE_NAME = "cronappDB";
    }

    connect(dbName  = this.DEFAULT_DATABASE_NAME){
      let myOpenDatabaseMethod = window.openDatabase;
      // If in mobile environment use native sqlite
      if (window.sqlitePlugin) myOpenDatabaseMethod = window.sqlitePlugin.openDatabase;
      return myOpenDatabaseMethod(dbName, "1.0", dbName, 1000000);
    }

    async executeSQL(dbName  = this.DEFAULT_DATABASE_NAME, rawSQL = "", params = []){
      const dbInstance = this.connect(dbName);
      const extractMultipleSQLQueries = (command)=> command.trim().split(';').filter(str => str ? str : null);
      try{
        const splitedRawSQL = extractMultipleSQLQueries(rawSQL);
        return this.handleExecuteTransaction(dbInstance, splitedRawSQL, params);
      }catch(err){
        console.log(err);
        throw err;
      }
  }

  extractSQLResult(resultQuery){
    return resultQuery._array ?  resultQuery._array : resultQuery;
  }

  async handleExecuteSQL(transaction, raw, params){
    return new Promise( (resolve, reject) =>{
      transaction.executeSql(raw, params, (tx, resultSet) => {
        try{
          resolve(resultSet.rows);
        }catch(err){
          reject(err);
        }
      });
    });
  }

  async handleExecuteTransaction(dbInstance, splitedRawSQL, params){
    return new Promise((resultResolve, resultReject) => {
      try{
        dbInstance.transaction(async (transaction) =>{
        let partial;
        for (let raw of splitedRawSQL) {
          partial = await this.handleExecuteSQL(transaction, raw, params);
        }
        resultResolve(this.extractSQLResult(partial));
      });
      }catch(err){
        resultReject(err);
      }
    })

  }
}


  /**
   * @type function
   * @platform M
   * @name {{openDatabase}}
   * @nameTags openDatabase
   * @param {ObjectType.STRING} name {{name}}
   * @description {{openDatabaseDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.cordova.database.openDatabase = function(dbName) {
    const database = new this.cronapi.cordova.database.DatabaseModule();
    return database.connect(dbName);
  };

    /**
   * @type function
   * @platform M
   * @name {{executeSql}}
   * @nameTags executeSQL
   * @param {ObjectType.STRING} dbName {{dbName}}
   * @param {ObjectType.STRING} text SQL
   * @param {ObjectType.OBJECT} array {{arrayParams}}
   * @description {{executeSqlDescription}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.cordova.database.executeSQL = async function(dbName,rawSQL, params){
    let dbModule = new this.cronapi.cordova.database.DatabaseModule();
    return dbModule.executeSQL(dbName,rawSQL,params);
  };

  /**
   * @deprecated true
   * @platform M
   * @nameTags executesql
   * @param {ObjectType.STRING} dbName {{dbName}}
   * @param {ObjectType.STRING} text SQL
   * @param {ObjectType.OBJECT} array {{arrayParams}}
   * @description {{executeSqlDescription}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.cordova.database.executeSql = function(dbName,text, array, success , error){

    // exist DB
    var db = this.cronapi.cordova.database.openDatabase(dbName); // create DB

    // open transaction
    db.transaction(function(connect){
      // execute SQL
      connect.executeSql(text,array, function(a,b){success.call(this,Object.values(b.rows))}.bind(this));
    }.bind(this), function(e){
      // error
      console.log(e);
      error(e);
    }.bind(this));

  };


  /**
   * @deprecated true
   */
  this.cronapi.cordova.database.executeMultipleSql = function (dbName, text, success, error) {

    // exist DB
    var db = this.cronapi.cordova.database.openDatabase(dbName); // create DB
    let promises = [];
    let statements = text.split(';');

    for (let stmIdx in statements) {
      let statement = statements[stmIdx];
      if (!statement) { break; }
      let promise = new Promise((resolve, reject) => {
        db.transaction(function (txn) {
          txn.executeSql(statement.trim(), [], function (transaction, result) {
            resolve(result);
          }.bind(this),
            // callback de erro, funÃ§Ã£o anÃ´nima que recebe um objeto SQLTransaction e um SQLError
            function (transaction, error) {
              reject(error)
            }.bind(this));
        }.bind(this));
      });

      promises.push(promise);
    }

    Promise.all(promises).then(function (values) {
      success(values);
    }.bind(this)).catch(function (e) {
      error(e);
    }.bind(this));
  }
    
  /**
   * @category {{eventCategory}}
   * @categoryTags event | event
   */
  this.cronapi.event = {};

  /**
  * @type function
  * @name {{contextMenu}}
  * @nameTags contextMenu | menu | contexto | context
  * @description {{contextMenuDescription}}
  * @param {ObjectType.STRING} targetGeneral {{idItemListMenuParam}}
  * @param {ObjectType.STRING} effectAnimation {{animation}}
  * @param {ObjectType.STRING} actionClick {{actionClick}}
  * @param {ObjectType.OBJECT} kendoDatasource {{kendoDatasource}}
  */
   this.cronapi.event.contextMenu = function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ targetGeneral, /** @type {ObjectType.STRING}  @description {{animation}}  @blockType util_dropdown  @keys fadeIn|zoomIn|slideIn:down|slideIn:up  @values {{fade}}|{{zoom}}|{{slideInDown}}|{{slideInUp}} */ effectAnimation, /** @type {ObjectType.STRING}  @description {{actionClick}}  @blockType util_dropdown  @keys left|right @values {{left}}|{{right}} */ actionClick, kendoDatasource) {


    var idUL = `#ulKendoContextMenu`;

    // Remover kendoContextMenu antigo
    $(idUL).kendoMenu();
    var menu = $(idUL).data("kendoMenu");
    if (menu) {
      menu.destroy();
    }

    // Criar local onde armazenar
    let element = $('body');
    let spanCreated = $(`<ul id="ulKendoContextMenu"></ul>`);
    element.append(spanCreated);


    // Criar json
    let idMenu = '#' + targetGeneral;

    let jsonKendoContextMenu = {
      target: idMenu,
      animation: {
        open: { effects: effectAnimation },
        duration: 500
      }
    };

    if (actionClick === "left") {
      jsonKendoContextMenu.showOn = "click";
    }

    jsonKendoContextMenu.dataSource = (Array.isArray(kendoDatasource) ? kendoDatasource : [kendoDatasource]);
    $("#ulKendoContextMenu").kendoContextMenu(jsonKendoContextMenu);

  };

  /**
   * @type function
   * @name {{itemContextMenu}}
   * @nameTags contextMenu | menu | contexto | context | item
   * @description {{contextMenuDescription}}
   * @param {ObjectType.STRING} text {{text}}
   * @param {ObjectType.STRING} cssClass {{cssClass}}
   * @param {ObjectType.STATEMENT} action {{contextMenuItemActionDescription}}
   * @param {ObjectType.OBJECT} subItens {{kendoDatasource}}
   * @returns {ObjectType.OBJECT}
   */
   this.cronapi.event.itemContextMenu = function (/** @type{ObjectType.STRING} */ text, /** @type{ObjectType.STRING} */ cssClass, /** @type {ObjectType.STATEMENT} */ action, subItens) {

    let jsonItem = { text: text }
    if (subItens) { jsonItem.items = (Array.isArray(subItens) ? subItens : [subItens]) };
    if (!subItens) { jsonItem.select = action }
    if (cssClass) { jsonItem.cssClass = cssClass };
    return jsonItem;
  };

  /**
  * @type function
  * @name {{accordionChangeValue}}
  * @nameTags accordion | acordeÃ£o | abrir | fechar | colapse
  * @description {{accordionChangeValueDescription}}
  * @param {ObjectType.STRING} idAccordion {{accordionIdParamDescription}}
  * @param {ObjectType.STRING} action {{accordionActionParamDescription}}
  * @param {ObjectType.STRING} idItem {{accordionIdSubItemParamDescription}}
  */
   this.cronapi.event.changeValueAccordion = function (/** @type {ObjectType.STRING} @blockType ids_from_screen*/ idAccordion, /*@blockType util_dropdown @keys collapseAll|expandAll|collapseOne|expandOne @values {{accordionCollapseAll}}|{{accordionExpandAll}}|{{accordionCollapseOne}}|{{accordionExpandOne}} */ action, /** @type {ObjectType.STRING} @blockType ids_from_screen*/ idItem) {
  
    switch (action) {
      case "collapseAll":
        $('#' + idAccordion + ' .panel-collapse').data("bs.collapse", null);
        $('#' + idAccordion + ' .panel-collapse').collapse('hide');
        break;
      case "expandAll":
        $('#' + idAccordion + ' .panel-collapse').data("bs.collapse", null);
        $('#' + idAccordion + ' .panel-collapse').collapse('show');
        break;
      case "collapseOne":
        setTimeout(function(){$('#' + idItem).filter('[aria-expanded=true]').trigger("click")}, 500);
        break;
      case "expandOne":
        setTimeout(function(){$('#' + idItem).filter('[aria-expanded=false]').trigger("click")}, 500);
        break;
    }

  };

  /**
  * @type function
  * @name {{changeInnerTextButton}}
  * @nameTags botÃ£o | button |innerText | atributo | inserir | alterar | valor
  * @description {{changeInnerTextButtonDesc}}
  * @param {ObjectType.STRING} id {{idsFromScreen}}
  * @param {ObjectType.STRING} attrValue {{attrValue}}
  * @multilayer true
  */
  this.cronapi.event.changeInnerTextButton = function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id, /** @type {ObjectType.STRING} */ attrValue) {
    let router = `#${id} button span`;
    if ($(`#${id}`).prop('tagName') === 'BUTTON') {
      router = `#${id} span`;
    }
    $(router).text(attrValue);
  };

  /**
   * @type function
   * @platform M
   * @name {{openInAppBrowser}}
   * @nameTags openInAppBrowser
   * @param {ObjectType.STRING} url {{url}}
   * @description {{openInAppBrowserDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.cordova.database.openInAppBrowser = function(url) {
    if(cordova.InAppBrowser){
      cordova.InAppBrowser.open(url, '_blank', 'location=no');
    }
  };

  this.cronapi.cordova.util = {};

  /**
   * @type function
   * @platform M
   * @name {{fingerPrintRead}}
   * @nameTags fingerprint | digital | leitor
   * @description {{fingerPrintReadDescription}}
   * @param {ObjectType.STATEMENTSENDER} success {{success}}
   * @param {ObjectType.STATEMENTSENDER} error {{error}}
   * @param {ObjectType.LONG} result {{fingerPrintResult}}
  */
  this.cronapi.cordova.util.fingerPrintRead = function (success, fail) {
    if(Fingerprint){
      Fingerprint.isAvailable(isAvailableSuccess, isAvailableError);

      function isAvailableSuccess() {
        Fingerprint.show({}, successCallback, errorCallback);
      }

      function successCallback(){
        success(0);
      }

      function errorCallback(error){
        fail(-1);
      }

      function isAvailableError() {
        fail(-2);
      }
    }else{
      fail(-2);
    }
  }

  //Private variables and functions
  this.cronapi.internal.ptDate = function(varray) {
    var date;
    var day = varray[1];
    var month = varray[2];
    var year = varray[3];
    var hour = varray[5];
    var minute = varray[6];
    var second = varray[7];
    if (hour)
      date = new Date(year, month - 1, day, hour, minute, second);
    else
      date = new Date(year, month - 1, day, 0, 0, 0);
    return date;
  };

  this.cronapi.internal.enDate = function(varray) {
    var date;
    var month = varray[1];
    var day = varray[2];
    var year = varray[3];
    var hour = varray[5];
    var minute = varray[6];
    var second = varray[7];
    if (hour)
      date = new Date(year, month - 1, day, hour, minute, second);
    else
      date = new Date(year, month - 1, day, 0, 0, 0);
    return date;
  };

  this.cronapi.internal.parseBoolean = function(value) {
    if (!value)
      return false;
    if (typeof value == "boolean")
      return value;
    value = value.toString().toLowerCase().trim();
    return value == "1" || value == "true";
  };

  this.cronapi.internal.removeAccents = function(value) {
    var withAccents = 'Ã¡Ã Ã£Ã¢Ã¤Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã³Ã²ÃµÃ´Ã¶ÃºÃ¹Ã»Ã¼Ã§ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃ';
    var withoutAccents = 'aaaaaeeeeiiiiooooouuuucAAAAAEEEEIIIIOOOOOUUUUC';
    var newValue = '';
    for (i = 0; i < value.length; i++) {
      if (withAccents.search(value.substr(i, 1)) >= 0) {
        newValue += withoutAccents.substr(withAccents.search(value
        .substr(i, 1)), 1);
      } else {
        newValue += value.substr(i, 1);
      }
    }
    return newValue;
  };

  this.cronapi.internal.arrayRemove = function(array, value) {
    var i = this.cronapi.internal.arrayIndexOf(array, value);
    if (i != -1) {
      array.splice(i, 1);
    }
  };

  this.cronapi.internal.arrayIndexOf = function(array, value) {
    var index = -1;
    $(array).each(function(idx) {
      if (value == this) {
        index = idx;
      }
    });
    return index;
  };

  this.cronapi.internal.replaceAll = function(str, value, newValue) {
    return str.toString().split(value).join(newValue);
  };

  this.cronapi.internal.getWindowHeight = function() {
    $(window).height();
  };

  this.cronapi.internal.getWindowWidth = function() {
    $(window).width();
  };

  /**
   * @type internal
   */
  this.cronapi.internal.getAddressWithHostApp = function(address) {
    var urlWithoutEndSlash = window.hostApp || "";
    urlWithoutEndSlash = urlWithoutEndSlash.endsWith('/') ? urlWithoutEndSlash.substr(0, urlWithoutEndSlash.length - 1): urlWithoutEndSlash;
    if (address) {
      var addressWithoutStartSlash = address.startsWith('/') ? address.substr(1) : address;
      urlWithoutEndSlash === "" ? urlWithoutEndSlash = addressWithoutStartSlash : urlWithoutEndSlash = urlWithoutEndSlash + '/' + addressWithoutStartSlash;
    }
    return urlWithoutEndSlash;
  };

  /**
   *
   *  URL encode / decode
   *  http://www.webtoolkit.info/
   *
   **/

  this.cronapi.internal.Url = {
    // public method for url encoding
    encode : function (string) {
      if (string)
        return escape(this.cronapi.internal.Url._utf8_encode(string));
      return '';
    },
    // public method for url decoding
    decode : function (string) {
      if (string)
        return this.cronapi.internal.Url._utf8_decode(unescape(string));
      return '';
    },
    // private method for UTF-8 encoding
    _utf8_encode : function (string) {
      string = string.replace(/\r\n/g,"\n");
      var utftext = "";
      for (var n = 0; n < string.length; n++) {
        var c = string.charCodeAt(n);
        if (c < 128) {
          utftext += String.fromCharCode(c);
        }
        else if((c > 127) && (c < 2048)) {
          utftext += String.fromCharCode((c >> 6) | 192);
          utftext += String.fromCharCode((c & 63) | 128);
        }
        else {
          utftext += String.fromCharCode((c >> 12) | 224);
          utftext += String.fromCharCode(((c >> 6) & 63) | 128);
          utftext += String.fromCharCode((c & 63) | 128);
        }
      }
      return utftext;
    },
    // private method for UTF-8 decoding
    _utf8_decode : function (utftext) {
      var string = "";
      var i = 0;
      var c = c1 = c2 = 0;
      while ( i < utftext.length ) {
        c = utftext.charCodeAt(i);
        if (c < 128) {
          string += String.fromCharCode(c);
          i++;
        }
        else if((c > 191) && (c < 224)) {
          c2 = utftext.charCodeAt(i+1);
          string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
          i += 2;
        }
        else {
          c2 = utftext.charCodeAt(i+1);
          c3 = utftext.charCodeAt(i+2);
          string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
          i += 3;
        }
      }
      return string;
    }
  };

  this.cronapi.internal.stringToJs = function(str) {
    return (str + '').replace(/[\\"']/g, '\\$&').replace(/\u0000/g, '\\0');
  };

  this.cronapi.internal.getErrorMessage = function (data, message) {
    try {
      var json = null;
      if (typeof data === 'object') {
        if (data.data) {
          if (typeof data.data === 'object') {
            json = data.data;
          } else if (typeof data.data === 'string') {
            json = JSON.parse(data.data);
          }
        }
      } else if (typeof data === 'string') {
        json = JSON.parse(data);
      }
      if (json && json.error) {
        return json.error;
      }
    } catch(e) {
      //Abafa
    }

    return message;
  };


  /**
   * @type internal
   */
  this.cronapi.util.upload = function(id, description, filter, maxSize, multiple) {
    this.UploadService.upload({'description': description, 'id' : id, 'filter' : filter, 'maxSize': maxSize, 'multiple': multiple, 'scope': this});
  };

  /**
   * @type function
   * @name {{getBaseUrlName}}
   * @nameTags getBaseUrl
   * @description {{getBaseUrlDescription}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.util.getBaseUrl = function() {
    return window.location.origin;
  };

  /**
   * @type function
   * @name {{watchAcceleration}}
   * @nameTags watch|acceleration|gyroscope
   * @param {ObjectType.STATEMENTSENDER} success {{success}}
   * @description {{watchAccelerationDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.util.watchAcceleration = function(/** @type {ObjectType.STATEMENTSENDER} @description {{success}} */ success) {
    window.addEventListener("deviceorientation", function(event){
      success({"absolute": event.absolute, "alpha": event.alpha, "beta": event.beta, "gamma": event.gamma});
    }, false);
  };

  /**
   * @category CategoryType.CHART
   * @categoryTags GrÃ¡fico|Chart
   */
  this.cronapi.chart = {};

  /**
   * @type function
   * @name {{createChartName}}
   * @nameTags chart|series|serie
   * @description {{createChartDescription}}
   * @arbitraryParams true
   */
  this.cronapi.chart.createChart = function(/** @type {ObjectType.OBJECT} @description {{createChartId}} @blockType ids_from_screen*/ chartId, /** @type {ObjectType.STRING} @description {{createChartType}} @blockType util_dropdown @keys line|bar|horizontalBar|doughnut|pie|polarArea @values line|bar|horizontalBar|doughnut|pie|polarArea */ type, /** @type {ObjectType.LIST} @description {{createChartLegends}} */ chartLegends, /** @type {ObjectType.LIST} @description {{createChartOptions}} */ options, /** @type {ObjectType.LIST} @description {{createChartSeries}} */ series) {
    let normalizedOption;
    if (typeof (options) === 'object') {
      normalizedOption = options;
    } else {
      try {
        normalizedOption = JSON.parse(options);
      } catch (e) {
        normalizedOption = {};
        console.log(e);
      }
    }
    var colors =
      normalizedOption && normalizedOption.colors
        ? normalizedOption.colors
        : [];
    var CSS_COLOR_NAMES = ["#FF5C00","#0E53A7","#48DD00","#FFD500","#7309AA","#CD0074","#00AF64","#BF8230","#F16D95","#A65000","#A65000","#AF66D5"];
    var colorIndex = 0;

    function nextColor(){
      if(colorIndex < CSS_COLOR_NAMES.length )
        colorIndex++;
      else  colorIndex = 0;
      return colorIndex;
    }

    function getColumn(position, datasets){
      var column = [];
      $.each(datasets , function(index,value){
        if(value.data[position] != undefined) column.push(value.data[position]);
      });
      return column;
    }

    function displayLegend(){
      if(json.data.datasets[0].label ==""){
        if(json.options.legend == undefined){
          json.options.legend ={};
          json.options.legend.display = false;
        }else
          json.options.legend.display = false;
      }
    }

    function getDataset(args){
      var ds = [];
      var size = 4;
      if(Array.isArray(args[4])
      && typeof args[4][0] === 'object'
      && 'label' in args[4][0]
      && 'data' in args[4][0]){
        args = args[4];
        size = 0;
      }
      for(size ; size <  args.length ; size++){
        let dsLabel = (args[size].label ? args[size].label : null);
        let dsOptions = (args[size].options ? args[size].options : null);
        let dsData = (args[size].data ? args[size].data : args[size]);
        ds.push(cronapi.chart.createDataset(dsLabel, dsData, dsOptions));
      }
      return ds;
    }
    function beginAtZero(){
      if(json.options == undefined){ json.options = {};
        json.options.scales={};
        json.options.scales.yAxes = [{ticks: {beginAtZero:true}}];
      }else if(json.options.scales == undefined) { json.options.scales= {}; json.options.scales.yAxes = [{ticks: {beginAtZero:true}}] };
    }

    var ctx = document.getElementById(chartId);
    if (!ctx)
      return;
    if (ctx._chart) {
      ctx._chart.destroy();
    }
    ctx.getContext('2d');
    var json = {};
    json.type = type;
    json.data = [];
    json.options = normalizedOption;
    if(Array.isArray(chartLegends)){
      json.data.labels = chartLegends;
    }else
      json.data.labels = JSON.parse(chartLegends);
    json.data.datasets = [];

    switch(type){
      case 'line':{
        json.data.datasets = getDataset(arguments);
        //Applying configs in Datasets
        $.each(json.data.datasets, function(index,value){
          value.fill = false;
          value.backgroundColor = colors[index] ? colors[index] : CSS_COLOR_NAMES[nextColor()];
          value.borderColor = value.backgroundColor;
          beginAtZero();
          displayLegend();
        });

        break;
      }
      case 'bar':
      case 'horizontalBar': {
        json.data.datasets = getDataset(arguments);
        //Applying configs in Datasets
        $.each(json.data.datasets, function(index,value){
          if(json.data.datasets.length === 1 && colors.length > 1){
              value.backgroundColor = colors;
          }else{
              value.backgroundColor = colors[index] ? colors[index] : CSS_COLOR_NAMES[nextColor()];
          }
          value.borderColor = value.backgroundColor;
        });
        beginAtZero();
        displayLegend();
        break;
      }
      case 'doughnut':
      case 'pie':
      case 'polarArea':
      {
        var ds = getDataset(arguments);
        $.each(ds, function(index, value){
          var dtset = {};
          dtset = ds[index];
          dtset.backgroundColor = [];
          dtset.borderColor = [];
          $.each(dtset.data, function(indexx,valuee){
            dtset.backgroundColor.push( colors[indexx] ? colors[indexx] : CSS_COLOR_NAMES[nextColor()] );
          });
          dtset.borderColor =  dtset.backgroundColor;
          json.data.datasets.push(dtset);
          colorIndex = 0;
        });
        break;
      }

      default :{
      }
    }
    var chart = new Chart(ctx, json);
    ctx._chart = chart;

  }

  /**
   * @type function
   * @name {{createSerieName}}
   * @nameTags chart|graficos|series|serie|dados
   * @description {{createSerieDescription}}
   * @returns {ObjectType.LIST}
   */
  this.cronapi.chart.createDataset = function(/** @type {ObjectType.STRING} @description {{createSerieParamName}} */ name, /** @type {ObjectType.LIST}  @description {{createSerieParamData}} */ data , /** @type {ObjectType.LIST}  @description {{createSerieParamOptions}} */ options  ) {
    let normalizedOption;
    if (typeof (options) === 'object') {
      normalizedOption = options;
    } else {
      try {
        normalizedOption = JSON.parse(options);
      } catch (e) {
        normalizedOption = {};
        console.log(e);
      }
    }
    var dataset = {
      options: normalizedOption
    };
    if(name)  dataset.label = name;  else  dataset.label ="";
    if(Array.isArray(data))  dataset.data = data;  else {   if(data){ dataset.data = JSON.parse(data);}else dataset.data = [];}
    return dataset;
  }



  /**
   * @category {{CategoryType.SOCIAL}}
   * @categoryTags login|social|network|facebook|github|google|linkedin
   */
  this.cronapi.social = {};


  this.cronapi.social.gup = function(name,url){
    if (!url) url = location.href;
    name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
    var regexS = "[\\?&]"+name+"=([^&#]*)";
    var regex = new RegExp( regexS );
    var results = regex.exec( url );
    return results == null ? null : results[1];
  }

  this.cronapi.social.login = function (username, password, options) {
    var item;
    this.cronapi.screen.showLoading();
    if (!this.cronapi.logic.isNullOrEmpty(this.cronapi.screen.getHostapp())) {
      this.cronapi.util.getURLFromOthers('POST', 'application/x-www-form-urlencoded', String(this.cronapi.screen.getHostapp()) + String('auth'), this.cronapi.object.createObjectFromString(['{ \"username\": \"', username, '\" , \"password\": \"', password, '\" } '].join('')), this.cronapi.object.createObjectFromString(['{ \"X-AUTH-TOKEN\": \"', options, '\" } '].join('')), async function (sender_item) {
        item = sender_item;
        this.cronapi.screen.hide();
        this.cronapi.util.setLocalStorage('_u', this.cronapi.object.serializeObject(item));
        try {
          if (this.cronapi.blockly.js.blockly.auth.Home.change) {
            (await this.cronapi.client('blockly.js.blockly.auth.Home.change').run());
          }
        } catch (error) {
          this.cronapi.screen.changeView("#/app/logged/home", []);
        }
      }.bind(this), function (sender_item) {
        item = sender_item;
        if (this.cronapi.object.getProperty(item, 'status') == '403' || this.cronapi.object.getProperty(item, 'status') == '401') {
          this.cronapi.screen.notify('error', this.cronapi.i18n.translate("LoginViewInvalidpassword", []));
        } else {
          this.cronapi.screen.notify('error', this.cronapi.object.getProperty(item, 'responseJSON.message'));
        }
        this.cronapi.screen.hide();
      }.bind(this));
    } else {
      this.cronapi.screen.hide();
      this.cronapi.screen.notify('error', 'HostApp is Required');
    }
  }

  /**
   * @type function
   * @name {{socialLogin}}
   * @nameTags login|social|network|facebook|github|google|linkedin
   * @description {{socialLoginDescription}}
   * @param {ObjectType.STRING} socialNetwork {{socialNetwork}}
   * @param {ObjectType.BOOLEAN} clearCacheBeforeOpen {{clearCacheBeforeOpen}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.social.sociaLogin = function(/** @type {ObjectType.STRING} @description socialNetwork @blockType util_dropdown @keys facebook|github|google|linkedin @values facebook|github|google|linkedin  */ socialNetwork, /** @type {ObjectType.BOOLEAN} @blockType util_dropdown @keys false|true*/ clearCache) {
    var that = this;
    var u = window.hostApp+"signin/"+socialNetwork+"/";
    if(window.cordova && cordova.InAppBrowser){
      var clearCacheString = '';
      if(clearCache === true || clearCache === 'true'){
        clearCacheString = ',clearcache=yes';
      }
      var cref = cordova.InAppBrowser.open(u, '_blank', 'location=no' + clearCacheString);
      cref.addEventListener('loadstart', function(event) {
        if (event.url.indexOf("_ctk") > -1) {
          cref.close();
          that.cronapi.social.login.bind(that)('#OAUTH#', '#OAUTH#', that.cronapi.social.gup('_ctk',event.url));
        }
      });
    }else{
      window.location.href = "signin/"+socialNetwork+"/";
    }
  };

  /**
   * @type function
   * @name {{ssoLogin}}
   * @nameTags login|social|oauth
   * @description {{ssoLoginDescription}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.social.ssoLogin = async function () {
    let scope = this.cronapi.$scope;

    let future = new Promise((resolve, reject) => {
      if (window.cordova && cordova.InAppBrowser) {
        const ref = cordova.InAppBrowser.open(window.hostApp + 'login', '_blank', 'location=no,footer=yes,zoom=no,enableViewportScale=yes,hidenavigationbuttons=yes');
        const handlerChange = (event) => {
          const url = new URL(event.url);
          const urlParams = new URLSearchParams(url.search);

          if (urlParams.has('_ctk')) {

            ref.removeEventListener('loadstart', handlerChange);
            // close sso window
            ref.close();

            // If the page is reloaded the blockly sequence is interrupted
            scope.login("#OAUTH#", "#OAUTH#", urlParams.get('_ctk'));
            resolve();

          } else {
            reject();
          }
        };

        ref.addEventListener('loadstart', handlerChange);

      } else {
        window.ssoWindow = window.open(this.cronapi.internal.getAddressWithHostApp("login"));

        window.addEventListener('message', function (e) {
          if (e.data && e.data.type === 'sso_user') {

            // close sso window
            if (window.ssoWindow) {
              window.ssoWindow.close();
            }

            // If the page is reloaded the blockly sequence is interrupted
            scope.login("#OAUTH#", "#OAUTH#", e.data._ctk);
            resolve();

          }
        }, false);
      }
    });

    return future;
  };

  /**
   * @type function
   * @name {{getSelectedRowsGrid}}
   * @nameTags getSelectedRowsGrid|Obter linhas selecionadas da grade
   * @description {{functionToGetSelectedRowsGrid}}
   * @param {ObjectType.STRING} field {{field}}
   * @platform W
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.screen.getSelectedRowsGrid = function(/** @type {ObjectType.STRING} @blockType field_from_screen*/ field) {
    var result = [];
    var grid = $('[ng-model="'+ field  +'"]').children().data('kendoGrid');
    if (grid) {
      var selected = grid.select();
      selected.each(function() {
        var dataItem = grid.dataItem(this);
        result.push(dataItem);
      });
    }
    return result;
  };

  /**
   * @type function
   * @name {{back}}
   * @nameTags back|voltar|retroceder|history
   * @description {{backDescription}}
   */
  this.cronapi.screen.back = function() {
    history.back();
  };

  /**
   * @category {{notificationCategory}}
   * @categoryTags notification | notification
   */
  this.cronapi.notification = {};

  /**
   * @type function
   * @name {{screenNotifySimpleName}}
   * @description {{screenNotifySimpleDescription}}
   * @nameTags show | exibir | exibe | notification | notificaÃ§Ã£o
   * @param {ObjectType.STRING} status {{screenNotifySimpleParam0}}
   * @param {ObjectType.STRING} message {{screenNotifySimpleParam1}}
   * @param {ObjectType.STRING} animation {{screenNotifySimpleParam2}}
   * @param {ObjectType.STRING} verticalPosition {{screenNotifySimpleParam3}}
   * @param {ObjectType.STRING} horizontalPosition {{screenNotifySimpleParam4}}
   * @param {ObjectType.STRING} autoHide {{screenNotifySimpleParam5}}
   */
  this.cronapi.notification.customNotify = function(/** @type {ObjectType.STRING} @description {{status}} @blockType util_dropdown @keys error|success|warning|info @values {{error}}|{{success}}|{{warning}}|{{info}} */ status, /** @type {ObjectType.STRING} */  message, /** @type {ObjectType.STRING} @description {{animation}} @blockType util_dropdown @keys fade|slide|zoom @values {{fade}}|{{slide}}|{{zoom}}  */ animation, /** @type {ObjectType.STRING} @description {{verticalPosition}} @blockType util_dropdown @keys top|bottom @values {{top}}|{{bottom}} */ verticalPosition, /** @type {ObjectType.STRING} @description {{horizontalPosition}} @blockType util_dropdown @keys left|center|right @values {{left}}|{{center}}|{{right}} */ horizontalPosition, /** @type {ObjectType.STRING} @description {{autoHide}} @blockType util_dropdown @keys true|false @values {{yes}}|{{no}} */ autoHide) {

    let idCustomNotification = "customNotification" ;

    let dataNotification = {
      stacking: "default",
      autoHideAfter: 5000,
      position: {
        pinned: true
      },
      animation: {
        open: {
          effects: null
        },
        close: {
          effects: null
        }
      }
    };

    if (animation || verticalPosition || horizontalPosition || autoHide) {
      customNotification(message, status, animation, verticalPosition, horizontalPosition, autoHide);
    } else {
      defaultNotification(message, status);
    }

    async function defaultNotification(message, status) {

      let cronappConfig = {
        id: "CronappNotification",
        verticalPosition: "top",
        horizontalPosition: "left",
        animation: "slide",
        autoHide: "false"
      };

      setVerticalPosition(cronappConfig.verticalPosition);
      setHorizontalPosition(cronappConfig.horizontalPosition);
      setAnimation(cronappConfig.animation);
      setAutoHide(cronappConfig.autoHide);

      if (!isNotificationInitialized(cronappConfig.id)) {
        initializeNotification(cronappConfig.id, dataNotification);
      }

      showNotification(cronappConfig.id, message, status);

    }

    async function customNotification(message, status, animation, verticalPosition, horizontalPosition, autoHide) {

      setVerticalPosition(verticalPosition);
      setHorizontalPosition(horizontalPosition);
      setAnimation(animation);
      setAutoHide(autoHide);

      initializeNotification(idCustomNotification, dataNotification);
      showNotification(idCustomNotification, message, status);

    }

    function setVerticalPosition(verticalPosition){
      switch (verticalPosition) {
        case "bottom":
          dataNotification.position.bottom = 20;
          idCustomNotification = idCustomNotification.concat('-bottom');
          break;

        default:
          dataNotification.position.top = 60;
          idCustomNotification = idCustomNotification.concat('-top');

      }
    }

    function setHorizontalPosition(horizontalPosition){
      switch (horizontalPosition) {
        case "right":
          dataNotification.position.right = 20;
          idCustomNotification = idCustomNotification.concat('-right');
          break;

        case "center":
          dataNotification.show = centerElementScreen;
          idCustomNotification = idCustomNotification.concat('-center');
          break;

        default:
          dataNotification.position.left = 20;
          idCustomNotification = idCustomNotification.concat('-left');

      }
    }

    function centerElementScreen(e){
      if (e.sender.getNotifications().length == 1) {
        var element = e.element.parent(),
            eWidth = element.width(),
            wWidth = $(window).width()
        var newLeft;

        newLeft = Math.floor(wWidth / 2 - eWidth / 2);

        e.element.parent().css({ left: newLeft });
      }
    }

    function setAnimation(animation){
      switch (animation) {
        case "slide":
          if (dataNotification.show && dataNotification.position.bottom != null) {
            dataNotification.animation.open.effects = "slideIn:up";
            idCustomNotification = idCustomNotification.concat('-slideIn-up');

          } else if (dataNotification.show && dataNotification.position.top != null) {
            dataNotification.animation.open.effects = "slideIn:down";
            idCustomNotification = idCustomNotification.concat('-slideIn-dow');

          } else if (dataNotification.position.left != null) {
            dataNotification.animation.open.effects = "slideIn:right";
            idCustomNotification = idCustomNotification.concat('-slideIn-right');

          } else if (dataNotification.position.left == null) {
            dataNotification.animation.open.effects = "slideIn:left";
            idCustomNotification = idCustomNotification.concat('-slideIn-left');
          }

          dataNotification.animation.close.effects = "slideOut";
          break;

        case "zoom":
          dataNotification.animation.open.effects = "zoomIn";
          dataNotification.animation.close.effects = "zoomOut";
          idCustomNotification = idCustomNotification.concat('-zoom');
          break;

        default:
          dataNotification.animation.open.effects = "fadeIn";
          dataNotification.animation.close.effects = "fadeOut";
          idCustomNotification = idCustomNotification.concat('-fade');
      }
    }

    function setAutoHide(autoHide){
      if(autoHide == "false"){
        dataNotification.autoHideAfter = 0;
        idCustomNotification = idCustomNotification.concat('-autoHideAfter');
      }
    }

    async function initializeNotification(id, options) {
      if (!hasHTMLElement(id)) {
        let idNotification = $(`<span id="${id}"></span>`);
        $('body').append(idNotification);

        await $(`#${id}`).kendoNotification(options);

        if(horizontalPosition == "center"){
          centerElementScreen(e)
        }
      }
    }

    function isNotificationInitialized(id) {
      return $(`#${id}`).getKendoNotification();
    }

    function showNotification(id, message, status) {
      $(`#${id}`).getKendoNotification().show(message, status);
    }

    function hasHTMLElement(id) {
      return document.getElementById(id);
    }

  };

  /**
   * @type function
   * @name {{confirmDialogAlertName}}
   * @nameTags confirmDialog | Confirmar | alert | modal | alerta
   * @description {{confirmDialogAlertDescription}}
   * @param {ObjectType.STRING} icon {{icon}
   * @param {ObjectType.STRING} title {{title}}
   * @param {ObjectType.STRING} subtitle {{subtitle}}
   * @param {ObjectType.OBJECT} buttonConfirmDialogAlert {{confimDialogAlert.listButton}}
   */
  this.cronapi.notification.confirmDialogAlert = function(/** @type {ObjectType.STRING} @description {{icon}} @blockType util_dropdown @keys error|success|warning|info @values {{error}}|{{success}}|{{warning}}|{{info}} */ icon, title, subtitle, /** @type {ObjectType.OBJECT} */ buttonConfirmDialogAlert) {

    let idDialog = 'cronapp-dialog-' + String(Math.random()).substring(2);
    let dialog = $(`<div data-dialog-type="${icon}" id="${idDialog}"></div>`);
    $('body').append(dialog);

    const isMobile = (window.ionic && window.cordova);

    const getIconElement = () => {
      switch (icon) {
        case 'error':
          return `<span class="cronapp-x-mark">
                      <span class="cronapp-x-mark-line-left"></span>
                      <span class="cronapp-x-mark-line-right"></span>
                  </span>`;
        case 'success':
          return `<div class="cronapp-success-circular-line-left"></div>
                      <span class="cronapp-success-line-tip"></span>
                      <span class="cronapp-success-line-long"></span>
                      <div class="cronapp-success-ring"></div>
                      <div class="cronapp-success-fix"></div>
                      <div class="cronapp-success-circular-line-right">
                  </div>`;
        case 'info':
          return `<div class="cronapp-icon-content">i</div>`;
        default:
          return `<div class="cronapp-icon-content">!</div>`;
      }
    };

    const webContent = `<div id="modalBodyConfirmDialog">
                            <div class="icon">
                                <div class="cronapp-icon cronapp-${icon}">${getIconElement()}</div>
                            </div>
                            <h2 class="title">${title}</h2> <h3 class="subtitle">${subtitle}</h3>
                        </div>`;

    let dataDialog = {
      width: "450px",
      minWidth: 300,
      maxWidth: () => window.innerWidth - 40,
      title: isMobile ? (title || false) : false,
      closable: false,
      modal: true,
      content: isMobile ? subtitle : webContent,
      buttonLayout: isMobile ? 'stretched' : 'normal',
      actions: [],
      close: () => setTimeout(() => dialog.data("kendoDialog").destroy())
    };

    setButton(buttonConfirmDialogAlert);
    dialog.kendoDialog(dataDialog);

    const kendoDialog = dialog.data('kendoDialog');
    const wrapper = kendoDialog.wrapper;

    // This will be used to identify the Dialog custom type to add custom styles
    wrapper.attr('data-dialog-type', icon);
    let nextZIndex = cronapi.internal.getMaxZIndex() + 1;
    wrapper.css('z-index', nextZIndex).css('pointer-events', 'all');

    function setButton(buttonConfirmDialogAlert){
      let buttons = (Array.isArray(buttonConfirmDialogAlert) ? buttonConfirmDialogAlert : [buttonConfirmDialogAlert]);

      let hasButton = false;

      for (let i = 0; i < buttons.length; i++) {
        let button = buttons[i];
        if(button){
          dataDialog.actions.push({
            text: button.title,
            action: button.value,
            primary: button.primaryValue == 'true' ? true : null
          });
          hasButton = true;
        }
      };

      // If you have not added a button to the modal. Add to be able to close the modal.
      if(!hasButton){
        dataDialog.actions.push({
          text: "OK",
          primary: true
        });
      };

    }

    kendoDialog.open();

  };

  /**
   * @type function
   * @name {{buttonConfirmDialogAlert}}
   * @nameTags confirmDialog | botÃ£o | button | alert | modal | alerta
   * @description {{buttonConfirmDialogAlertDescription}}
   * @param {ObjectType.BOOLEAN} primaryButton {{buttonConfirmDialogAlert.primaryButton}}
   * @param {ObjectType.STRING} title {{title}}
   * @param {ObjectType.STRING} value {{buttonConfirmDialogAlert.value}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.notification.buttonConfirmDialogAlert = function (/** @type {ObjectType.STRING}  @description {{buttonConfirmDialogAlert.primaryButton}}  @blockType util_dropdown  @keys true|false  @values {{yes}}|{{no}}  */ primaryButton, title, /** @type {ObjectType.STATEMENT} @description {{buttonConfirmDialogAlert.value}} */ value) {
      return {
        title: title,
        value: function () {
          if (value) value();
          return true;
        },
        primaryValue: primaryButton
      };
    };

    /**
   * @category {{CategoryType.REGEX}}
   * @categoryTags REGEX|regex
   */
  this.cronapi.regex = {};

   /**
   * @type function
   * @name {{extractTextByRegex}}
   * @nameTags extractTextByRegex
   * @description {{extractTextByRegexDescription}}
   * @param {ObjectType.STRING} text {{text}}
   * @param {ObjectType.STRING} regex {{regex}}
   * @param {ObjectType.STRING} flag {{flag}}
   * @returns {ObjectType.LIST}
   */
  this.cronapi.regex.extractTextByRegex = function(/** @type {ObjectType.STRING} @defaultValue */ text, /** @type {ObjectType.STRING} */ regex, /** @type {ObjectType.STRING} @description {{flag}} @defaultValue - @blockType util_dropdown @keys -|g|i|m|gi|gim|gm  @values {{-}}|{{g}}|{{i}}|{{m}}|{{gi}}|{{gim}}|{{gm}}  */ flag){
    if (this.cronapi.logic.isNull(text) || this.cronapi.logic.isNull(regex))
      return [];

    let regexInstance = null;

    if (flag != null && flag !== '-'){
      regexInstance = new RegExp(regex, flag);
    }else{
       regexInstance = new RegExp(regex);
    }

    let matches, output = [];
    let idx = null;

    while (matches = regexInstance.exec(text)) {

        if(idx != null && idx == matches.index) break;

        let occurrence =  [];

        for(i = 1; i < matches.length ; i++){
          occurrence.push(matches[i]);
        }

        idx = matches.index;

        output.push(occurrence);

    }

    return output;
  }

  /**
   * @type function
   * @name {{validateTextWithRegex}}
   * @nameTags validateTextWithRegex
   * @description {{validateTextWithRegexDescription}}
   * @param {ObjectType.STRING} text {{text}}
   * @param {ObjectType.STRING} regex {{regex}}
   * @param {ObjectType.STRING} flag {{flag}}
   * @returns {ObjectType.BOOLEAN}
   */
  this.cronapi.regex.validateTextWithRegex = function(/** @type {ObjectType.STRING} */ text, /** @type {ObjectType.STRING} */ regex, /** @type {ObjectType.STRING} @description {{flag}} @defaultValue - @blockType util_dropdown @keys -|g|i|m|gi|gim|gm  @values {{-}}|{{g}}|{{i}}|{{m}}|{{gi}}|{{gim}}|{{gm}}  */ flag){
    if (this.cronapi.logic.isNull(text) || this.cronapi.logic.isNull(regex))
      return false;
    if (flag != null && flag !== '-')
      return new RegExp(regex, flag).test(text);

    return new RegExp(regex).test(text);
  }

  /**
   * @category {{Calendar}}
   * @categoryTags calendar|calendÃ¡rio
   */
  this.cronapi.calendar = {};

  function getCalendar(id) {
    let start = Date.now();
    let timeout = 10000;
    let waitForChatData = (resolve, reject) => {
      let calendar = $('#' + id + ' cron-calendar').data("kendoCalendar");
      if (calendar) {
        resolve(calendar);
      } else if (timeout && (Date.now() - start) >= timeout) {
        resolve();
      } else {
        setTimeout(() => waitForChatData(resolve, reject), 200);
      }
    };
    return new Promise(waitForChatData);
  }

  function showErrorNotification(errorMsgKey) {
    const errorMsg = this.cronapi.$translate.instant(errorMsgKey);
    this.cronapi.$scope.Notification.error(errorMsg);
  }

  /**
   * @type function
   * @name {{getCalendarValue}}
   * @nameTags Calendar
   * @platform W
   * @description {{getCalendarValueDesc}}
   * @param {ObjectType.STRING} id {{id}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.calendar.getCalendarValue = async function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id) {

    const calendar = await getCalendar(id);
    if (calendar) {
      return calendar.value();
    } else {
      showErrorNotification("calendarElementNotPresent");
      return null;
    }
  };

  /**
   * @type function
   * @name {{setCalendarValue}}
   * @nameTags Calendar
   * @platform W
   * @description {{setCalendarValueDesc}}
   * @param {ObjectType.STRING} id {{id}}
   * @param {ObjectType.OBJECT} value {{value}}
   */
  this.cronapi.calendar.setCalendarValue = async function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id, /** @type {ObjectType.OBJECT} */ value) {

    const calendar = await getCalendar(id);
    if (calendar) {
      calendar.value(value);
    } else {
      showErrorNotification("calendarElementNotPresent");
    }
  };

  /**
   * @type function
   * @name {{getCalendarMin}}
   * @nameTags Calendar
   * @platform W
   * @description {{getCalendarMinDesc}}
   * @param {ObjectType.STRING} id {{id}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.calendar.getCalendarMin = async function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id) {

    const calendar = await getCalendar(id);
    if (calendar) {
      return calendar.min();
    } else {
      showErrorNotification("calendarElementNotPresent");
      return null;
    }
  };

  /**
   * @type function
   * @name {{setCalendarMin}}
   * @nameTags Calendar
   * @platform W
   * @description {{setCalendarMinDesc}}
   * @param {ObjectType.STRING} id {{id}}
   * @param {ObjectType.OBJECT} value {{value}}
   */
  this.cronapi.calendar.setCalendarMin = async function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id, /** @type {ObjectType.OBJECT} */ value) {

    const calendar = await getCalendar(id);
    if (calendar) {
      calendar.min(value);
    } else {
      showErrorNotification("calendarElementNotPresent");
    }
  };

  /**
   * @type function
   * @name {{getCalendarMax}}
   * @nameTags Calendar
   * @platform W
   * @description {{getCalendarMaxDesc}}
   * @param {ObjectType.STRING} id {{id}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.calendar.getCalendarMax = async function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id) {

    const calendar = await getCalendar(id);
    if (calendar) {
      return calendar.max();
    } else {
      showErrorNotification("calendarElementNotPresent");
      return null;
    }
  };

  /**
   * @type function
   * @name {{setCalendarMax}}
   * @nameTags Calendar
   * @platform W
   * @description {{setCalendarMaxDesc}}
   * @param {ObjectType.STRING} id {{id}}
   * @param {ObjectType.OBJECT} value {{value}}
   */
  this.cronapi.calendar.setCalendarMax = async function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id, /** @type {ObjectType.OBJECT} */ value) {

    const calendar = await getCalendar(id);
    if (calendar) {
      calendar.max(value);
    } else {
      showErrorNotification("calendarElementNotPresent");
    }
  };


  /**
   * @type function
   * @name {{getCalendarSelectDates}}
   * @nameTags Calendar
   * @platform W
   * @description {{getCalendarSelectDatesDesc}}
   * @param {ObjectType.STRING} id {{id}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.calendar.getCalendarSelectDates = async function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id) {

    const calendar = await getCalendar(id);
    if (calendar) {
      return calendar.selectDates();
    } else {
      showErrorNotification("calendarElementNotPresent");
      return null;
    }
  };

  /**
   * @type function
   * @name {{setCalendarSelectDates}}
   * @nameTags Calendar
   * @platform W
   * @description {{setCalendarSelectDatesDesc}}
   * @param {ObjectType.STRING} id {{id}}
   * @param {ObjectType.OBJECT} value {{value}}
   */
  this.cronapi.calendar.setCalendarSelectDates = async function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id, /** @type {ObjectType.OBJECT} */ value) {

    const calendar = await getCalendar(id);
    if (calendar) {
      calendar.selectDates((Array.isArray(value) ? value : [value]));
    } else {
      showErrorNotification("calendarElementNotPresent");
    }
  };

  /**
   * @type function
   * @name {{navigateCalendarTo}}
   * @nameTags Calendar
   * @platform W
   * @description {{navigateCalendarToDesc}}
   * @param {ObjectType.STRING} id {{id}}
   * @param {ObjectType.OBJECT} value {{value}}
   * @param {ObjectType.STRING} view {{calendarView}}
   */
  this.cronapi.calendar.navigateCalendarTo = async function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id, /** @type {ObjectType.OBJECT} */ value, /** @type {ObjectType.STRING} @description {{calendarView}} @blockType util_dropdown @keys month|year|decade|century @values {{month}}|{{year}}|{{decade}}|{{century}}  */ view) {

    const calendar = await getCalendar(id);
    if (calendar) {
      calendar.navigate(value, view);
    } else {
      showErrorNotification("calendarElementNotPresent");
    }
  };

  /**
   * @category Chat
   * @categoryTags chat|chatbot|message
   */
  this.cronapi.chat = {};

  function getChat(id) {
    let start = Date.now();
    let timeout = 10000;
    let waitForChatData = (resolve, reject) => {
      let chat = $('#' + id + ' .k-chat').data("kendoChat");
      if (chat) {
        resolve(chat);
      } else if (timeout && (Date.now() - start) >= timeout) {
        resolve();
      } else {
        setTimeout(() => waitForChatData(resolve, reject), 200);
      }
    };
    return new Promise(waitForChatData);
  }

  /**
   * @type function
   * @name {{chatUserObj}}
   * @nameTags Chat
   * @platform M
   * @description {{chatUserObjDesc}}
   * @param {ObjectType.STRING} id {{id}}
   * @param {ObjectType.STRING} name {{name}}
   * @param {ObjectType.STRING} iconUrl {{iconUrl}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.chat.chatUserObj = function (/** @type {ObjectType.STRING} */ id, /** @type {ObjectType.STRING} */ name, /** @type {ObjectType.STRING} */ iconUrl) {
    return {
      id: id,
      name: name,
      iconUrl: iconUrl
    };
  };

  /**
   * @type function
   * @name {{chatAttachmentObj}}
   * @nameTags Chat
   * @platform M
   * @description {{chatAttachmentObjDesc}}
   * @param {ObjectType.STRING} attachmentTitle {{attachmentTitle}}
   * @param {ObjectType.STRING} attachmentSubtitle {{attachmentSubtitle}}
   * @param {ObjectType.STRING} attachmentText {{attachmentText}}
   * @param {ObjectType.OBJECT} attachmentImage {{attachmentImage}}
   * @param {ObjectType.STRING} attachmentImageAlt {{attachmentImageAlt}}
   * @param {ObjectType.OBJECT} attachmentButtons {{chatSuggestedActions}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.chat.chatAttachmentObj = function ( /** @type {ObjectType.STRING} */ attachmentTitle, /** @type {ObjectType.STRING} */ attachmentSubtitle, /** @type {ObjectType.STRING} */ attachmentText,  /** @type {ObjectType.STRING} */ attachmentImage, /** @type {ObjectType.STRING} */ attachmentImageAlt, /** @type {ObjectType.OBJECT} */ attachmentButtons) {
    return {
      contentType: 'heroCard',
      content: {
        title: attachmentTitle,
        subtitle: attachmentSubtitle,
        text: attachmentText,
        images: [{
          url: attachmentImage,
          alt: attachmentImageAlt
        }],
        buttons: (Array.isArray(attachmentButtons) ? attachmentButtons : [attachmentButtons])
      }
    };
  };

  /**
   * @type function
   * @name {{chatSuggestedActionObj}}
   * @nameTags Chat
   * @platform M
   * @description {{chatSuggestedActionObjDesc}}
   * @param {ObjectType.STRING} suggestedActionTitle {{suggestedActionTitle}}
   * @param {ObjectType.STRING} suggestedActionValue {{suggestedActionValue}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.chat.chatSuggestedActionObj = function (/** @type {ObjectType.STRING} */ suggestedActionTitle, /** @type {ObjectType.STRING} */ suggestedActionValue) {
    return {
      title: suggestedActionTitle,
      value: suggestedActionValue
    };
  };

  /**
   * @type function
   * @name {{getChatUser}}
   * @nameTags Chat
   * @platform M
   * @description {{getChatUserDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @type {ObjectType.STATEMENTSENDER} @description {{success}}
   * @type {ObjectType.STATEMENTSENDER} @description {{error}}
   */
  this.cronapi.chat.getChatUser = async function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id, /** @type {ObjectType.STATEMENTSENDER} @description {{success}} */ success, /** @type {ObjectType.STATEMENTSENDER} @description {{error}} */  error) {

    getChat(id).then((chat) => {
      if (chat) {
        success(chat.getUser());
      } else {
        let errorMsg = this.cronapi.$translate.instant("chatElementNotPresent");
        this.cronapi.$scope.Notification.error(errorMsg);
        error(errorMsg);
      }
    });

  };

  /**
   * @type function
   * @name {{postChatMessage}}
   * @nameTags Chat
   * @platform M
   * @description {{postChatMessageDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @param {ObjectType.STRING} textMessage {{textMessage}}
   * @type {ObjectType.STATEMENTSENDER} @description {{success}}
   * @type {ObjectType.STATEMENTSENDER} @description {{error}}
   */
  this.cronapi.chat.postChatMessage = function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id, /** @type {ObjectType.STRING} */ textMessage, /** @type {ObjectType.STATEMENTSENDER} @description {{success}} */ success, /** @type {ObjectType.STATEMENTSENDER} @description {{error}} */  error) {

    getChat(id).then((chat) => {
      if (chat) {
        chat.postMessage(textMessage);
        success();
      } else {
        let errorMsg = this.cronapi.$translate.instant("chatElementNotPresent");
        this.cronapi.$scope.Notification.error(errorMsg);
        error(errorMsg);
      }
    });

  };

  /**
   * @type function
   * @name {{renderChatMessage}}
   * @nameTags Chat
   * @platform M
   * @description {{renderChatMessageDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @param {ObjectType.STRING} chatMessage {{chatMessage}}
   * @param {ObjectType.OBJECT} chatUser {{chatUser}}
   * @type {ObjectType.STATEMENTSENDER} @description {{success}}
   * @type {ObjectType.STATEMENTSENDER} @description {{error}}
   */
  this.cronapi.chat.renderChatMessage = function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id, /** @type {ObjectType.STRING} */ chatMessage, /** @type {ObjectType.OBJECT} */ chatUser, /** @type {ObjectType.STATEMENTSENDER} @description {{success}} */ success, /** @type {ObjectType.STATEMENTSENDER} @description {{error}} */  error) {

    getChat(id).then((chat) => {
      if (chat) {
        chat.renderMessage({'type': 'text', 'text': chatMessage}, chatUser);
        success();
      } else {
        let errorMsg = this.cronapi.$translate.instant("chatElementNotPresent");
        this.cronapi.$scope.Notification.error(errorMsg);
        error(errorMsg);
      }
    });

  };

  /**
   * @type function
   * @name {{renderChatAttachments}}
   * @nameTags Chat
   * @platform M
   * @description {{renderChatAttachmentsDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @param {ObjectType.OBJECT} chatUser {{chatUser}}
   * @param {ObjectType.OBJECT} chatAttachments {{chatAttachments}}
   * @param {ObjectType.STRING} chatAttachmentLayout {{chatAttachmentLayout}}
   * @type {ObjectType.STATEMENTSENDER} @description {{success}}
   * @type {ObjectType.STATEMENTSENDER} @description {{error}}
   */
  this.cronapi.chat.renderChatAttachments = function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id, /** @type {ObjectType.OBJECT} */ chatUser, /** @type {ObjectType.OBJECT} */ chatAttachments, /** @type {ObjectType.STRING} @description {{chatAttachmentLayoutDesc}} @blockType util_dropdown @keys list|carousel @values {{chatAttachmentList}}|{{chatAttachmentCarousel}}  */ chatAttachmentLayout, /** @type {ObjectType.STATEMENTSENDER} @description {{success}} */ success, /** @type {ObjectType.STATEMENTSENDER} @description {{error}} */  error) {

    getChat(id).then((chat) => {
      if (chat) {
        chat.renderAttachments({
          attachments: (Array.isArray(chatAttachments) ? chatAttachments : [chatAttachments]),
          attachmentLayout: chatAttachmentLayout
        }, chatUser);
        success();
      } else {
        let errorMsg = this.cronapi.$translate.instant("chatElementNotPresent");
        this.cronapi.$scope.Notification.error(errorMsg);
        error(errorMsg);
      }
    });

  };

  /**
   * @type function
   * @name {{renderChatHtml}}
   * @nameTags Chat
   * @platform M
   * @description {{renderChatHtmlDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @param {ObjectType.OBJECT} chatUser {{chatUser}}
   * @param {ObjectType.OBJECT} html Html
   * @param {ObjectType.STRING} chatAttachmentLayout {{chatAttachmentLayout}}
   * @type {ObjectType.STATEMENTSENDER} @description {{success}}
   * @type {ObjectType.STATEMENTSENDER} @description {{error}}
   */
  this.cronapi.chat.renderChatHtml = function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id, /** @type {ObjectType.OBJECT} */ chatUser, /** @type {ObjectType.OBJECT} */ html, /** @type {ObjectType.STRING} @description {{chatAttachmentLayoutDesc}} @blockType util_dropdown @keys list|carousel @values {{chatAttachmentList}}|{{chatAttachmentCarousel}}  */ chatAttachmentLayout, /** @type {ObjectType.STATEMENTSENDER} @description {{success}} */ success, /** @type {ObjectType.STATEMENTSENDER} @description {{error}} */  error) {

    // Remove any script in the html message
    const stripScripts = function (s) {
      let div = document.createElement('div');
      div.innerHTML = s;
      let scripts = div.getElementsByTagName('script');
      let i = scripts.length;
      while (i--) {
        scripts[i].parentNode.removeChild(scripts[i]);
      }
      return div.innerHTML;
    };

    const kendoChatHtmlTemplate = kendo.template(`
              <div class="#=styles.card# #=styles.cardRich#">
                  <div class="#=styles.cardBody#">
                    <div>
                    #=text#
                    </div>
                  </div>
              </div>`);

    if(!kendo.chat.Templates.kendoChatHtmlTemplate){
      kendo.chat.registerTemplate("kendoChatHtmlTemplate", kendoChatHtmlTemplate);
    }

    let attachments = [];

    if (Array.isArray(html)) {
      for(let index in html){
        let attachment = {
          contentType: "kendoChatHtmlTemplate",
          content: {
            "text": stripScripts(html[index])
          }
        };
        attachments.push(attachment)
      }
    } else {
      let attachment = {
        contentType: "kendoChatHtmlTemplate",
        content: {
          "text": stripScripts(html)
        }
      };
      attachments.push(attachment)
    }

    getChat(id).then((chat) => {
      if (chat) {
        chat.renderAttachments({
          attachments: attachments,
          attachmentLayout: chatAttachmentLayout
        }, chatUser);
        success();
      } else {
        let errorMsg = this.cronapi.$translate.instant("chatElementNotPresent");
        this.cronapi.$scope.Notification.error(errorMsg);
        error(errorMsg);
      }
    });

  };

  /**
   * @type function
   * @name {{renderChatSuggestedActions}}
   * @nameTags Chat
   * @platform M
   * @description {{renderChatSuggestedActionsDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @param {ObjectType.OBJECT} chatSuggestedActions {{chatSuggestedActions}}
   * @type {ObjectType.STATEMENTSENDER} @description {{success}}
   * @type {ObjectType.STATEMENTSENDER} @description {{error}}
   */
  this.cronapi.chat.renderChatSuggestedActions = function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id, /** @type {ObjectType.OBJECT} */ chatSuggestedActions, /** @type {ObjectType.STATEMENTSENDER} @description {{success}} */ success, /** @type {ObjectType.STATEMENTSENDER} @description {{error}} */  error) {

    getChat(id).then((chat) => {
      if (chat) {
        chat.renderSuggestedActions((Array.isArray(chatSuggestedActions) ? chatSuggestedActions : [chatSuggestedActions]));
        success();
      } else {
        let errorMsg = this.cronapi.$translate.instant("chatElementNotPresent");
        this.cronapi.$scope.Notification.error(errorMsg);
        error(errorMsg);
      }
    });

  };

  /**
   * @type function
   * @name {{renderChatUserTypingIndicator}}
   * @nameTags Chat
   * @platform M
   * @description {{renderChatUserTypingIndicatorDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @param {ObjectType.OBJECT} chatUser {{chatUser}}
   * @type {ObjectType.STATEMENTSENDER} @description {{success}}
   * @type {ObjectType.STATEMENTSENDER} @description {{error}}
   */
  this.cronapi.chat.renderChatUserTypingIndicator = function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id, /** @type {ObjectType.OBJECT} */ chatUser, /** @type {ObjectType.STATEMENTSENDER} @description {{success}} */ success, /** @type {ObjectType.STATEMENTSENDER} @description {{error}} */  error) {

    getChat(id).then((chat) => {
      if (chat) {
        chat.renderUserTypingIndicator(chatUser);
        success();
      } else {
        let errorMsg = this.cronapi.$translate.instant("chatElementNotPresent");
        this.cronapi.$scope.Notification.error(errorMsg);
        error(errorMsg);
      }
    });

  };

  /**
   * @type function
   * @name {{clearChatUserTypingIndicator}}
   * @nameTags Chat
   * @platform M
   * @description {{clearChatUserTypingIndicatorDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @param {ObjectType.OBJECT} chatUser {{chatUser}}
   * @type {ObjectType.STATEMENTSENDER} @description {{success}}
   * @type {ObjectType.STATEMENTSENDER} @description {{error}}
   */
  this.cronapi.chat.clearChatUserTypingIndicator = function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id, /** @type {ObjectType.OBJECT} */ chatUser, /** @type {ObjectType.STATEMENTSENDER} @description {{success}} */ success, /** @type {ObjectType.STATEMENTSENDER} @description {{error}} */  error) {

    getChat(id).then((chat) => {
      if (chat) {
        chat.clearUserTypingIndicator(chatUser);
        success();
      } else {
        let errorMsg = this.cronapi.$translate.instant("chatElementNotPresent");
        this.cronapi.$scope.Notification.error(errorMsg);
        error(errorMsg);
      }
    });

  };

  /**
   * @type function
   * @name {{removeChatTypingIndicator}}
   * @nameTags Chat
   * @platform M
   * @description {{removeChatTypingIndicatorDesc}}
   * @param {ObjectType.STRING} component {{ComponentParam}}
   * @param {ObjectType.OBJECT} chatUser {{chatUser}}
   * @type {ObjectType.STATEMENTSENDER} @description {{success}}
   * @type {ObjectType.STATEMENTSENDER} @description {{error}}
   */
  this.cronapi.chat.removeChatTypingIndicator = function (/** @type {ObjectType.OBJECT} @blockType ids_from_screen*/ id, /** @type {ObjectType.STATEMENTSENDER} @description {{success}} */ success, /** @type {ObjectType.STATEMENTSENDER} @description {{error}} */  error) {

    getChat(id).then((chat) => {
      if (chat) {
        chat.removeTypingIndicator();
        success();
      } else {
        let errorMsg = this.cronapi.$translate.instant("chatElementNotPresent");
        this.cronapi.$scope.Notification.error(errorMsg);
        error(errorMsg);
      }
    });

  }

  /**
   * @type function
   * @name {{setCookie}}
   * @nameTags storage | cookie | armazenamento
   * @description {{setCookieDesc}}
   * @param {ObjectType.STRING} key {{key}}
   * @param {ObjectType.STRING} value {{value}}
   * @param {ObjectType.STRING} measurementUnit {{measurementUnit}}
   * @param {ObjectType.LONG} expires {{expirationTime}}
   */
   this.cronapi.util.setCookie = function (key, value,/**@type {ObjectType.STRING} @description {{measurementUnit}} @blockType util_dropdown @keys seconds|minutes|hours|days @values {{seconds}}|{{minutes}}|{{hours}}|{{days}}  */ measurementUnit, expires) {

    let now = new Date();
    let expiration = new Date();
    let factor = 0;
    const DAY_IN_MILLISECONDS = 1000 * 60 * 60 * 24;

    function getFactorByMeasurementUnit(measurementUnit) {
      if (measurementUnit === 'seconds') {
        factor = 1000;
      } else if (measurementUnit === 'minutes') {
        factor = 60000;
      } else if (measurementUnit === 'hours') {
        factor = 3600000;
      } else if (measurementUnit === 'days') {
        factor = 86400000;
      }
      return factor;
    };

    if (this.cronapi.logic.isNullOrEmpty(expires) || expires == 0) {
      expiration.setTime(now.getTime() + DAY_IN_MILLISECONDS);
    } else {
      expiration.setTime(now.getTime() + parseInt(expires * getFactorByMeasurementUnit(measurementUnit)));

    }
    document.cookie = encodeURIComponent(key) + "=" + encodeURIComponent(value) + "; expires=" + expiration.toGMTString();
  };

  /**
   * @type function
   * @name {{getCookie}}
   * @nameTags storage | cookie | armazenamento
   * @description {{getCookieDesc}}
   * @param {ObjectType.STRING} key {{key}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.util.getCookie = function (key) {

    const cookies = getAllCokies();
    const cookie = filterCookieByKey(cookies, key);

    function getAllCokies() {
      return document.cookie.split('; ');
    }

    function filterCookieByKey(cookies, key) {
      return cookies.find(row => row.startsWith(key + '='));

    }

    function getCookieValue(cookie) {
      return (typeof cookie === "undefined" ? null : cookie.split('=').pop());

    }

    return getCookieValue(cookie);

  }

  /**
   * @type function
   * @name {{checkSavedCookies}}
   * @nameTags storage | cookie | armazenamento
   * @description {{checkSavedCookiesDesc}}
   * @param {ObjectType.STRING} key {{key}}
   * @returns {ObjectType.STRING}
   */
    this.cronapi.util.checkSavedCookies = function (key) {

    var cookie = document.cookie.split(';');
    cookie.forEach(function (el) {
      let [k, v] = el.split('=');
      cookie[k.trim()] = v;
    })

    return cookie.cookieEssencial;
  }

  /**
   * @category {{authentication}}
   * @categoryTags authentication|autenticaÃ§Ã£o
   */
  this.cronapi.authentication = {};

  /**
   * @type function
   * @name {{login}}
   * @nameTags login
   * @description {{loginDesc}}
   * @param {ObjectType.STRING} username {{username}}
   * @param {ObjectType.STRING} password {{password}}
   * @param {ObjectType.OBJECT} options {{options}}
   * @returns {ObjectType.VOID}
   */
  this.cronapi.authentication.login = function(/** @type {ObjectType.STRING} **/ username,/** @type {ObjectType.STRING} **/ password, /** @type {ObjectType.OBJECT} **/options) {
    this.cronapi.social.login(username, password, options);
  }

  /**
   * @type function
   * @platform M
   * @name {{changePassword}}
   * @nameTags password | senha | mudar | change
   * @description {{changePasswordDesc}}
   */
  this.cronapi.authentication.changePassword = function () {
    // The following code was copied from the auto generated Blockly logic for changing password
    let confirmationPassword, newPasswordConfirmation, oldPassword;
    if (this.cronapi.screen.getValueOfField("vars.newPassword") === this.cronapi.screen.getValueOfField("vars.confirmationPassword")) {
      oldPassword = this.cronapi.screen.getValueOfField("vars.oldPassword");
      confirmationPassword = this.cronapi.screen.getValueOfField("vars.newPassword");
      newPasswordConfirmation = this.cronapi.screen.getValueOfField("vars.confirmationPassword");
      this.cronapi.screen.showLoading();
      if (!this.cronapi.logic.isNullOrEmpty(this.cronapi.screen.getHostapp())) {
        this.cronapi.util.getURLFromOthers('POST',
            'application/x-www-form-urlencoded',
            String(this.cronapi.screen.getHostapp()) + String('changePassword'),
            this.cronapi.object.createObjectFromString(['{ \"oldPassword\": \"', oldPassword, '\" , \"newPassword\": \"', confirmationPassword, '\" , \"newPasswordConfirmation\": \"', newPasswordConfirmation, '\" } '].join('')),
            this.cronapi.object.createObjectFromString(['{ \"X-AUTH-TOKEN\": \"', this.cronapi.util.getUserToken(), '\" } '].join('')),
            async (success) => {
              this.cronapi.screen.hide();
              this.cronapi.screen.notify('info', this.cronapi.i18n.translate("Home.view.passwordChanged", []));
              try {
                (await this.cronapi.client('blockly.js.blockly.auth.ChangePassword.closeModal').run());
              } catch (err) {
                this.cronapi.screen.hideIonicModal("changePassword")
              } finally {
                this.cronapi.screen.changeValueOfField('vars.oldPassword', '');
                this.cronapi.screen.changeValueOfField('vars.newPassword', '');
                this.cronapi.screen.changeValueOfField('vars.confirmationPassword', '');
              }
            }, (error) => {
              if (this.cronapi.object.getProperty(error, 'status') == '403' || this.cronapi.object.getProperty(error, 'status') == '401') {
                this.cronapi.screen.notify('error', this.cronapi.i18n.translate("Login.view.invalidPassword", []));
              } else {
                this.cronapi.screen.notify('error', this.cronapi.object.getProperty(error, 'responseJSON.message'));
              }
              this.cronapi.screen.hide();
            });
      } else {
        this.cronapi.screen.hide();
        this.cronapi.screen.notify('error', 'HostApp is Required');
      }
    } else {
      this.cronapi.screen.notify('error', this.cronapi.i18n.translate("Login.view.invalidPassword", []));
    }
  }

  /**
   * @type function
   * @name {{signup}}
   * @nameTags signup | cadastre-se | cadastro | cadastre | register
   * @param {ObjectType.STRING} signupUsername {{username}}
   * @param {ObjectType.STRING} signupEmail {{email}}
   * @param {ObjectType.STRING} signupPassword {{password}}
   * @param {ObjectType.STRING} signupConfirmPassword {{confirmPassword}}
   * @description {{signupDesc}}
   */
  this.cronapi.authentication.signup = async function (signupUsername, signupEmail, signupPassword, signupConfirmPassword) {
    // The following code was copied from the auto generated Blockly logic for signup
    let responseSignUp, json, httpCodeStatus, httpMessageStatus;
    let isValidSignup = this.cronapi.authentication.isValidSignup;
    // Client isValidSignup blockly location is different on WEB and MOBILE projects and may not exist.
    const webIsValidSignup = this?.blockly?.js?.blockly?.UserControl?.isValidSignup;
    const mobileIsValidSignup = this?.blockly?.js?.blockly?.auth?.UserControl?.isValidSignup;
    if (angular.isFunction(webIsValidSignup)) {
      isValidSignup = webIsValidSignup;
    } else if (angular.isFunction(mobileIsValidSignup)) {
      isValidSignup = mobileIsValidSignup;
    }

    if ((await isValidSignup(signupUsername, signupEmail, signupPassword, signupConfirmPassword))) {
      this.cronapi.util.callServerBlocklyAsynchronous('blockly.UserControl:signUp', async (sender_responseSignUp) => {
        responseSignUp = sender_responseSignUp;
        json = this.cronapi.json.createObjectFromString(responseSignUp);
        httpCodeStatus = this.cronapi.json.getProperty(json, 'code');
        httpMessageStatus = this.cronapi.json.getProperty(json, 'message');
        if (httpCodeStatus == '201') {

          if (window.cordova && window.ionic) {
            this.cronapi.screen.changeView("#/app/login", []);
          } else {
            this.cronapi.screen.changeView("#/login", []);
          }

          this.cronapi.screen.notify('success', this.cronapi.i18n.translate("UserSuccessfullyRegistered", []));
        } else {
          if (this.cronapi.logic.isNullOrEmpty(httpMessageStatus)) {
            this.cronapi.screen.notify('error', this.cronapi.i18n.translate("General.ErrorNotSpecified", []));
          } else {
            this.cronapi.screen.notify('warning', httpMessageStatus);
          }
        }
      }, signupUsername, signupEmail, signupPassword);
    }
  }

  /**
   * @type function
   * @platform W
   * @name {{mutualSignup}}
   * @nameTags signup | cadastre-se | cadastro | cadastre | register | mutual | MÃºtua
   * @description {{mutualSignupDesc}}
   */
  this.cronapi.authentication.mutualSignup = async function () {
    // The following code was copied from the auto generated Blockly logic for mutualSignup
    let item;
    this.cronapi.util.getURLFromOthers('POST', 'application/x-www-form-urlencoded', String(this.cronapi.util.getBaseUrl()) + String('/mutual/register'), this.cronapi.object.createObjectFromString(['{ \"token\": \"', this.cronapi.util.getUserToken(), '\" } '].join('')), null, async (sender_item) => {
      item = sender_item;
      this.cronapi.screen.notify('info', this.cronapi.i18n.translate("Home.view.tokenRegistered", []));
    }, async (sender_item) => {
      item = sender_item;
      this.cronapi.screen.notify('error', this.cronapi.object.getProperty(item, 'responseJSON.message'));
    });
  }

  /**
   * @type function
   * @platform W
   * @name {{mutualLogin}}
   * @nameTags login | MÃºtua | mutual
   * @description {{mutualLoginDesc}}
   */
  this.cronapi.authentication.mutualLogin = async function () {
    // The following code was copied from the auto generated Blockly logic for mutualSignup
    let item;
    this.cronapi.util.getURLFromOthers('POST', 'application/x-www-form-urlencoded', String(this.cronapi.util.getBaseUrl()) + String('/mutual/register'), this.cronapi.object.createObjectFromString(['{ \"token\": \"', this.cronapi.util.getUserToken(), '\" } '].join('')), null, async (sender_item) => {
      item = sender_item;
      this.cronapi.screen.notify('info', this.cronapi.i18n.translate("Home.view.tokenRegistered", []));
    }, async (sender_item) => {
      item = sender_item;
      this.cronapi.screen.notify('error', this.cronapi.object.getProperty(item, 'responseJSON.message'));
    });
  }

  /**
   * @type function
   * @name {{isValidSignup}}
   * @nameTags signup | cadastre-se | cadastro | cadastre | register
   * @param {ObjectType.STRING} signupUsername {{username}}
   * @param {ObjectType.STRING} signupEmail {{email}}
   * @param {ObjectType.STRING} signupPassword {{password}}
   * @param {ObjectType.STRING} signupConfirmPassword {{confirmPassword}}
   * @description {{isValidSignupDesc}}
   * @returns {ObjectType.BOOLEAN}
   */
  this.cronapi.authentication.isValidSignup = function (signupUsername, signupEmail, signupPassword, signupConfirmPassword) {
    // The following code was copied from the auto generated Blockly logic for isValidSignup
    let isValid = true;
    if (this.cronapi.logic.isNullOrEmpty(signupUsername)) {
      this.cronapi.screen.notify('error', this.cronapi.i18n.translate("UsernameCanNotBeEmpty", []));
      isValid = false;
    }
    if (this.cronapi.logic.isNullOrEmpty(signupEmail)) {
      this.cronapi.screen.notify('error', this.cronapi.i18n.translate("EmailCanNotBeEmpty", []));
      isValid = false;
    }
    if (this.cronapi.logic.isNullOrEmpty(signupPassword)) {
      this.cronapi.screen.notify('error', this.cronapi.i18n.translate("PasswordCanNotBeEmpty", []));
      isValid = false;
    }
    if (this.cronapi.logic.isNullOrEmpty(signupConfirmPassword)) {
      this.cronapi.screen.notify('error', this.cronapi.i18n.translate("PasswordConfirmationCanNotBeEmpty", []));
      isValid = false;
    }
    if (signupPassword !== signupConfirmPassword) {
      this.cronapi.screen.notify('error', this.cronapi.i18n.translate("PasswordDoesNotMatch", []));
      isValid = false;
    }
    return isValid;
  }

  /**
   * @type function
   * @platform W
   * @name {{resetPassword}}
   * @nameTags reset | password | redefinir | senha
   * @param {ObjectType.STRING} email {{email}}
   * @description {{resetPasswordDesc}}
   */
  this.cronapi.authentication.resetPassword = function (email) {
    // The following code was copied from the auto generated Blockly logic for resetPassword
    if (this.cronapi.logic.isNullOrEmpty(email)) {
      this.cronapi.screen.notify('error', this.cronapi.i18n.translate("EmailCanNotBeEmpty", []));
    } else {
      this.cronapi.util.callServerBlocklyAsynchronous('blockly.UserControl:resetPassword', (token) => {
        this.cronapi.screen.notify('success', this.cronapi.i18n.translate("ForgotPasswordSent", []));
        this.cronapi.screen.hideModal("forgotPasswordModal");
      }, email, false);
    }
  }

  /**
   * @type function
   * @platform M
   * @name {{resetPasswordWithOTP}}
   * @nameTags reset | password | redefinir | senha
   * @param {ObjectType.STRING} email {{email}}
   * @description {{resetPasswordWithOTPDesc}}
   */
  this.cronapi.authentication.resetPasswordWithOTP = function (email) {
    // The following code was copied from the auto generated Blockly logic for resetPassword
    if (this.cronapi.logic.isNullOrEmpty(email)) {
      this.cronapi.screen.notify('error', this.cronapi.i18n.translate("EmailCanNotBeEmpty", []));
    } else {
      localStorage.removeItem('otpToken');
      this.cronapi.util.callServerBlocklyAsynchronous('blockly.UserControl:resetPassword', (token) => {
        localStorage.setItem('otpToken', token);
        this.cronapi.screen.changeView("#/app/login",[]);
      }, email, true);
      this.cronapi.screen.notify('success', this.cronapi.i18n.translate("ForgotPasswordSent", []));
    }
  }

  /**
   * @category CategoryType.ORGANIZERS
   * @categoryTags organizadores|organizers
   */
  this.cronapi.organizers = {};

  /**
   * @type function
   * @name {{marker}}
   * @description {{markerDesc}}
   * @wizard util_to_do
   */
  this.cronapi.organizers.marker = function() {
  };

  /**
   * @type function
   * @name {{comment}}
   * @description {{commentDesc}}
   * @wizard util_comment
   */
  this.cronapi.organizers.comment = function() {
  };

  /**
   * @type function
   * @name {{group}}
   * @description {{groupDesc}}
   * @wizard util_container
   */
  this.cronapi.organizers.group = function() {
  };

  /**
   * @category CategoryType.MAP
   * @categoryTags map|mapa|keypair
   */
   this.cronapi.map = {};

  /**
   * @type function
   * @name {{createMap}}
   * @description {{createMapDesc}}
   * @wizard maps_create_with
   * @param {ObjectType.OBJECT} values {{createMapVariableParam0}}
   * @returns {ObjectType.MAP}
   */
  this.cronapi.map.createMap = function(values) {
    return values;
  };

  /**
   * @type function
   * @name {{setMapValueByKey}}
   * @description {{setMapValueByKeyDesc}}
   * @param {ObjectType.MAP} map {{setMapValueByKeyParam0}}
   * @param {ObjectType.STRING} field {{setMapValueByKeyParam1}}
   * @param {ObjectType.STRING} value {{setMapValueByKeyParam2}}
   */
  this.cronapi.map.setMapValueByKey = function(map, field, value) {
    const arr = {[field]: value};
    map.push(arr);
  };

  /**
   * @type function
   * @name {{setMapValueByPath}}
   * @description {{setMapValueByPathDesc}}
   * @param {ObjectType.MAP} map {{setMapValueByPathParam0}}
   * @param {ObjectType.STRING} path {{setMapValueByPathParam1}}
   * @param {ObjectType.STRING} value {{setMapValueByPathParam2}}
   */
  this.cronapi.map.setMapValueByPath = function(map, path, value) {
    const content = {};
    const keys = path.split('.');
    const lastKey = keys.pop();
    const lastObj = keys.reduce((content, key) => content[key] = content[key] || {}, content);
    lastObj[lastKey] = value;
    map.push(content);
  };

  /**
   * @type function
   * @name {{getMapValueByPath}}
   * @description {{getMapValueByPathDesc}}
   * @param {ObjectType.MAP} map {{getMapValueByPathParam0}}
   * @param {ObjectType.STRING} path {{getMapValueByPathParam1}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.map.getMapValueByPath = function(map, path) {
    let object = null;
    map.forEach(element => {
      object = element;
      const parts = path.split('.');
      while(parts.length) {
        const property = parts.shift();
        if (!(object.hasOwnProperty(property))) {
          break;
        }
        object = object[property];
      }
    });
    return object;
  };

  /**
   * @type function
   * @name {{getMapValueByKey}}
   * @description {{getMapValueByKeyDesc}}
   * @param {ObjectType.MAP} map {{getMapValueByKeyParam0}}
   * @param {ObjectType.STRING} field {{getMapValueByKeyParam1}}
   * @returns {ObjectType.STRING}
   */
  this.cronapi.map.getMapValueByKey = function(map, field) {
    let object = null;
    map.forEach(element => {
      if (element.hasOwnProperty(field)) {
        object = element[field];
      }
    });
    return object;
  };

  /**
   * @category {{breadcrumb}}
   * @categoryTags breadcrumb | breadcrumbs
   */
   this.cronapi.breadcrumb = {};

   /**
    * @type function
    * @name {{breadcrumb}}
    * @description {{breadcrumbDesc}}
    * @param {ObjectType.MAP} map {{breadcrumbParamMap}}
    * @returns {ObjectType.STRING}
    */
   this.cronapi.breadcrumb.jsonBreadcrumb = function (map) {
       let breadcrumb = [];
       map = Array.isArray(map) ? map : [map];

       map.forEach(function (item) {
           breadcrumb.push(item)
       });
       return breadcrumb;
   };

   /**
    * @type function
    * @name {{listBreadcrumb}}
    * @description {{listBreadcrumbDesc}}
    * @param {ObjectType.BOOLEAN} root {{listBreadcrumbRoot}}
    * @param {ObjectType.STRING} title {{listBreadcrumbTitle}}
    * @param {ObjectType.STRING} link {{listBreadcrumbLink}}
    * @param {ObjectType.MAP} icon {{listBreadcrumbIcon}}
    * @returns {ObjectType.STRING}
    */
    this.cronapi.breadcrumb.listBreadcrumb = function ( /** @type {ObjectType.BOOLEAN} @description {{listBreadcrumbRoot}} @blockType util_dropdown @keys true|false @values {{yes}}|{{no}} */ root,  /** @type {ObjectType.STRING}  @description {{listBreadcrumbTitle}} */  title,  /** @type {ObjectType.STRING} @description {{listBreadcrumbIcon}} */ icon, /** @type {ObjectType.STATEMENT} @description {{listBreadcrumbLink}} */ link) {
       let json = {};

       if (root === 'true' || root === true) {
          json.type = "rootitem"
       } else {
          json.type = "item"
       }

       json.text = title;
       json.showText = true;
       json.href = "javascript:void(0);";
       if (link) json.action = link
       if (icon) {
           json.icon = icon
           json.showIcon = true
       } else {
           json.showIcon = false
       }

       return json;
   };

  /**
   * @category Websocket
   * @categoryTags websocket
   */
  this.cronapi.websocket = {};


  /**
   * @type function
   * @name {{websocketFunction}}
   * @nameTags websocket
   * @description {{websocketFunctionDescription}}
   * @param {ObjectType.STRING} server {{websocketFunctionParamServer}}
   * @param {ObjectType.STATEMENTSENDER} callbackOpen {{websocketFunctionParamCallbackOpen}}
   * @param {ObjectType.STATEMENTSENDER} callbackMessage {{websocketFunctionParamCallbackOnMessage}}
   * @param {ObjectType.STATEMENTSENDER} callbackError {{websocketFunctionParamCallbackOnError}}
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.websocket.connect = function (server, callbackOpen, callbackMessage, callbackError) {
    let wrapper = {};

    function connect() {
      wrapper.ws = new WebSocket(server);
      wrapper.ws.onopen = ()=> {
        if (callbackOpen) {
          callbackOpen(wrapper.ws);
        }
      };

      wrapper.ws.onmessage = (e)=> {
        if (callbackMessage) {
          callbackMessage(e.data);
        }
      }

      wrapper.ws.onclose = (e)=> {
        if (!wrapper.__closed) {
          console.log('Socket is closed. Reconnect will be attempted in 1 second.', e.reason);
          setTimeout(()=> {
            connect();
          }, 1000);
        }
      }

      wrapper.ws.onerror = (err)=> {
        console.error('Socket encountered error: ', err.message);
        if (callbackError) {
          callbackError(err);
        }
      }
    }

    connect();

    return wrapper;
  };

  /**
   * @type function
   * @name {{websocketFunctionSend}}
   * @nameTags websocket, send
   * @description {{websocketFunctionSendDescription}}
   * @param {ObjectType.OBJECT} server {{websocketFunctionSendParamWs}}
   * @param {ObjectType.STRING} callbackMessage {{websocketFunctionSendParamMessage}}
   */
  this.cronapi.websocket.send = function (ws, message) {
    if (ws && !ws.__closed) {
      ws.ws.send(message);
    }
  };

  /**
   * @type function
   * @name {{websocketFunctionClose}}
   * @nameTags websocket, close
   * @description {{websocketFunctionCloseDescription}}
   * @param {ObjectType.OBJECT} server {{websocketFunctionCloseParamWs}}
   */
  this.cronapi.websocket.close = function (ws) {
    if (ws && !ws.__closed) {
      ws.__closed = true;
      ws.ws.close();
    }
  };


  /**
   * @category {{multimedia.category}}
   * @categoryTags audio|Ã¡udio|video|record|gravar|multimÃ­dia|multimidia|multimedia
   */
  this.cronapi.multimedia = this.cronapi.multimedia || {};

  /**
   * @type function
   * @name {{recordAudio}}
   * @nameTags audio|Ã¡udio|record|gravar|multimÃ­dia|multimidia|multimedia
   * @description {{recordAudioDescription}}
   * @multilayer false
   * @returns {ObjectType.OBJECT}
   */
  this.cronapi.multimedia.recordAudio = async function() {
    let audioIN = { audio: true };
    try {
      const stream = await navigator.mediaDevices.getUserMedia(audioIN)
      const audio = document.createElement("audio")
      audio.srcObject = stream;
      document.body.appendChild(audio);
      const mediaRecorder = new MediaRecorder(stream);
      mediaRecorder.start();
      return mediaRecorder;
    } catch (error) {
      alert(error);
    }
  };

  /**
   * @type function
   * @name {{pauseRecord}}
   * @nameTags audio|Ã¡udio|pause|pausar|multimÃ­dia|multimidia|multimedia
   * @description {{pauseRecordDescription}}
   * @multilayer false
   * @param {ObjectType.OBJECT} mediaRecorder {{pauseRecordParam1}}
   * @returns {ObjectType.NULL}
   */
   this.cronapi.multimedia.pauseRecord = async function(/** @type {ObjectType.OBJECT} @description {{pauseRecordParam1}} */ mediaRecorder) {
    if(mediaRecorder.state === "recording") {
      mediaRecorder.pause();
    } else {
      mediaRecorder.resume();
    }
  };

  /**
   * @type function
   * @name {{stopRecord}}
   * @nameTags audio|Ã¡udio|stop|parar|multimÃ­dia|multimidia|multimedia
   * @description {{stopRecordDescription}}
   * @multilayer false
   * @param {ObjectType.OBJECT} mediaRecorder {{stopRecordParam1}}
   * @returns {ObjectType.OBJECT}
   */
   this.cronapi.multimedia.stopRecord = async function(/** @type {ObjectType.OBJECT} @description {{stopRecordParam1}} */ mediaRecorder) {

    const mediaPromise = new Promise(function(resolve, reject) {
      let dataArray = [];
      mediaRecorder.ondataavailable = function (ev) {
        dataArray.push(ev.data);
      }

      mediaRecorder.onstop = function() {
        let audioData = new Blob(dataArray, { 'type': 'audio/mp3;' });
        resolve(audioData);
      };
      mediaRecorder.stop();
    });

    const audioRecorded = await mediaPromise;
    return audioRecorded;
  };  
}

(cronapi).bind(window)();


// This is only for test purpose
try {
  if (module) {
    module.exports = {
      window
    };
  }
} catch(err) {}